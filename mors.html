<!DOCTYPE html>
<html lang="zxx">
<head>
  <title>ТенеГрад-морской бой</title>
  <meta charset="UTF-8">
  <meta name="description" content="ТенеГрад">
  <meta name="keywords" content="ТенеГрад">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Favicon -->
  <link href="img/favicon.ico" rel="shortcut icon"/>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i,700,700i,900,900i" rel="stylesheet">


  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/bootstrap.min.css"/>
  <link rel="stylesheet" href="css/font-awesome.min.css"/>
  <link rel="stylesheet" href="css/slicknav.min.css"/>
  <link rel="stylesheet" href="css/owl.carousel.min.css"/>
  <link rel="stylesheet" href="css/magnific-popup.css"/>
  <link rel="stylesheet" href="css/animate.css"/>

  <!-- Main Stylesheets -->
  <link rel="stylesheet" href="css/style4.css"/>


  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>
<body>


  <!-- Page Preloder -->
  <div id="preloder">
    <div class="loader"></div>
  </div>

  <!-- Header section -->
  <header class="header-section">
    <div class="header-warp">
      
      </div>
      <div class="header-bar-warp d-flex">
        <!-- site logo -->
        <a href="index.html" class="site-logo">
          <img src="./img/logomors.png" alt="">
        </a>
        <nav class="top-nav-area w-100">
          <div class="user-panel">

            <a href=""> <font color="#F0F8FF" face="Markella"><big><big></big></big></font></a>
            <a href=""> </a>
            <a href=""> <font color="#F0F8FF" face="Markella"><big><big></big></big></font></a><hr>
            <a href="review.html"></a>
          </div>

          <ul class="main-menu primary-menu"><hr>
            <li><a href="index.html"><font color="#FFD700" face="Markella"><big><big><big>Главная</big></big></big></a></font>
                <ul class="sub-menu">
                <li><a href=""><font color="#FF4500" face="Impact">Бета-версия сайта!</a></li></font>
                <li><a href="login.html"><font color="#FF4500" face="Impact">Для разработчиков!!!</a></li></font>
              </ul>
            </li>
            <li><a href=""><font color="#7CFC00" face="Markella"><big><big><big>Что нового?</big></big></big></a></font>
              <ul class="sub-menu">
                <li><a href="game-single.html"><font color="#006400" face="Impact">Новости города!</a></li></font>
                <li><a href="games.html"><font color="#006400" face="Impact">Обновления сайта!</a></li></font>
              </ul>
            </li>
            <li><a href=""><font color="#FF69B4" face="Markella"><big><big><big>Форум</big></big></big></a></font>
              <ul class="sub-menu">
                <li><a href="https://forms.yandex.ru/u/604b2e9783bda4d60895a60d/"><font color="#C71585" face="Impact">Поддержка сайта!</a></li></font>
                <li><a href=""><font color="#C71585" face="Impact">!!Форум в разработке!!</a></li></font>
              </ul>
            </li>
            <li><a href=""><font color="#48D1CC" face="Markella"><big><big><big>Город</big></big></big></a></font>
              <ul class="sub-menu">
                <li><a href="info.html"><font color="#0000CD" face="Impact">Информация!</a></li></font>
                <li><a href="moderator.html"><font color="#0000CD" face="Impact">Вступай к нам!</a></li></font>
                <li><a href="achiv.html"><font color="#0000CD" face="Impact">Ачивки города!</a></li></font>
              </ul>
            <li><a href=""><font color="#B22222" face="Markella"><big><big><big>Игры</big></big></big></a></font>
              <ul class="sub-menu">
              <li><a href="koleso.html"><font color="#8B0000" face="Impact">Колесо фортуны!</a></li></font>
              <li><a href="krest.html"><font color="#8B0000" face="Impact">Крестики-нолики!</a></li></font>
              </ul>
            </li>
        </nav>
      </div>
    </div>
  </header>
<br><br><br><br><br><br><br>
<body>
  <style>
    #battle-field-1, #battle-field-2 { width: 320px; height: 320px; float: left; margin: 10px; border: 1px dashed black; }
    .ships-line { color: grey; margin: 10px; line-height: 5px; letter-spacing: 10px; }
    #battle-field-1 .s { background: #222; }
    #battle-field-2 .s, .w { background: #eee; }
    .d { background: red; }
    .m { background: gray; }
    #battle-field-1 div, #battle-field-2 div { width: 30px; height: 30px; float: left; border: 1px solid black;}
  </style>

  <div id="battle-field-1"></div>
  <div id="battle-field-2"></div>
  <div id="output"></div>
  <button id="start">Начать игру</button>

   <script>  
  window.onload = function(w, h) {
    var p1map = [],
        p2map = ['ooosooooss',
                'ososoooooo',
                'ooosoooooo',
                'ooosooosoo',
                'ooooooosoo',
                'osoosoosoo',
                'osoooooooo',
                'ososoooooo',
                'ooooossooo',
                'ssooooooso'],
        p1 = document.getElementById('battle-field-1'),
        p2 = document.getElementById('battle-field-2'),
        outputDiv = document.getElementById("output"),
        button = document.getElementById('start');
    outputDiv.innerHTML = "<p><b>Помните конфигурацию кораблей: 1 x 4, 2 x 3, 3 x 2, 4 x 1</b></p>";
    button.onclick = function () {
      button.disabled = true;
      for (var a = 0; a < w; a++) {
        var shipLine = prompt("Введите " + a + " строку ваших кораблей, где 'o' - пустая ячейка, а 's' - ячейка с вашими кораблями", "ossoooosoo");
        p1map.push(shipLine);
        if (p1map[a] != undefined) {
          outputDiv.innerHTML += "<p class='ships-line'>" + p1map[a] + "</p>";
        }
      }

      for (i = 0; i < w; i++) for (j = 0; j < h; j++) {
        div1 = document.createElement('div');
        div1.id = i+'_'+j;
        div1.className = p1map[i][j];
        if (p1map[i][j] == 's') {
          div1.className = 's';
        } else {
          div1.className = 'w';
        }
        p1.appendChild(div1);
        div2 = document.createElement('div');
        div2.className = p2map[i][j] == 's' ? 's' : 'w';
        div2.onclick = function () { if (fire(this)) backfire(); };
        p2.appendChild(div2);
      }
    };
      function fire(el) {
        if (el.className == 'd' || el.className == 'm') return false;
        el.className = el.className == 's' ? 'd' : 'm';
        if (document.querySelectorAll('#battle-field-2 .s').length === 0) {
          alert('Вы победили и получаете подарок от ТенеГрада! Скажи промокод PODAROK21 и получи приз!'); 
          return false;
        }
        if (el.className == 'm') return true;
      }
      function backfire() {
        for (i = w * h; i > 0; i--) {
          var targets = document.querySelectorAll('#battle-field-1 .s, #battle-field-1 .w');
          if (targets.length === 0 || fire(targets[Math.floor(Math.random() * targets.length)])) break;
        }
        if (document.querySelectorAll('#battle-field-1 .s').length === 0) alert('Вы проиграли! Обновите страницу, чтобы начать новую игру.');
      }
    }(10, 10);
  </script>

        <!--====== Javascripts & Jquery ======-->
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.slicknav.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.sticky-sidebar.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/main.js"></script>

    </body>
</html>