!function(e){var t=function(){var e={};!function(e){!function(n){function r(e,t){if(h&&m){var n="keyset: "+t._keyset+" key: "+t._key+" (lang: "+t._lang+")";console.log(e,n)}}function a(e){return"string"==typeof e?e:e.block+(e.elem?u+e.elem:"")+(e.modName?c+e.modName+c+e.modVal:"")}function o(e){var t={};return e.split(u).forEach(function(e,n){var r=[n?"elem":"block","mod","val"];e.split(c).forEach(function(e,n){t[r[n]]=e})}),t}function i(e){e&&f.push(e)}function s(){return f.length&&f.pop()}function l(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof n.I18N&&n.I18N._proto)return n.I18N;"undefined"==typeof t&&(t={}),e=n;var c="_",u="__",d="ru",p={},f=[],h=!1,m="undefined"!=typeof console&&"function"==typeof console.log;l.prototype={lang:function(e){return this._lang=e,this},project:function(e){return this._prj=e,this},keyset:function(e,t){return t&&i(this._keyset),this._keyset=a(e),this},key:function(e){return this._key=e,this},decl:function(e){var n=o(this._keyset),r="i-tanker"===n.block?"tanker":this._prj,a=n.elem||this._keyset,i=this._key;r=t[r]||(t[r]={}),a=r[a]||(r[a]={}),a[i]="function"==typeof e?e:function(){return e};var s=p[this._lang]||(p[this._lang]={}),l=s[this._keyset]||(s[this._keyset]={});l[i]=e},val:function(e,t){var n=p[this._lang]&&p[this._lang][this._keyset];if(!n)return r("[I18N_NO_KEYSET] %s",this),"";n=n[this._key];var a=typeof n;return"undefined"===a?(r("[I18N_NO_VALUE] %s",this),""):"string"===a?n:n.call(t||this,e)},_cache:function(){return p}};var y=function(e,t,n){return y.keyset(e).key(t,n)};y._proto=new l,y.project=function(e){return this._proto.project(e),this},y.keyset=function(e){return this._proto.keyset(e,!0),this},y.key=function(e,t){var n,r,a=this._proto;return a.lang(this._lang).key(e),n=a.val(t,y),r=s(),r&&a.keyset(r,!1),n},y.decl=function(e,t,n){var r,a=this._proto;n&&n.lang&&a.lang(n.lang),a.keyset(e);for(r in t)t.hasOwnProperty(r)&&a.key(r).decl(t[r]);return this},y.lang=function(e){return"undefined"!=typeof e&&(this._lang=e),this._lang},y.debug=function(e){h=!!e},y.lang(d),n.I18N=y}("undefined"==typeof e?{}:e)}(e);var t=e.I18N;return t.decl("attach",{"button-text":"Выбрать файл","no-file":"файл не выбран"},{lang:"ru"}),t.decl("auth",{auth:"Авторизация","fill-input":"Заполните это поле",login:"Логин",logon:"Войти",more:"Ещё",password:"Пароль",register:"Регистрация",remember:"Вспомнить пароль","social-log-in":"Войти при помощи социальной сети",temporary:"Чужой компьютер","wrong-characters":"Недопустимый ввод","wrong-keyboard-layout":"Смените раскладку","wrong-password":"Пароль не может совпадать с логином"},{lang:"ru"}),t.decl("b-page",{title:"Yandex.Forms"},{lang:"ru"}),t.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),t.decl("copyright",{link:function(e){return"ООО «"+e.content+"»"},yandex:"ЯНДЕКС"},{lang:"ru"}),t.decl("date-range-input",{from:"с",to:"по"},{lang:"ru"}),t.decl("file",{"default-error-text":"Что-то пошло не так."},{lang:"ru"}),t.decl("file-upload",{"files-limit-error":function(e){return"Можно прикрепить не более "+e.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"файла",some:"файлов",many:"файлов",none:"файлов"})},"limit-hint":function(e){return"До "+e.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"файл",some:"файла",many:"файлов",none:"файлов"})+" (общий размер — до "+e.size+" "+this.keyset("file-upload").key("mb",{})+")."},"limit-hint-one-file":function(e){return"Один файл размером до "+e.size+" "+this.keyset("file-upload").key("mb",{})+"."},mb:"МБ","size-limit-error":function(e){return"Размер загружаемых файлов превышает "+e.size+" "+this.keyset("file-upload").key("mb",{})},"upload-text":"Загрузить"},{lang:"ru"}),t.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",stat:"Статистика",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/",confidential:"Конфиденциальность",copyright:"Яндекс","created-by-user-with":function(e){return"Создано пользователем с помощью <a href="+e.url+' target="_blank" class="link">Яндекс.Форм</a>'},"created-with":function(e){return'Создано с помощью <a href="'+e.url+'" target="_blank" class="link">Яндекс.Форм</a>'},desc1:"Данная форма была создана при помощи сервиса",desc2:"Яндекс не несет ответственности за содержание настоящей формы, а также за обработку размещенных Вами в форме данных. В случае выявления нарушения вы можете обратится в ",extra:"Данная форма была создана при помощи сервиса <connect>. Яндекс не несет ответственности за содержание настоящей формы, а также за обработку размещенных Вами в форме данных. В случае выявления нарушения вы можете обратится в <support>.",feedback:"Обратная связь",notResponsible:function(e){return'Эта форма создана пользователем. <a href="'+e.url+'" target="_blank" class="link link_not-responsible">Условия использования</a> Яндекс.Форм'},notResponsibleIframe:function(e){return"Эта форма создана пользователем.<br/>"+e.link+" Яндекс.Форм"},support:"службу поддержки",termsOfUse:"Условия использования",termsOfUseIframe:"Условия использования",tryForms:function(e){return"Создайте опрос за пару минут.<br>"+e.link},tryFormsLink:"Попробуйте Яндекс.Формы",yaconnect:"Яндекс.Коннект"},{lang:"ru"}),t.decl("header2",{service:"Формы"},{lang:"ru"}),t.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appmetrica:"AppMetrica",appsearch:"Приложения",audience:"Аудитории",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",clickhouse:"ClickHouse",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",radar:"Радар",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",telephony:"Телефония",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toloka:"Яндекс.Толока",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),t.decl("i-tanker__days",{acc1:"в понедельник",acc2:"во вторник",acc3:"в среду",acc4:"в четверг",acc5:"в пятницу",acc6:"в субботу",acc7:"в воскресенье",n1:"понедельник",n2:"вторник",n3:"среда",n4:"четверг",n5:"пятница",n6:"суббота",n7:"воскресенье",name:function(e){return function(e){return t.tanker.days[(e.short?"short":"n")+e.day]()}.call(this,e)},short1:"пн",short2:"вт",short3:"ср",short4:"чт",short5:"пт",short6:"сб",short7:"вс",today:"сегодня",tomorrow:"завтра",yesterday:"вчера"},{lang:"ru"}),t.decl("i-tanker__dynamic",{gender:function(e){return function(e){return e[e.gender]}.call(this,e)},plural:function(e){return function(e){var t=isNaN(parseInt(e.count))?0:e.count,n=t%10,r=t%100;return 1==n&&11!=r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many}.call(this,e)},plural_adv:function(e){return function(e){var t=isNaN(parseInt(e.count))?0:e.count;return 0===t?e.none:this.keyset("i-tanker__dynamic").key("plural",{count:e.count,one:e.one,some:e.some,many:e.many})}.call(this,e)},toggle:function(e){return function(e){return Boolean(e.condition)?e.true:e.false}.call(this,e)}},{lang:"ru"}),t.decl("i-tanker__months",{g1:"Января",g10:"Октября",g11:"Ноября",g12:"Декабря",g2:"Февраля",g3:"Марта",g4:"Апреля",g5:"Мая",g6:"Июня",g7:"Июля",g8:"Августа",g9:"Сентября",n1:"Январь",n10:"Октябрь",n11:"Ноябрь",n12:"Декабрь",n2:"Февраль",n3:"Март",n4:"Апрель",n5:"Май",n6:"Июнь",n7:"Июль",n8:"Август",n9:"Сентябрь",name:function(e){return function(e){var n=t.tanker.months[(e.case||"n")+e.month]();return Boolean(e.lowercase)?n.toLowerCase():n}.call(this,e)},short1:"янв",short10:"окт",short11:"ноя",short12:"дек",short2:"фев",short3:"мар",short4:"апр",short5:"май",short6:"июн",short7:"июл",short8:"авг",short9:"сен"},{lang:"ru"}),t.decl("m-datepicker",{clear:"очистить"},{lang:"ru"}),t.decl("m-datepicker__short-days",{1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб",7:"вс"},{lang:"ru"}),t.decl("payment",{"title-ac":"Банковской картой","title-mc":"Со счёта телефона","title-pc":"Яндекс.Деньгами"},{lang:"ru"}),t.decl("popup",{add:"Добавить",cancel:"Отмена",revert:"Вернуть",apply:"Применить"},{lang:"ru"}),t.decl("survey",{"add-more":"Ещё","attach-file":"Не приложен файл","attach-file-already-uploaded":function(e){return"Вы уже загружали файл с именем <b>"+e.file+"</b>.<br/> Если хотите его заменить, прикрепите новый файл."},"attach-file-max-file-size":function(e){return"Максимальный размер файла: <b>"+e.size+" "+this.keyset("file-upload").key("mb",{})+"</b>."},"captcha-updater":"показать другую картинку",choose:"Выбрать","choose-options":"Не выбран ни один из вариантов",confirm:"Вы не подтвердили своё согласие на передачу анкеты с вашими персональными данными","empty-field":"Это поле обязательно","error-text":"Не все обязательные поля заполнены верно.","exceeded-max-amount":function(e){return"Максимум"+e.max+"₽"},feedback:"Форма обратной связи","feedback-button-text":"Оправить отзыв","file-too-large":"Файл слишком большой","incorrect-date":"Неверная дата","incorrect-number":"Введите целое число.","invalid-email":"Введён некорректный email","next-button-text":"Далее","no-options":"Для этого поля нет данных, но оно обязательно для заполнения.","prev-button-text":"Назад",registration:"Регистрация","registration-button-text":"Зарегистрироваться","repeat-submit":"Что-то пошло не так. Пожалуйста, отправьте форму еще раз.","save-changes":"Сохранить изменения",simple_form:"","simple_form-button-text":"Отправить","success-simple_form":"Ваша заявка принята!",sum:"Сумма"},{lang:"ru"}),t.decl("survey-header",{"back-startups-contact":"Финансовая поддержка"},{lang:"ru"}),t.decl("ticker__text",{notifications:"Уведомлений"},{lang:"ru"}),t.decl("user",{enter:"Войти",exit:"Выйти",letter:function(e){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},letter_compose:"Написать письмо",passport:"Паспорт",tune:"Настройка",upload_files:"Мой Диск"},{lang:"ru"}),t.decl("user2",{"add-account":"Добавить аккаунт","edit-accounts":"Редактировать список",enter:"Войти",exit:"Выйти",help:"Помощь",mail:function(e){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},mail_compose:"Написать письмо",passport:"Управление аккаунтом",settings:"Настройки",upload_files:"Мой диск",ya_plus:"Получить Плюс",ya_plus_on:"Плюс"},{lang:"ru"}),t.lang("ru"),t}(),n=!0;"object"==typeof exports&&(module.exports=t),"object"==typeof modules&&modules.define("i18n",function(e){e(t)}),n&&((e.BEM||(e.BEM={})).I18N=t)}("undefined"!=typeof window?window:global);
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _slicedToArray=function(){function t(t,e){var n=[],r=!0,s=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(s)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BEMHTML;!function(t){function e(e){var r={},s=function(e,r){return function(n){if("object"===("undefined"==typeof r?"undefined":_typeof(r))&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var s;s="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this,s.bemhtml=n()}}(function(){return function t(e,r,s){function i(o,c){if(!r[o]){if(!e[o]){var u="function"==typeof n&&n;if(!c&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return i(n?n:t)},h,h.exports,t,e,r,s)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(t,e,n){function r(t){this.bemxjst=t,this.jsClass=null,this.tag=new i(this,"tag"),this.attrs=new i(this,"attrs"),this.js=new i(this,"js"),this.mix=new i(this,"mix"),this.bem=new i(this,"bem"),this.cls=new i(this,"cls"),a.apply(this,arguments)}var s=t("inherits"),i=t("../bemxjst/match").Match,a=t("../bemxjst/entity").Entity;s(r,a),n.Entity=r,r.prototype.init=function(t,e){this.block=t,this.elem=e,this.jsClass=this.bemxjst.classBuilder.build(this.block,this.elem)},r.prototype._initRest=function(t){"default"===t?this.rest[t]=this.def:"tag"===t||"attrs"===t||"js"===t||"mix"===t||"bem"===t||"cls"===t||"content"===t?this.rest[t]=this[t]:this.rest.hasOwnProperty(t)||(this.rest[t]=new i(this,t))},r.prototype.defaultBody=function(t){return this.bemxjst.render(t,this,this.tag.exec(t),t.ctx.js!==!1?this.js.exec(t):void 0,this.bem.exec(t),this.cls.exec(t),this.mix.exec(t),this.attrs.exec(t),this.content.exec(t))}},{"../bemxjst/entity":5,"../bemxjst/match":8,inherits:11}],2:[function(t,e,n){function r(t){o.apply(this,arguments),this._shortTagCloser="undefined"!=typeof t.xhtml&&t.xhtml?"/>":">",this._elemJsInstances=t.elemJsInstances,this._omitOptionalEndTags=t.omitOptionalEndTags,this._unquotedAttrs="undefined"!=typeof t.unquotedAttrs&&t.unquotedAttrs}var s=t("inherits"),i=t("../bemxjst/utils"),a=t("./entity").Entity,o=t("../bemxjst");s(r,o),e.exports=r,r.prototype.Entity=a,r.prototype.runMany=function(t){var e="",n=this.context,r=n.position,s=n._notNewList;if(s?n._listLength+=t.length-1:(n.position=0,n._listLength=t.length),n._notNewList=!0,this.canFlush)for(var i=0;i<t.length;i++)e+=n._flush(this._run(t[i]));else for(var i=0;i<t.length;i++)e+=this._run(t[i]);return s||(n.position=r),e},r.prototype.render=function(t,e,n,r,s,a,o,c,u){var l=t.ctx;if(void 0===n)n="div";else if(!n)return u||0===u?this._run(u):"";var h="<"+n,d=l.js;d!==!1&&(r===!0&&(r={}),r&&r!==l.js?d!==!0&&(r=i.extend(d,r)):d===!0&&(r={}));var p;r&&(p={},p[e.jsClass]=r);var m="undefined"!=typeof s?s:e.block||e.elem;m=!!m;var f=p&&(this._elemJsInstances?e.block||e.elem:e.block&&!e.elem);if(!m&&!a)return this.renderClose(h,t,n,c,m,l,u);h+=" class=";var x="";if(m){if(x+=e.jsClass,x+=this.buildModsClasses(e.block,e.elem,e.elem?t.elemMods:t.mods),l.mix&&o&&o!==l.mix&&(o=[].concat(o,l.mix)),o){var y=this.renderMix(e,o,p,f);x+=y.out,p=y.jsParams,f=y.addJSInitClass}a&&(x+=" "+("string"==typeof a?i.attrEscape(a).trim():a))}else x+="string"==typeof a?i.attrEscape(a).trim():a;return f&&(x+=" i-bem"),h+=this._unquotedAttrs&&i.isUnquotedAttr(x)?x:'"'+x+'"',m&&p&&(h+=" data-bem='"+i.jsAttrEscape(JSON.stringify(p))+"'"),this.renderClose(h,t,n,c,m,l,u)};var c={html:1,head:1,body:1,p:1,ul:1,ol:1,li:1,dt:1,dd:1,colgroup:1,thead:1,tbody:1,tfoot:1,tr:1,th:1,td:1,option:1,rb:1,rt:1,rtc:1,rp:1,optgroup:1};r.prototype.renderClose=function(t,e,n,r,s,a,o){var u=t;return u+=this.renderAttrs(r,a),i.isShortTag(n)?(u+=this._shortTagCloser,this.canFlush&&(u=e._flush(u))):(u+=">",this.canFlush&&(u=e._flush(u)),(o||0===o)&&(u+=this.renderContent(o,s)),this._omitOptionalEndTags&&c.hasOwnProperty(n)||(u+="</"+n+">")),this.canFlush&&(u=e._flush(u)),u},r.prototype.renderAttrs=function(t,e){var n="";if(i.isObj(t)||i.isObj(e.attrs)){t=i.extend(t,e.attrs);for(var r in t){var s=t[r];if(void 0!==s&&s!==!1&&null!==s)if(s===!0)n+=" "+r;else{var a=i.isSimple(s)?s:this.context.reapply(s);n+=" "+r+"=",n+=this._unquotedAttrs&&i.isUnquotedAttr(a)?a:'"'+i.attrEscape(a)+'"'}}}return n},r.prototype.renderMix=function(t,e,n,r){var s={},i=this.context,a=n,o=r;s[t.jsClass]=!0,Array.isArray(e)||(e=[e]);for(var c=this.classBuilder,u="",l=0;l<e.length;l++){var h=e[l];if(h){"string"==typeof h&&(h={block:h,elem:void 0});var d=!1;h.elem?d=h.elem!==t.elem&&h.elem!==i.elem||h.block&&h.block!==t.block:h.block&&(d=!(h.block===t.block&&h.mods)||h.mods&&t.elem);var p=h.block||h._block||i.block,m=h.elem||h._elem||i.elem,f=c.build(p,m),x=h.elem||h._elem||(h.block?void 0:i.elem);if(d&&(u+=" "+c.build(p,x)),u+=this.buildModsClasses(p,x,h.elem||!h.block&&(h._elem||i.elem)?h.elemMods:h.mods),h.js&&(a||(a={}),a[c.build(p,h.elem)]=h.js===!0?{}:h.js,o||(o=p&&!h.elem)),d&&!s[f]){s[f]=!0;var y=this.entities[f];if(y){var g=i.block,b=i.elem,v=y.mix.exec(i);if(i.elem=b,i.block=g,v)for(var k=0;k<v.length;k++){var _=v[k];if(_&&(!_.block&&!_.elem||!s[c.build(_.block,_.elem)])){if(_.block)continue;_._block=p,_._elem=m,e=e.slice(0,l+1).concat(_,e.slice(l+1))}}}}}}return{out:u,jsParams:a,addJSInitClass:o}},r.prototype.buildModsClasses=function(t,e,n){if(!n)return"";var r,s="";for(r in n)if(n.hasOwnProperty(r)&&""!==r){var i=n[r];if(i||0===i){"boolean"!=typeof i&&(i+="");var a=this.classBuilder;s+=" "+(e?a.buildElemClass(t,e,r,i):a.buildBlockClass(t,r,i))}}return s}},{"../bemxjst":7,"../bemxjst/utils":10,"./entity":1,inherits:11}],3:[function(t,e,n){function r(t){this.modDelim=t.mod||"_",this.elemDelim=t.elem||"__"}n.ClassBuilder=r,r.prototype.build=function(t,e){return e?t+this.elemDelim+e:t},r.prototype.buildModPostfix=function(t,e){var n=this.modDelim+t;return e!==!0&&(n+=this.modDelim+e),n},r.prototype.buildBlockClass=function(t,e,n){var r=t;return n&&(r+=this.buildModPostfix(e,n)),r},r.prototype.buildElemClass=function(t,e,n,r){return this.buildBlockClass(t)+this.elemDelim+e+this.buildModPostfix(n,r)},r.prototype.split=function(t){return t.split(this.elemDelim,2)}},{}],4:[function(t,e,n){function r(t){this._bemxjst=t,this.ctx=null,this.block="",this._currBlock="",this.elem=null,this.mods={},this.elemMods={},this.position=0,this._listLength=0,this._notNewList=!1,this.escapeContent=t.options.escapeContent===!0}var s=t("./utils");n.Context=r,r.prototype._flush=null,r.prototype.isSimple=s.isSimple,r.prototype.isShortTag=s.isShortTag,r.prototype.extend=s.extend,r.prototype.identify=s.identify,r.prototype.xmlEscape=s.xmlEscape,r.prototype.attrEscape=s.attrEscape,r.prototype.jsAttrEscape=s.jsAttrEscape,r.prototype.isFirst=function(){return 1===this.position},r.prototype.isLast=function(){return this.position===this._listLength},r.prototype.generateId=function(){return s.identify(this.ctx)},r.prototype.reapply=function(t){return this._bemxjst.run(t)}},{"./utils":10}],5:[function(t,e,n){function r(t,e,n,r){this.bemxjst=t,this.block=null,this.elem=null,this.options={},this.canFlush=!0,this.def=new a(this),this.content=new a(this,"content"),this.rest={},this.init(e,n),this.initModes(r)}function s(){return this.ctx.content}var i=t("./utils"),a=t("./match").Match,o=t("./tree"),c=o.Template,u=o.PropertyMatch,l=o.CompilerOptions;n.Entity=r,r.prototype.init=function(t,e){this.block=t,this.elem=e},r.prototype.initModes=function(t){for(var e=0;e<t.length;e++){for(var n=t[e],r=n.predicates.length-1;r>=0;r--){var s=n.predicates[r];if(s instanceof u&&"_mode"===s.key){n.predicates.splice(r,1),this._initRest(s.value),this.rest[s.value].push(n);break}}r===-1&&this.def.push(n);for(var r=n.predicates.length-1;r>=0;r--){var s=n.predicates[r];s instanceof l&&(this.options=i.extend(this.options,s.options))}}},r.prototype.prepend=function(t){for(var e=Object.keys(this.rest),n=0;n<e.length;n++){var r=e[n];t.rest[r]&&this.rest[r].prepend(t.rest[r])}e=Object.keys(t.rest);for(var n=0;n<e.length;n++){var r=e[n];this.rest[r]||(this._initRest(r),this.rest[r].prepend(t.rest[r]))}},r.prototype.run=function(t){return 0!==this.def.count?this.def.exec(t):this.defaultBody(t)},r.prototype.setDefaults=function(){if(0!==this.content.count&&this.content.push(new c([],s)),0!==this.def.count){this.canFlush=this.options.flush||!1;var t=this;this.def.push(new c([],function(){return t.defaultBody(this)}))}}},{"./match":8,"./tree":9,"./utils":10}],6:[function(t,e,n){function r(t,e){this.name="BEMXJSTError",this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,e||this.constructor):this.stack=(new Error).stack}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,n.BEMXJSTError=r},{}],7:[function(t,e,n){function r(t){this.options=t||{},this.entities=null,this.defaultEnt=null,this.tree=null,this.match=null,this.contextConstructor=function(t){c.call(this,t)},s(this.contextConstructor,c),this.context=null,this.classBuilder=new u(this.options.naming||{}),this.depth=0,this.canFlush=!1,this.oninit=null,this.defaultEnt=new this.Entity(this,"","",[]),this.defaultElemEnt=new this.Entity(this,"","",[])}var s=t("inherits"),i=t("./tree").Tree,a=t("./tree").PropertyMatch,o=t("./tree").AddMatch,c=t("./context").Context,u=t("./class-builder").ClassBuilder,l=t("./utils");e.exports=r,r.prototype.locals=i.methods.concat("local","applyCtx","applyNext","apply"),r.prototype.compile=function(t){function e(){return a._run(a.context.ctx)}function n(t,n){return n?a.local(n,function(){return a.local({ctx:t},e)}):a.local({ctx:t},e)}function r(t,e){return a.applyMode(t,e)}function s(t){return function(e){return a.local(t,e)}}var a=this,o=new i({refs:{applyCtx:n,local:s,apply:r}}),c=this.recompileInput(t),u=o.build(c,[s,n,function t(e){return e?a.local(e,t):a.applyNext()},r]);this.tree&&(u={templates:u.templates.concat(this.tree.templates),oninit:this.tree.oninit.concat(u.oninit)}),this.tree=u;var l=this.groupEntities(u.templates);l=this.transformEntities(l),this.entities=l,this.oninit=u.oninit},r.prototype.recompileInput=function(t){var e=r.prototype.locals;if("function"==typeof t&&t.length===e.length)return t;var n=t.toString();return n=n.replace(/^function[^{]+{|}$/g,""),n=new Function(e.join(", "),n)},r.prototype.groupEntities=function(e){for(var n={},r=0;r<e.length;r++){var s,i=e[r].clone(),c=null;s=void 0;for(var u=0;u<i.predicates.length;u++){var l=i.predicates[u];if(l instanceof a||l instanceof o){if("block"===l.key)c=l.value;else{if("elem"!==l.key)continue;s=l.value}i.predicates.splice(u,1),u--}}if(null===c){for(var h="block(…) subpredicate is not found.\n    See template with subpredicates:\n     * ",u=0;u<i.predicates.length;u++){var l=i.predicates[u];0!==u&&(h+="\n     * "),h+="_mode"===l.key?l.value+"()":Array.isArray(l.key)?l.key[0].replace("mods","mod").replace("elemMods","elemMod")+"('"+l.key[1]+"', '"+l.value+"')":l.value&&l.key?l.key+"('"+l.value+"')":"match(…)"}throw h+="\n    And template body: \n    ("+("function"==typeof i.body?i.body:JSON.stringify(i.body))+")","undefined"==typeof BEMXJSTError&&(BEMXJSTError=t("./error").BEMXJSTError),new BEMXJSTError(h)}var d=this.classBuilder.build(c,s);n[d]||(n[d]=[]),n[d].push(i)}return n},r.prototype.transformEntities=function(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++){var s=n[r],i=this.classBuilder.split(s),a=i[0],o=i[1];"*"===o&&e.push(a),t[s]=new this.Entity(this,a,o,t[s])}if(t.hasOwnProperty("*")){for(var c=t["*"],r=0;r<n.length;r++){var s=n[r];"*"!==s&&t[s].prepend(c)}this.defaultEnt.prepend(c),this.defaultElemEnt.prepend(c)}for(var r=0;r<e.length;r++){for(var a=e[r],u=this.classBuilder.build(a,"*"),c=t[u],r=0;r<n.length;r++){var s=n[r];if(s!==u){var l=t[s];l.block===a&&void 0!==l.elem&&t[s].prepend(c)}}this.defaultElemEnt.prepend(c)}for(var r=0;r<n.length;r++){var s=n[r];t[s].setDefaults(),this.defaultEnt.setDefaults(),this.defaultElemEnt.setDefaults()}return t},r.prototype._run=function(t){return void 0===t||""===t||null===t?this.runEmpty():Array.isArray(t)?this.runMany(t):"string"!=typeof t.html||t.tag||"undefined"!=typeof t.block||"undefined"!=typeof t.elem||"undefined"!=typeof t.cls||"undefined"!=typeof t.attrs?l.isSimple(t)?this.runSimple(t):this.runOne(t):this.runUnescaped(t)},r.prototype.run=function(t){var e=this.match,n=this.context;this.match=null,this.context=new this.contextConstructor(this),this.canFlush=null!==this.context._flush,this.depth=0;var r=this._run(t);return this.canFlush&&(r=this.context._flush(r)),this.match=e,this.context=n,r},r.prototype.runEmpty=function(){return this.context._listLength--,""},r.prototype.runUnescaped=function(t){return this.context._listLength--,""+t.html},r.prototype.runSimple=function(t){return this.context._listLength--,!t&&0!==t||t===!0?"":"string"==typeof t&&this.context.escapeContent?l.xmlEscape(t):t},r.prototype.runOne=function(t){var e=this.context,n=e.ctx,r=e.block,s=e._currBlock,i=e.elem,a=e.mods,o=e.elemMods;t.block||t.elem?e._currBlock="":e._currBlock=e.block,e.ctx=t,t.block?(e.block=t.block,t.mods?e.mods=t.mods:t.block===r&&t.elem||(e.mods={})):t.elem?s&&(e.block=s):e.block="",e.elem=t.elem,t.elemMods?e.elemMods=t.elemMods:e.elemMods={};var c=e.block||"",u=e.elem;c||u?e.position++:e._listLength--,this.depth++;var l=!1,h=this.entities[this.classBuilder.build(c,u)];h?this.canFlush&&!h.canFlush&&(l=!0,this.canFlush=!1):(h=this.defaultEnt,void 0!==u&&(h=this.defaultElemEnt),h.init(c,u));var d=this.options.production===!0?this.tryRun(e,h):h.run(e);return e.ctx=n,e.block=r,e.elem=i,e.mods=a,e.elemMods=o,e._currBlock=s,this.depth--,l&&(this.canFlush=!0),d},r.prototype.tryRun=function(t,e){try{return e.run(t)}catch(e){return console.error("BEMXJST ERROR: cannot render "+["block "+t.block,"elem "+t.elem,"mods "+JSON.stringify(t.mods),"elemMods "+JSON.stringify(t.elemMods)].join(", "),e),""}},r.prototype.renderContent=function(t,e){var n=this.context,r=n.position,s=n._listLength,i=n._notNewList;n._notNewList=!1,e&&(n.position=0,n._listLength=1);var a=this._run(t);return n.position=r,n._listLength=s,n._notNewList=i,a},r.prototype.local=function(t,e){for(var n=Object.keys(t),r=[],s=0;s<n.length;s++){for(var i=n[s],a=i.split("."),o=this.context,c=0;c<a.length-1;c++)o=o[a[c]];r.push({parts:a,value:o[a[c]]}),o[a[c]]=t[i]}for(var u=e.call(this.context),s=0;s<r.length;s++){for(var a=r[s].parts,o=this.context,c=0;c<a.length-1;c++)o=o[a[c]];o[a[c]]=r[s].value}return u},r.prototype.applyNext=function(){return this.match.exec(this.context)},r.prototype.applyMode=function(t,e){var n=this.match.entity.rest[t];if(!n)return this.context.ctx[t];if(!e)return n.exec(this.context);var r=this,s=function(){return n.exec(r.context)};return this.local(e,s)},r.prototype.exportApply=function(t){var e=this;t.apply=function(t){return e.run(t)},t.compile=function(t){return e.compile(t)},t.BEMContext=e.contextConstructor;for(var n=0;n<e.oninit.length;n++){var r=e.oninit[n];r(t,{BEMContext:t.BEMContext})}}},{"./class-builder":3,"./context":4,"./error":6,"./tree":9,"./utils":10,inherits:11}],8:[function(t,e,n){function r(t,e){this.template=t,this.keys=e.key,this.value=e.value}function s(t,e){this.template=t,this.body=e.body}function i(t){this.template=t,this.wrap=null}function a(t){this.template=t,this.wrap=null}function o(t,e){this.template=t,this.key=e.key,this.value=e.value}function c(t,e){this.mode=t,this.predicates=new Array(e.predicates.length),this.body=e.body;for(var n=[],c=0,u=0;c<this.predicates.length;c++,u++){var l=e.predicates[c];l instanceof h?this.predicates[u]=new r(this,l):l instanceof m?(u--,n.push(new a(this))):l instanceof d?this.predicates[c]=new o(this,l):l instanceof f?this.predicates[u]=new s(this,l):l instanceof p?(u--,n.push(new i(this))):u--}for(var c=0;c<n.length;c++,u++)this.predicates[u]=n[c];this.predicates.length!==u&&(this.predicates.length=u)}function u(t,e){this.entity=t,this.modeName=e,this.bemxjst=this.entity.bemxjst,this.templates=[],this.mask=[0],this.maskSize=0,this.maskOffset=0,this.count=0,this.depth=-1,this.thrownError=null}var l=t("./tree"),h=l.PropertyMatch,d=l.AddMatch,p=l.WrapMatch,m=l.ExtendMatch,f=l.CustomMatch;r.prototype.exec=function(t){for(var e=t,n=0;n<this.keys.length-1;n++)if(e=e[this.keys[n]],!e)return!1;return e=e[this.keys[n]],this.value===!0?void 0!==e&&""!==e&&e!==!1&&null!==e:String(e)===this.value},s.prototype.exec=function(t){return this.body.call(t,t,t.ctx)},i.prototype.exec=function(t){var e=this.wrap!==t.ctx;return this.wrap=t.ctx,e},a.prototype.exec=function(t){var e=this.ext!==t.ctx;return this.ext=t.ctx,e},o.prototype.exec=function(t){return t[this.key]===this.value},n.MatchTemplate=c,n.Match=u,u.prototype.prepend=function(t){for(this.templates=t.templates.concat(this.templates),this.count+=t.count;Math.ceil(this.count/31)>this.mask.length;)this.mask.push(0);this.maskSize=this.mask.length},u.prototype.push=function(t){this.templates.push(new c(this,t)),this.count++,Math.ceil(this.count/31)>this.mask.length&&this.mask.push(0),this.maskSize=this.mask.length},u.prototype.tryCatch=function(t,e){try{return t.call(e,e,e.ctx)}catch(t){this.thrownError=t}},u.prototype.exec=function(t){for(var e,n=this.checkDepth(),r=this.maskOffset,s=this.mask[r],i=1,a=0;a<this.count;a++){if(0===(s&i)){e=this.templates[a];for(var o=0;o<e.predicates.length;o++){var c=e.predicates[o];if(!c.exec(t))break}if(o===e.predicates.length)break}1073741824===i?(r++,s=this.mask[r],i=1):i<<=1}if(a===this.count)return t.ctx[this.modeName];var u=s,l=this.bemxjst.match;this.mask[r]|=i,this.bemxjst.match=this,this.thrownError=null;var h;h="function"==typeof e.body?this.tryCatch(e.body,t):e.body,this.mask[r]=u,this.bemxjst.match=l,this.restoreDepth(n);var d=this.thrownError;if(null!==d)throw this.thrownError=null,d;return h},u.prototype.checkDepth=function(){if(this.depth===-1)return this.depth=this.bemxjst.depth,-1;if(this.bemxjst.depth===this.depth)return this.depth;var t=this.depth;for(this.depth=this.bemxjst.depth,this.maskOffset+=this.maskSize;this.mask.length<this.maskOffset+this.maskSize;)this.mask.push(0);return t},u.prototype.restoreDepth=function(t){t!==-1&&t!==this.depth&&(this.maskOffset-=this.maskSize),this.depth=t}},{"./tree":9}],9:[function(t,e,n){function r(t,e){this.predicates=t,this.body=e}function s(){}function i(t,e){this.conditions=[],this.children=[];for(var n=e.length-1;n>=0;n--){var r=e[n];r instanceof s?this.conditions.push(r):r===t.boundBody?this.children[n]=t.queue.pop():this.children[n]=r}}function a(t){s.call(this),this.refs=t}function o(t){s.call(this),this.refs=t}function c(t){s.call(this),this.refs=t}function u(t,e){s.call(this),this.mode=t,this.refs=e}function l(t){s.call(this),this.options=t}function h(t,e){s.call(this),this.key=t,this.value=e}function d(t){s.call(this),this.body=t}function p(t){this.options=t,this.refs=this.options.refs,this.boundBody=this.body.bind(this);for(var e=this.methods("body"),n=0;n<e.length;n++){var r=e[n];this.boundBody[p.methods[n]]=r}this.queue=[],this.templates=[],this.initializers=[]}function m(t,e,n){var r=t[n],s=t.boundBody;return"body"!==e?"replace"===n||"extend"===n||"wrap"===n?function(){return r.apply(t,arguments)}:function(){return r.apply(t,arguments),s}:function(){var e=r.apply(t,arguments),i=t.queue.pop(),a=t.queue[t.queue.length-1];return a.conditions=a.conditions.concat(i.conditions),a.children=a.children.concat(i.children),"replace"===n||"extend"===n||"wrap"===n?e:s}}var f=t("minimalistic-assert"),x=t("inherits");n.Template=r,r.prototype.wrap=function(){for(var t=this.body,e=0;e<this.predicates.length;e++){var n=this.predicates[e];t=n.wrapBody(t)}this.body=t},r.prototype.clone=function(){return new r(this.predicates.slice(),this.body)},n.MatchBase=s,s.prototype.wrapBody=function(t){return t},x(a,s),n.WrapMatch=a,a.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},x(o,s),n.ReplaceMatch=o,o.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},x(c,s),n.ExtendMatch=c,c.prototype.wrapBody=function(t){var e=this.refs.applyCtx,n=this.refs.local;return"function"!=typeof t?function(){for(var r={},s=Object.keys(t),i=0;i<s.length;i++)r[s[i]]=t[s[i]];return n(r)(function(){return e(this.ctx)})}:function(){for(var r={},s=t.call(this,this,this.ctx),i=Object.keys(s),a=0;a<i.length;a++)r[i[a]]=s[i[a]];return n(r)(function(){return e(this.ctx)})}},x(u,s),n.AddMatch=u,u.prototype.wrapBody=function(t){return this[this.mode+"WrapBody"](t)},u.prototype.appendContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,r=e.apply;return"function"!=typeof t?function(){return[r("content"),t]}:function(){return[r("content"),n(t.call(this,this,this.ctx))]}},u.prototype.prependContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,r=e.apply;return"function"!=typeof t?function(){return[t,r("content")]}:function(){return[n(t.call(this,this,this.ctx)),r("content")]}},x(l,s),n.CompilerOptions=l,x(h,s),n.PropertyMatch=h,x(d,s),n.CustomMatch=d,n.Tree=p,p.methods=["match","wrap","block","elem","mode","mod","elemMod","def","tag","attrs","cls","js","bem","mix","content","replace","extend","oninit","xjstOptions","appendContent","prependContent"],p.prototype.build=function(t,e){var n=this.methods("global").concat(e);return n[0]=this.match.bind(this),t.apply({},n),{templates:this.templates.slice().reverse(),oninit:this.initializers}},p.prototype.methods=function(t){for(var e=new Array(p.methods.length),n=0;n<e.length;n++){var r=p.methods[n];e[n]=m(this,t,r)}return e},p.prototype.flush=function(t,e){var n;n=e.conditions?t.concat(e.conditions):e.conditions;for(var s=0;s<e.children.length;s++){var a=e.children[s];if(a instanceof i)this.flush(n,e.children[s]);else{var o=new r(t,a);o.wrap(),this.templates.push(o)}}},p.prototype.body=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new i(this,t);return this.queue[this.queue.length-1].children.push(n),1===this.queue.length&&this.flush([],this.queue.shift()),this.boundBody},p.prototype.match=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++){var n=arguments[e];"function"==typeof n&&(n=new d(n)),f(n instanceof s,"Wrong .match() argument"),t[e]=n}return this.queue.push(new i(this,t)),this.boundBody},p.prototype.applyMode=function(t,e){if(t.length)throw new Error("Predicate should not have arguments but "+JSON.stringify(t)+" passed");return this.mode(e)},p.prototype.xjstOptions=function(t){return this.queue.push(new i(this,[new l(t)])),this.boundBody},p.prototype.block=function(t){return this.match(new h("block",t))},p.prototype.elem=function(t){return this.match(new h("elem",t))},p.prototype.mode=function(t){return this.match(new h("_mode",t))},p.prototype.mod=function(t,e){return this.match(new h(["mods",t],void 0===e||String(e)))},p.prototype.elemMod=function(t,e){return this.match(new h(["elemMods",t],void 0===e||String(e)))},p.prototype.def=function(){return this.applyMode(arguments,"default")},["tag","attrs","cls","js","bem","mix","content"].forEach(function(t){p.prototype[t]=function(){return this.applyMode(arguments,t)}}),["appendContent","prependContent"].forEach(function(t){p.prototype[t]=function(){return this.content.apply(this,arguments).match(new u(t,this.refs))}}),p.prototype.wrap=function(){return this.def.apply(this,arguments).match(new a(this.refs))},p.prototype.replace=function(){return this.def.apply(this,arguments).match(new o(this.refs))},p.prototype.extend=function(){return this.def.apply(this,arguments).match(new c(this.refs))},p.prototype.oninit=function(t){this.initializers.push(t)}},{inherits:11,"minimalistic-assert":12}],10:[function(t,e,n){function r(){return x+ ++p}var s="&amp;",i="&lt;",a="&gt;",o="&quot;",c="&#39;",u=/[&<>]/;n.xmlEscape=function(t){var e=""+t,n=u.exec(e);if(!n)return e;var r,o="",c=0,l=0;for(c=n.index;c<e.length;c++){switch(e.charCodeAt(c)){case 38:r=s;break;case 60:r=i;break;case 62:r=a;break;default:continue}l!==c&&(o+=e.substring(l,c)),l=c+1,o+=r}return l!==c?o+e.substring(l,c):o};var l=/["&]/;n.attrEscape=function(t){var e=""+t,n=l.exec(e);if(!n)return e;var r,i="",a=0,c=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r=o;break;case 38:r=s;break;default:continue}c!==a&&(i+=e.substring(c,a)),c=a+1,i+=r}return c!==a?i+e.substring(c,a):i};var h=/['&]/;n.jsAttrEscape=function(t){var e=""+t,n=h.exec(e);if(!n)return e;var r,i="",a=0,o=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 38:r=s;break;case 39:r=c;break;default:continue}o!==a&&(i+=e.substring(o,a)),o=a+1,i+=r}return o!==a?i+e.substring(o,a):i},n.extend=function(t,e){if(!t||!e)return t||e;var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r};var d={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};n.isShortTag=function(t){return d.hasOwnProperty(t)},n.isSimple=function t(e){return!e||e===!0||(!(e.block||e.elem||e.tag||e.cls||e.attrs||!e.hasOwnProperty("html")||!t(e.html))||("string"==typeof e||"number"==typeof e))},n.isObj=function(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&!Array.isArray(t)&&null!==t};var p=0,m=+new Date,f="__"+m,x="uniq"+m;n.getUniq=r,n.identify=function(t,e){if(!t)return r();if(e||t[f])return t[f];var n=r();return t[f]=n,n},n.fnToString=function(t){if(!t)return"";if("function"==typeof t){var e=/^function\s*[^{]+{|}$/g,n=/^(_|\(\w|[^=>]+\))\s=>\s{|}$/g;t=t.toString(),t=t.replace(0===t.indexOf("function")?e:n,"")}return t};var y=/^[:\w.-]+$/;n.isUnquotedAttr=function(t){return t&&y.exec(t)}},{}],11:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],12:[function(t,e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=r,r.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}]},{},[2])(2)}),e.exports||r.BEMHTML}({},{}),i=new s({escapeContent:!0});return i.compile(function(t,n,r,s,i,a,o,c,u,l,h,d,p,m,f,x,y,g,b,v,k,_,w,M,E){g(function(t){var e=t.BEMContext.prototype,n=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);n._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},n.makePublic=function(t,r){return"object"===("undefined"==typeof t?"undefined":_typeof(t))?void(n._public=e.extend(n._public,t)):("undefined"==typeof r&&(r=!0),void(n._public[t]=r))},n.isPublic=function(t){return Boolean(n._public[t])},n.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,r=["ua","by","kz"].indexOf(t)!==-1?"yandex.ru":e;n.tld=t,n["content-region"]=t,n["click-host"]="//clck."+r,n["passport-host"]="https://passport."+r,n["pass-host"]="https://pass."+e,n["social-host"]="https://social."+e,n["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},n)},restore:function(){var t;for(t in n)delete n[t];for(t in this._backup)n[t]=this._backup[t]}}}),r("i-global")(u()(""),c()(function(){var t=this.ctx.params||{},e=this["i-global"];this._iGlobalBackup.exists()?this.ctx.reset!==!1&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld);for(var n in t)e[n]=t[n];return""})),g(function(t){t["i-global"].makePublic("pageContext"),t["i-global"].makePublic("basePath"),t["i-global"].makePublic("avatarsMds"),t["i-global"].makePublic("safeHtmlContent"),t["i-global"].makePublic("safeHtmlOptions"),t["i-global"].makePublic("staticPath"),t["i-global"].makePublic("secretkey"),t["i-global"].makePublic("visitId"),t["i-global"].makePublic("yandexLoginCookie"),t["i-global"].makePublic("isRtl"),t["i-global"].makePublic("needReset"),t["i-global"].makePublic("metrikaId")}),r("i-ua")(p()(!1),u()("script"),l()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),f()(function(){var t=[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");return[{html:t}]})),r("i-ua").content()(function(){var t=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("");return[].concat(M(),{html:t})}),r("i-bem").elem("i18n").def()(function(){if(!this.ctx)return"";var t=this.ctx,e=t.keyset,n=t.key,r=t.params||{};return e||n?(t.content&&(r.content=this.reapply(t.content)),BEM.I18N(e,n,r)):""}),g(function(){!function(t,e){if(!e.I18N){t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){}}}(this,"undefined"==typeof BEM?{}:BEM)}),r("b-statcounter").tag()("i"),r("b-statcounter").elem("metrika").match(function(){return this.elem})(u()("img"),l()(function(){return{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}),p()(!1),c()(t(function(){return!this.ctx.counter})(function(){return""}),t(function(){return void 0===this.ctx._noindex})(function(){return M({_noindex:this.ctx.js&&("noindex"===this.ctx.js.ut||0===this.ctx.js.ut)})}))),r("b-statcounter").elem("metrika").elemMod("type","js")(u()("i"),l()(function(){return{}}),h()("i-bem"),p()(!0),d()(function(){return{id:Number(this.ctx.counter)}}),f()(function(){return{tag:"noscript",content:{tag:"img",attrs:{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}}})),r("title").mod("size","xxl").tag()("h1"),r("title").mod("size","xl").tag()("h2"),r("title").mod("size","l").tag()("h3"),r("title").mod("size","m").tag()("h4"),r("title").mod("size","s").tag()("h5"),r("button")(c()(function(){this.mods;return M()}),u()("button"),t(function(){return this.ctx.url}).tag()("a"),d()(!0),l()(t(function(){return!0})(function(){var t=this.ctx,e={};return e.tabindex=t.tabindex,e}),t(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,n=M(),r={
href:t.url,target:t.target},s=void 0!==Object(e).rel,i=s?String(e.rel):"",a="_blank"===r.target;return a&&(r.rel="noopener",i&&i.indexOf("noopener")===-1&&(e.rel=i+" noopener")),this.extend(n,r)}),t(function(){return!this.ctx.url})(function(){var t=this.ctx,e=M(),n={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,n)})),f()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),r("button").mod("disabled","yes").attrs()(function(){var t=this.ctx,e={};return t.url?e["aria-disabled"]="true":e.disabled=!0,this.extend(M(),e)}),g(function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})}),g(function(t){function e(t){return"object"===("undefined"==typeof t?"undefined":_typeof(t))&&"[object Object]"===s.call(t)}function n(t,r,s){var i,a;t=Object(t),r=Object(r);for(i in r)a=s&&s(t[i],r[i],i),void 0!==a?t[i]=a:e(t[i])&&e(r[i])?t[i]=n(t[i],r[i],s):t[i]=r[i];return t}function r(t,e){return n(t,e,function(t,e,n){if("mix"===n)return[].concat(t,e)})}var s=Object.prototype.toString;t.BEMContext.prototype.util.merge=n,t.BEMContext.prototype.util.mergeBemjson=r}),r("link")(c()(function(){var t=(this.mods,this.ctx.url);return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),this._url=this.isSimple(t)?t:this.reapply(t),M()}),u()(function(){return void 0!==this._url?"a":"span"}),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,r=n?String(e.rel):"";return r&&r.indexOf("noopener")===-1&&(e.rel=r+" noopener"),this.extend(M(),{rel:"noopener"})}),l()(function(){var t=this.ctx,e=this._url,n=void 0!==e,r=Boolean(this.mods.disabled),s=r?n&&-1:t.tabindex;return this.extend(M(),{id:t.id,name:t.name,title:t.title,target:t.target,tabindex:s,href:e,role:n?void 0:"button","aria-disabled":r?"true":void 0})}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx,e=Boolean(t.text),n=[t.icon,t.iconLeft,t.iconRight].filter(Boolean),r=n.length>0,s=e||n.length>1,i=function(t){return function(e){return"string"==typeof e?{html:t(e)}:e}}(this.xmlEscape);return[t.icon&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:s?"left":""}}},t.icon),t.iconLeft&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:s?"left":""}}},t.iconLeft),e&&(this.isSimple(t.text)?r?{elem:"inner",content:i(t.text)}:i(t.text):t.text.block?this.util.mergeBemjson({mix:{block:"link",elem:"inner"}},t.text):this.extend({block:"link",elem:"inner"},t.text)),t.iconRight&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:s?"right":""}}},t.iconRight)]}),s("inner").tag()("span")),r("link")(c()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return(e||n)&&(this.mods["has-metrika"]="yes"),M()})),r("link").mod("has-metrika","yes")(d()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return this.extend(M(),{metrikaParams:e,metrikaGoal:n})})),r("copyright")(i("wrapLink")(function(){var t=this.ctx;return{block:"i-bem",elem:"i18n",keyset:"copyright",key:"link",content:{block:"copyright",elem:"link",mix:t.elemLinkMix,url:void 0===t.url?this["i-services"].serviceUrl("www"):t.url}}}),f()(function(){return["© ",{elem:"dates",start:this.ctx.start},"  ",this.ctx.content||E("wrapLink")]})),r("copyright").elem("link")(u()(!1),t(function(){return this.ctx.url})(u()("a"),l()(function(){return{href:this.ctx.url}})),f()(function(){return this.ctx.content||BEM.I18N("copyright","yandex")})),r("copyright").elem("dates")(u()("span"),f()(function(){var t=this.ctx.start,e=(new Date).getFullYear();return[t&&t!==e&&t+"–",e]})),g(function(t){var e=t["i-services"]=t.BEMContext.prototype["i-services"]={},n=t["i-global"];e.serviceName=function(t){return BEM.I18N("i-services",t||n.id)},e.serviceUrl=function(t,r){var s=n;return t||(t=s.id),r||(r=s["content-region"]),e._data[t](r)}}),r("i-services").def()(s("name")(function(){return w(this["i-services"].serviceName(this.ctx.id))}),s("url")(function(){return w(this["i-services"].serviceUrl(this.ctx.id,this.ctx.region))})),g(function(t){t["i-services"]._data={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";case"tr":return"https://yandex.com.tr/adv";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//yandex.ua/all";case"by":return"//yandex.by/all";case"kz":return"//yandex.kz/all";case"com":return"//yandex.com/all";case"tr":return"//yandex.com.tr/all";default:return"//yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appmetrica:function(t){switch(t){case"ua":return"https://appmetrica.yandex.ua";case"by":return"https://appmetrica.yandex.by";case"kz":return"https://appmetrica.yandex.kz";case"com":return"https://appmetrica.yandex.com";case"tr":return"https://appmetrica.yandex.com.tr";default:return"https://appmetrica.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru"},audience:function(t){switch(t){case"ua":return"https://audience.yandex.ua";case"by":return"https://audience.yandex.by";case"kz":return"https://audience.yandex.kz";case"com":return"https://audience.yandex.com";case"tr":return"https://audience.yandex.com.tr";default:return"https://audience.yandex.ru"}},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(){return"https://auto.ru"},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},clickhouse:function(){return"https://clickhouse.yandex/"},collection:function(){return"https://collection.yandex.ru"},commander:function(t){switch(t){case"ua":return"https://yandex.ru/promo/commander/new?source=tableau_direct";case"by":return"https://yandex.ru/promo/commander/new?source=tableau_direct";case"kz":return"https://yandex.ru/promo/commander/new?source=tableau_direct";case"com":return"https://yandex.ru/promo/commander/new?source=tableau_direct";case"tr":return"https://yandex.ru/promo/commander/new?source=tableau_direct";default:return"https://yandex.ru/promo/commander/new?source=tableau_direct"}},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},delivery:function(){return"https://delivery.yandex.ru"},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";case"tr":return"https://direct.yandex.com.tr";default:return"https://direct.yandex.ru"}},"direct-api":function(t){switch(t){case"ua":return"https://tech.yandex.ru/direct/?source=tableau_direct";case"by":return"https://tech.yandex.ru/direct/?source=tableau_direct";case"kz":return"https://tech.yandex.ru/direct/?source=tableau_direct";case"com":return"https://tech.yandex.com/direct/?source=tableau_direct";case"tr":return"https://tech.yandex.com/direct/?source=tableau_direct";default:return"https://tech.yandex.ru/direct/?source=tableau_direct"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";case"az":return"https://disk.yandex.az";case"il":return"https://disk.yandex.co.il";case"am":return"https://disk.yandex.com.am";case"ge":return"https://disk.yandex.com.ge";case"ee":return"https://disk.yandex.ee";case"fr":return"https://disk.yandex.fr";case"kg":return"https://disk.yandex.kg";case"lt":return"https://disk.yandex.lt";case"lv":return"https://disk.yandex.lv";case"md":return"https://disk.yandex.md";case"tj":return"https://disk.yandex.tj";case"tm":return"https://disk.yandex.tm";case"uz":return"https://disk.yandex.uz";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";case"az":return"https://yandex.az/images/";case"il":return"https://yandex.co.il/images/";case"am":return"https://yandex.com.am/images/";case"ge":return"https://yandex.com.ge/images/";case"ee":return"https://yandex.ee/images/";case"fr":return"https://yandex.fr/images/";case"kg":return"https://yandex.kg/images/";case"lt":return"https://yandex.lt/images/";case"lv":return"https://yandex.lv/images/";case"md":return"https://yandex.md/images/";case"tj":return"https://yandex.tj/images/";case"tm":return"https://yandex.tm/images/";case"uz":return"https://yandex.uz/images/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";case"az":return"https://mail.yandex.az";case"il":return"https://mail.yandex.co.il";case"am":return"https://mail.yandex.com.am";case"ge":return"https://mail.yandex.com.ge";case"ee":return"https://mail.yandex.ee";case"fr":return"https://mail.yandex.fr";case"kg":return"https://mail.yandex.kg";case"lt":return"https://mail.yandex.lt";case"lv":return"https://mail.yandex.lv";case"md":return"https://mail.yandex.md";case"tj":return"https://mail.yandex.tj";case"tm":return"https://mail.yandex.tm";case"uz":return"https://mail.yandex.uz";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://yandex.ua/maps/";case"com":return"https://yandex.com/maps/";case"tr":return"https://yandex.com.tr/harita/";case"az":return"https://yandex.az/maps/";case"il":return"https://yandex.co.il/maps/";case"am":return"https://yandex.com.am/maps/";case"ge":return"https://yandex.com.ge/maps/";case"ee":return"https://yandex.ee/maps/";case"fr":return"https://yandex.fr/maps/";case"kg":return"https://yandex.kg/maps/";case"lt":return"https://yandex.lt/maps/";case"lv":return"https://yandex.lv/maps/";case"md":return"https://yandex.md/maps/";case"tj":return"https://yandex.tj/maps/";case"tm":return"https://yandex.tm/maps/";case"uz":return"https://yandex.uz/maps/";default:return"https://yandex.ru/maps/"}},"maps-com":function(){return"https://yandex.com/maps/"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";default:return"https://market.yandex.ru"}},"market.advertising":function(t){switch(t){case"com":return"https://yandex.com/adv/products/classified/market";default:return"https://yandex.ru/adv/products/classified/market"}},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";case"az":return"https://metrika.yandex.az";case"il":return"https://metrika.yandex.co.il";case"am":return"https://metrika.yandex.com.am";case"ge":return"https://metrika.yandex.com.ge";case"ee":return"https://metrika.yandex.ee";case"fr":return"https://metrika.yandex.fr";case"kg":return"https://metrika.yandex.kg";case"lt":return"https://metrika.yandex.lt";case"lv":return"https://metrika.yandex.lv";case"md":return"https://metrika.yandex.md";case"tj":return"https://metrika.yandex.tj";case"tm":return"https://metrika.yandex.tm";case"uz":return"https://metrika.yandex.uz";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";case"az":return"https://news.yandex.az";case"il":return"https://news.yandex.co.il";case"am":return"https://news.yandex.com.am";case"ge":return"https://news.yandex.com.ge";case"ee":return"https://news.yandex.ee";case"fr":return"https://news.yandex.fr";case"kg":return"https://news.yandex.kg";case"lt":return"https://news.yandex.lt";case"lv":return"https://news.yandex.lv";case"md":return"https://news.yandex.md";case"tj":return"https://news.yandex.tj";case"tm":return"https://news.yandex.tm";case"uz":return"https://news.yandex.uz";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},"partners-en":function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},pass:function(t){switch(t){case"ua":return"https://pass.yandex.ua";case"by":return"https://pass.yandex.by";case"kz":return"https://pass.yandex.kz";case"com":return"https://pass.yandex.com";case"tr":return"https://pass.yandex.com.tr";case"az":return"https://pass.yandex.az";case"il":return"https://pass.yandex.co.il";case"am":return"https://pass.yandex.com.am";case"ge":return"https://pass.yandex.com.ge";case"ee":return"https://pass.yandex.ee";case"fr":return"https://pass.yandex.fr";case"kg":return"https://pass.yandex.kg";case"lt":return"https://pass.yandex.lt";case"lv":return"https://pass.yandex.lv";case"md":return"https://pass.yandex.md";case"tj":return"https://pass.yandex.tj";case"tm":return"https://pass.yandex.tm";case"uz":return"https://pass.yandex.uz";default:return"https://pass.yandex.ru"}},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";case"az":return"https://passport.yandex.az";case"il":return"https://passport.yandex.co.il";case"am":return"https://passport.yandex.com.am";case"ge":return"https://passport.yandex.com.ge";case"ee":return"https://passport.yandex.ee";case"fr":return"https://passport.yandex.fr";case"kg":return"https://passport.yandex.kg";case"lt":return"https://passport.yandex.lt";case"lv":return"https://passport.yandex.lv";case"md":return"https://passport.yandex.md";case"tj":return"https://passport.yandex.tj";case"tm":return"https://passport.yandex.tm";case"uz":return"https://passport.yandex.uz";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},plus:function(){return"https://plus.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},radar:function(t){switch(t){case"ru":return"https://radar.metrika.yandex?lang=ru";case"com":return"https://radar.metrika.yandex?lang=en";case"tr":return"https://radar.metrika.yandex?lang=tr";default:return"https://radar.metrika.yandex"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://yandex.ru/sprav";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"com":return"https://yandex.com/sprav";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},support:function(t){switch(t){case"ua":return"https://yandex.ua/support/";case"by":return"https://yandex.by/support/";case"kz":return"https://yandex.kz/support/";case"com":return"https://yandex.com/support/";case"tr":return"https://yandex.com.tr/support/";default:return"https://yandex.ru/support/"}},surveys:function(){return"https://surveys.yandex.ru"},taxi:function(){return"https://taxi.yandex.ru"},telephony:function(){return"https://telephony.yandex.ru/"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toloka:function(t){switch(t){case"com":return"https://toloka.yandex.com";case"tr":return"https://toloka.yandex.com.tr";default:return"https://toloka.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";case"az":return"https://translate.yandex.az";case"il":return"https://translate.yandex.co.il";case"am":return"https://translate.yandex.com.am";case"ge":return"https://translate.yandex.com.ge";case"ee":return"https://translate.yandex.ee";case"fr":return"https://translate.yandex.fr";case"kg":return"https://translate.yandex.kg";case"lt":return"https://translate.yandex.lt";case"lv":return"https://translate.yandex.lv";case"md":return"https://translate.yandex.md";case"tj":return"https://translate.yandex.tj";case"tm":return"https://translate.yandex.tm";case"uz":return"https://translate.yandex.uz";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://yandex.ua/tune";case"by":return"https://yandex.by/tune";case"kz":return"https://yandex.kz/tune";case"com":return"https://yandex.com/tune";case"tr":return"https://yandex.com.tr/tune";case"uz":return"https://yandex.uz/tune";default:return"https://yandex.ru/tune"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"https://yandex.ua/video/";case"by":return"https://yandex.by/video/";case"kz":return"https://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"https://yandex.com.tr/video/";case"az":return"https://yandex.az/video/";case"il":return"https://yandex.co.il/video/";case"am":return"https://yandex.com.am/video/";case"ge":return"https://yandex.com.ge/video/";case"ee":return"https://yandex.ee/video/";case"fr":return"https://yandex.fr/video/";case"kg":return"https://yandex.kg/video/";case"lt":return"https://yandex.lt/video/";case"lv":return"https://yandex.lv/video/";case"md":return"https://yandex.md/video/";case"tj":return"https://yandex.tj/video/";case"tm":return"https://yandex.tm/video/";case"uz":return"https://yandex.uz/video/";default:return"https://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";case"az":return"https://pogoda.yandex.az";case"il":return"https://pogoda.yandex.co.il";case"am":return"https://pogoda.yandex.com.am";case"ge":return"https://pogoda.yandex.com.ge";case"ee":return"https://pogoda.yandex.ee";case"fr":return"https://pogoda.yandex.fr";case"kg":return"https://pogoda.yandex.kg";
case"lt":return"https://pogoda.yandex.lt";case"lv":return"https://pogoda.yandex.lv";case"md":return"https://pogoda.yandex.md";case"tj":return"https://pogoda.yandex.tj";case"tm":return"https://pogoda.yandex.tm";case"uz":return"https://pogoda.yandex.uz";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},"webmaster-api":function(t){switch(t){case"com":return"https://tech.yandex.com/webmaster/";case"tr":return"https://tech.yandex.com/webmaster/";default:return"https://tech.yandex.ru/webmaster/"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"},znatoki:function(){return"https://yandex.ru/znatoki/"}}}),r("footer")(c()(function(){return M({_inFooter:!0})}),m()(function(){return[{block:"clearfix"}]}),l()(function(){return{role:"contentinfo"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this["i-services"],e=this.ctx.region,n=[],r=[];n.push({elem:"link",url:e?t.serviceUrl("mobile",e):BEM.I18N("footer","apps-url"),content:BEM.I18N("footer","apps")});var s=this.ctx.tld.indexOf("com")===-1;return s&&r.push({elem:"link",url:e?t.serviceUrl("advertising",e)+"/kupislova.xml?advertising":BEM.I18N("footer","advert-url"),content:BEM.I18N("footer","advert")}),s&&this.ctx.statUrl&&r.push({elem:"link",url:this.ctx.statUrl,content:BEM.I18N("footer","stat")}),r.push({elem:"link",url:e?t.serviceUrl("legal",e)+"/termsofuse":BEM.I18N("footer","termsofuse-url"),content:BEM.I18N("footer","termsofuse")}),r.push({elem:"link",url:e?t.serviceUrl("company",e):BEM.I18N("footer","about-url"),content:BEM.I18N("footer","about")}),r.push({block:"copyright",elemLinkMix:{block:this.block,elem:"link"},start:this.ctx.start}),[{elem:"column",content:n},{elem:"column",elemMods:{side:"right"},content:r}]})),r("footer")(c()(function(){var t=this.ctx.isIframe;return this.mods.iframe=t,M()}),i("teaser-text")(function(){return BEM.I18N("footer","created-with",{url:this.ctx.urls.adminUrl})}),t(function(t){var e=t.ctx;return"biz"===e.siteType}).mode("teaser-text")(function(){return BEM.I18N("footer","created-by-user-with",{url:this.ctx.urls.adminUrl})}),f()(function(){var t=this.ctx,e=t.isIframe,n=t.urls,r=t.siteType;return[{elem:"promo",mix:{block:this.block,elem:"section"},content:{html:E("teaser-text")}},!e&&{elem:"links",content:[{elem:"link",url:n.feedbackUrl,content:BEM.I18N("footer","feedback")},"biz"===r&&{elem:"link",url:n.confidentialUrl,content:BEM.I18N("footer","confidential")},{block:"copyright",content:{block:"link",mods:{theme:"normal"},mix:[{block:this.block,elem:"link"}],url:"//www.yandex.ru",content:BEM.I18N("footer","copyright")}}]}]})),r("footer").elem("link").def()(function(){var t=this.extend(this.ctx,{block:"link",mods:{theme:"normal"},mix:[{block:this.block,elem:this.elem,elemMods:this.elemMods}]});return this.ctx.mix&&(t.mix=t.mix.concat(this.ctx.mix)),delete t.elem,w(t)}),r("header2")(l()(function(){return{role:"banner"}}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx;return[{elem:"main",content:[t.logo,{elem:"left",content:t.left},t.right&&{elem:"right",content:t.right}]},t.under&&{elem:"under",content:t.under}]}),s("logo").content()(function(){return this.ctx.serviceLogo?[].concat(M(),{block:"icon",mix:[{block:"header2",elem:"logo"},{block:"logo",mods:{service:"yes"}}]}):M()})),r("user")(c()(function(){var t=this.ctx.js||{},e=t.uid||this.ctx.uid||this["i-global"].uid,n=this.ctx.login,r=n||this["i-global"].login||(this["i-global"].displayName||{}).name;return M({_uid:e,_login:n,_hasDisplayName:r})}),u()("a"),d()(function(){return this.extend({uid:this._uid,login:this._login||this["i-global"].login},M())}),l()(function(){var t=this["i-global"],e=this._login||t.login,n=e&&/^uid-/.test(e),r={href:n?t["social-host"]:t["passport-host"]+"/passport?mode=passport"},s=this.ctx.counter||(this.ctx.counters||{}).user;return s&&(r.onmousedown=s),r}),f()(function(){return this._hasDisplayName?[this.ctx.content]:{elem:"enter"}})),r("user")(d()(function(){return this.extend(M()||{},{avatarHost:this["i-global"].avatarsMds})})),g(function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"…":t}}),r("user").elem("name")(u()("span"),c()(function(){var t=this.ctx,e=this["i-global"],n=t.content||t.login||this._login||(e.displayName||{}).name,r=!1;return n||(/^uid-/.test(e.login)?(n="",r=!0):n=e.login),M({_maxLength:void 0!==t.maxLength?t.maxLength:16,_maxLengthRelative:void 0!==t.maxLengthRelative?t.maxLengthRelative:3,_userName:n,_isUglyUserName:t.isUglyUserName||r})}),i("pre-content")(function(){var t=this.ctx;return[{elem:"first-letter",tag:"span",content:{html:this.xmlEscape(t.charAt(0))}},{html:this.xmlEscape(t.slice(1))}]}),f()(function(){return E("pre-content",{ctx:this.cleverSubstring(this._userName,this._maxLength,this._maxLengthRelative)})}),d()(function(){return{maxLength:this._maxLength,maxLengthRelative:this._maxLengthRelative,isUglyUserName:this._isUglyUserName}})),r("user2")(c()(function(){var t=this.ctx,e="undefined"!=typeof window?window.location:{},n=this["i-services"],r=t.accountAttributes||{},s={uid:!!t.hasOwnProperty("uid")&&t.uid,yu:t.yu,plus:r.has_plus||r.plus_available&&!1,retpath:t.hasOwnProperty("retpath")?t.retpath:e.href||"",name:t.hasOwnProperty("name")?t.name:t.uid||!1,maxLength:t.maxLength,subname:t.subname,avatarId:t.hasOwnProperty("avatarId")?t.avatarId:"",passportHost:t.hasOwnProperty("passportHost")?t.passportHost:n.serviceUrl("passport"),userAccount:t.userAccount||{},avatarHost:t.avatarHost,passportLinkParams:t.passportLinkParams||""};s.retpathEncoded=encodeURIComponent(s.retpath);var i=[s.passportHost,"/passport?mode=embeddedauth","&action=logout","&yu="+s.yu,"&uid="+s.uid,"&retpath="+s.retpathEncoded].join("");return M({_user2Mods:this.mods,_params:s,_exitUrl:i,_unreadCount:this.ctx.unreadCount||0})}),d()(function(){var t=this.ctx.js||{};return this.extend({_uid:this._params.uid,_plus:this._params.plus,_retpath:this._params.retpath,_yu:this._params.yu,_passportHost:this._params.passportHost,_avatarHost:this._params.avatarHost,accountsUrl:this["i-services"].serviceUrl("pass")+"/accounts"},t)}),t(function(){return void 0===this.ctx.content}).content()(function(){return E("default-content")}),f()(function(){return this.ctx.uid?M():{block:"user2",elem:"enter"}}),i("default-content")(function(){var t=this.ctx.accounts||[],e=this.mods.provider||"",n=this.ctx.accountAttributes||{},r=this.ctx.yaplus===!1?this.ctx.hat:void 0,s=r&&(r.mods||{})["fetch-data"],i=n.has_plus||n.plus_available&&!1;this.ctx.mods&&this.ctx.mods["has-logout"]&&(t=t.map(function(t){return t.mods=t.mods||{},t.mods["has-logout"]="yes",t}));var a={action:"plus",elemMods:{hidden:r&&!s&&"yes"},plus:this.ctx.yaplus,plusLinkParams:this.ctx.plusLinkParams},o=this.ctx.actionsMenu?[].concat(this.ctx.actionsMenu).filter(function(t){return"plus"===t.action?(a=this.extend(a,t),!1):t},this).filter(Boolean):[{action:"mail"}];return[{elem:"current-account",plus:i,name:this._params.name,maxLength:this._params.maxLength,unreadCount:this._unreadCount,avatarId:this._params.avatarId,avatarHost:this._params.avatarHost,provider:e},{elem:"a11y-exit"},this.extend({elem:"popup",content:{block:"user2",elem:"menu",hat:r,plus:i,addAccount:this.ctx.addAccount,actionsMenu:void 0===this.ctx.yaplus?o:o.concat(a),multiAuthMenu:this.ctx.multiAuthMenu||[{action:"passport"},{action:"exit"}],settingsUrl:this.ctx.settingsUrl,helpUrl:this.ctx.helpUrl,accounts:t,avatarHost:this._params.avatarHost,provider:e}},this.ctx.popup)]})),r("i-ua").content()(function(){return[].concat(M(),{html:';document.documentElement.className+=" i-ua_orient_"+(window.innerWidth>window.innerHeight?"landscape":"portrait");'})}),r("user2").elem("enter").replace()(function(){var t=BEM.I18N("user2","enter"),e=this._params,n=e.passportHost,r=e.retpathEncoded,s=n+"/auth?retpath="+r;return""!==e.passportLinkParams&&(s+="&"+e.passportLinkParams),[{block:"button2",mods:{size:"m",theme:"pseudo",type:"link"},mix:{block:"user2",elem:"enter"},url:s,tabindex:"-1",iconLeft:{mix:{block:"user2",elem:"enter-icon"}},title:t,text:t}]}),r("button2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="classic"),this.mods.progress&&(this.mods.disabled="yes"),void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),M()}),t(function(){return void 0===this.ctx.tag}).tag()("button"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),l()(function(){var t=this.ctx,e=Boolean(this.mods.disabled);return{type:"button",autocomplete:"off",id:t.id,title:t.title,name:t.name,value:t.val,tabindex:e?void 0:t.tabindex,disabled:e,"aria-disabled":e&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx;return[t.icon&&{elem:"icon",icon:t.icon},t.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:t.iconLeft},t.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:t.iconRight},void 0!==t.text&&(this.isSimple(t.text)?{elem:"text",content:{html:this.xmlEscape(t.text)}}:this.extend(t.text,{elem:"text"}))].filter(Boolean)})),r("button2")(c()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return(e||n)&&(this.mods["has-metrika"]="yes"),M()})),r("button2").elem("text").tag()("span"),r("button2").mod("has-metrika","yes")(d()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return this.extend(M(),{metrikaParams:e,metrikaGoal:n})})),r("button2").elem("icon").def()(function(){var t=this.extend({},this.ctx.icon);return t.block="icon",t.mix=[{block:"button2",elem:"icon",elemMods:this.elemMods}].concat(t.mix),t.mods=this.extend({size:this.mods.size},t.mods),w(t)}),r("icon")(u()("span"),l()(function(){var t=this.ctx,e=void 0!==t.url,n=void 0!==Object(t.attrs).style,r=(n?t.attrs.style:"")+(e?";background-image:url('"+t.url+"');":"");return n&&(t.attrs.style=r),{style:r||void 0}})),r("button2").mod("type","link")(c()(function(){var t=this.ctx.url;return this._url=this.isSimple(t)?t:this.reapply(t),M()}),u()("a"),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,r=n?String(e.rel):"";return r&&r.indexOf("noopener")===-1&&(e.rel=r+" noopener"),this.extend(M(),{rel:"noopener"})}),l()(function(){var t=void 0!==this._url,e=Boolean(this.mods.disabled),n=e?t&&-1:this.ctx.tabindex;return this.extend(M(),{target:this.ctx.target,href:this.mods.disabled?void 0:this.ctx.url,autocomplete:void 0,type:void 0,disabled:void 0,tabindex:n})}),d()(function(){return this.extend(M(),{_url:this.mods.disabled?this.ctx.url:void 0})})),r("user2").elem("current-account").replace()(function(){var t=this.ctx.avatarId!==!1&&"yes",e=this._params.passportHost;return""!==this._params.passportLinkParams&&(e+="?"+this._params.passportLinkParams),this.util.mergeBemjson({block:"user-account",mix:{block:"user2",elem:"current-account",elemMods:this.elemMods},mods:{"has-ticker":t,"has-accent-letter":"yes",provider:this.ctx.provider},name:this.ctx.name,maxLength:this.ctx.maxLength,subname:this.ctx.subname,url:e,ticker:t?{count:this.ctx.unreadCount}:void 0,pic:this.ctx.avatarId===!1?void 0:{avatarId:this.ctx.avatarId,plus:this.ctx.plus},avatarHost:this.ctx.avatarHost},this._params.userAccount)}),r("user-account")(d()(!0),l()({tabindex:"0"}),t(function(){return this.ctx.url})(u()("a"),l()(function(){return this.extend(M(),{href:this.ctx.url})})),t(function(){return this.ctx.name!==!1&&void 0===this.ctx.content}).content()(function(){var t=this.ctx.maxLength||16,e=this.ctx.name&&this.ctx.name.length>t?this.ctx.name.substring(0,t-1)+"…":this.ctx.name;return[this.isSimple(e)?{elem:"name",text:e||"",subname:this.ctx.subname}:this.extend(e,{elem:"name",subname:this.ctx.subname})]}),t(function(){return void 0!==this.ctx.pic})(f()(function(){return[{elem:"pic",pic:this.extend({plus:this.ctx.plus},this.ctx.pic),avatarHost:this.ctx.avatarHost,provider:this.ctx.mods&&this.ctx.mods.provider},M()]}))),r("link").mod("pseudo","yes")(f().match(function(){return!this.mods.inner})(function(){return{elem:"inner",content:M()}})),r("user-account").elem("pic").match(function(){return this.ctx.pic}).replace()(function(){return this.util.mergeBemjson({block:"user-pic",mods:{provider:this.ctx.provider},host:this.ctx.avatarHost,mix:{block:"user-account",elem:"pic",elemMods:this.elemMods}},this.ctx.pic)}),r("user-pic")(c()(function(){return this.ctx.plus&&(this.mods["has-plus"]="yes"),M()}),i("avatar-url")(function(){var t=this.ctx.host||"https://avatars.mds.yandex.net",e=this.ctx.avatarId||"0/0-0";return{lodpiUrl:t+"/get-yapic/"+e+"/islands-middle",hidpiUrl:t+"/get-yapic/"+e+"/islands-retina-middle"}}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=E("avatar-url");return[{elem:"image",elemMods:{lodpi:"yes"},attrs:{style:"background-image: url("+t.lodpiUrl+");"}},{elem:"image",elemMods:{hidpi:"yes"},attrs:{style:"background-image: url("+t.hidpiUrl+");"}}]})),r("i-ua").content()(function(){var t=[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("");return[].concat(M(),{html:t})}),r("user-account").elem("name")(u()("span"),t(function(){return void 0===this.ctx.content&&this.ctx.text}).content()(function(){return{html:this.xmlEscape(this.ctx.text)}})),r("user-account").match(function(){return void 0!==this.ctx.ticker}).def()(function(){return this.mods["has-ticker"]="yes",M()}),r("user-account").mod("has-ticker","yes").match(function(){return!this.ctx.content}).content()(function(){return[M(),{elem:"ticker",ticker:this.ctx.ticker}]}),r("user-account").elem("ticker").replace()(function(){return this.util.mergeBemjson({block:"ticker",mix:{block:"user-account",elem:"ticker",elemMods:this.elemMods}},this.ctx.ticker)}),r("ticker")(c()(function(){return M({_count:this.ctx.count||0,_maxCount:this.ctx.maxCount||99,_url:this.ctx.url})}),u()("span"),l()(function(){return{role:"alert","aria-live":"assertive","aria-atomic":"true"}}),t(function(){return!this._count}).mix()(function(){return[{mods:{state:"empty"}}]}),d()(function(){return{count:this._count,maxCount:this._maxCount}}),f()(function(){return{elem:"count",url:this.ctx.url,content:this.ctx.count}})),r("ticker").elem("count")(u()("span"),t(function(){return!this.ctx.url}).mix()(function(){return[{elem:"plain"}]}),t(function(){return this.ctx.url})(u()("a"),l()(function(){return{href:this.ctx.url}})),f()(function(){return[{elem:"text"},{elem:"value",count:this.ctx.content}]})),r("ticker").elem("text")(u()("span"),m()(function(){return[{block:"a11y-hidden"}]}),f()(function(){return BEM.I18N("ticker__text","notifications")})),r("ticker").elem("value")(u()("span"),i("format-value")(function(){return this._count>this._maxCount?this._maxCount:this._count}),l()(function(){return{title:this._count}}),f()(function(){return E("format-value")})),r("user-account").mod("has-accent-letter","yes").elem("name")(t(function(){return this.ctx.text&&!this.ctx.content}).content()(function(){var t=String(this.ctx.text);return[{elem:"accent-letter",tag:"span",content:{html:this.xmlEscape(t.charAt(0))}},{html:this.xmlEscape(t.slice(1))}]})),r("user2").elem("a11y-exit").replace()(function(){var t=this._exitUrl;return""!==this._params.passportLinkParams&&(t+="&"+this._params.passportLinkParams),{block:"link",mods:{theme:"pseudo"},mix:[{block:"user2",elem:"a11y-exit"},{block:"a11y-hidden"}],attrs:{accesskey:"x"},tabindex:"-1",url:t,content:BEM.I18N("user2","exit")}}),r("user2").elem("popup").replace()(function(){var t=this.extend({directions:["bottom-right"],mainOffset:-46,secondaryOffset:-2},this.ctx);return t.mods={target:"anchor",theme:"normal",autoclosable:"yes",hiding:"yes"},t.block="popup2",t.mix=[{block:"user2",elem:"popup",elemMods:t.elemMods}].concat(t.mix||[]),delete t.elem,t}),r("popup2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="classic"),M()}),d()(function(){var t=this.ctx;return{mainOffset:t.mainOffset,secondaryOffset:t.secondaryOffset,viewportOffset:t.viewportOffset,tailOffset:t.tailOffset,tailSize:t.tailSize,directions:t.directions,zIndexGroupLevel:t.zIndexGroupLevel}}),t(function(){return this.ctx.hasTail}).content()(function(){var t=this.ctx,e=[].concat(t.content);return[].concat({elem:"tail"},e)})),r("popup2").mod("target","anchor").def()(function(){return void 0===this.mods.hiding&&(this.mods.hiding="yes"),M()}),r("popup2").mod("target","anchor").mod("visible","yes").def()(function(){return this.mods.outside="yes",M()}),r("popup2").mod("hiding","yes").def()(function(){return"anchor"!==this.mods.target&&(this.mods.target="anchor"),M()}),r("user2").elem("menu")(t(function(){return void 0!==this.ctx.hat}).mode("hat")(function(){var t=this.ctx.hat;return!t.banner&&(t.banner={}),t.banner.closeButtonMix={block:"user2",elem:"hat-closer"},{block:"user2",elem:"menu-hat",content:t}}),x()(function(){var t=function(e){return[].concat.apply([],e.map(function(e){return e.items?t(e.items):(e.block="user2",e.elem="menu-item",e.action&&(e.elemMods=this.extend(e.elemMods,{action:e.action})),e)},this))}.bind(this),e=this.ctx.actionsMenu||[],n=this.ctx.multiAuthMenu||[],r=[].concat(e,n);return{block:"menu",mix:[{block:"user2",elem:"menu",elemMods:this.ctx.elemMods}].concat(this.ctx.mix||[]),mods:this.extend({type:"navigation"},this.ctx.elemMods),attrs:this.ctx.attrs,content:this.ctx.content||[E("hat"),{block:"user2",elem:"menu-header",content:{block:"user-account",mods:{provider:this.ctx.provider},mix:{block:"user2",elem:"account"},plus:this.ctx.plus,name:this._params.name,maxLength:this._params.maxLength,subname:this._params.subname,pic:{avatarId:this._params.avatarId},avatarHost:this._params.avatarHost}},{block:"menu",elem:"group",content:t(r)},{block:"user2",elem:"multi-auth",addAccount:this.ctx.addAccount,accounts:this.ctx.accounts,avatarHost:this.ctx.avatarHost,maxLength:this.ctx.maxLength,provider:this.ctx.provider},{block:"user2",elem:"menu-footer",settingsUrl:this.ctx.settingsUrl,helpUrl:this.ctx.helpUrl}]}})),r("user2").elem("menu-footer").content()(function(){return[{block:"button2",mods:{theme:"clear",size:"s",type:"link"},mix:{block:this.block,elem:"footer-link"},url:this.ctx.settingsUrl||this["i-services"].serviceUrl("tune"),text:BEM.I18N("user2","settings")},{block:"button2",mods:{theme:"clear",size:"s",type:"link"},mix:{block:this.block,elem:"footer-link"},url:this.ctx.helpUrl||this["i-services"].serviceUrl("support"),text:BEM.I18N("user2","help")}]}),r("user2").elem("multi-auth").content()(function(){return this.ctx.content||[{elem:"accounts",addAccount:this.ctx.addAccount,accounts:this.ctx.accounts,avatarHost:this.ctx.avatarHost,maxLength:this.ctx.maxLength,provider:this.ctx.provider},this.ctx.menu&&this.ctx.menu.length?{block:"menu",elem:"group",content:this.ctx.menu}:""]}),r("menu")(i("tabindex")(void 0),c()(function(){var t=this.ctx,e=void 0!==t.tabindex?t.tabindex:E("tabindex");return t.val=void 0!==t.val?[].concat(t.val):[],void 0===this.mods.view&&(this.mods.view="classic"),["radio","radiocheck"].indexOf(this.mods.type)!==-1&&(t.val=t.val.slice(0,1)),M({_tabindex:e})}),d()(function(){return{_tabindex:null!==this._tabindex&&this.mods.disabled?this._tabindex:void 0}}),l()(function(){return{tabindex:this.mods.disabled?void 0:null===this._tabindex?void 0:this._tabindex,"aria-disabled":!!this.mods.disabled&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){return(this.ctx.items||[]).map(function t(e){if(e!==!1&&null!==e&&void 0!==e)return this.isSimple(e)&&(e={text:e}),e.items?(e.elem="group",e.content||(e.content=e.items.map(t,this))):(e.elem="item",["check","radio","radiocheck"].indexOf(this.mods.type)!==-1?e.elemMods=this.extend({type:"option",checked:this.ctx.val.indexOf(e.val)!==-1?"yes":void 0},e.elemMods):"navigation"===this.mods.type&&(e.elemMods=this.extend({type:"link"},e.elemMods))),e},this)})),r("menu").elem("item")(t(function(){return this._inMenuTypeNavigation}).wrap()(function(){return{elem:"list-item",content:this.ctx}}),d()(function(){return{val:this.ctx.val}}),l()(function(){return{title:this.ctx.title,"aria-disabled":!!this.elemMods.disabled&&"true","aria-selected":!!this.elemMods.checked&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){return[this.ctx.icon&&{elem:"icon",icon:this.ctx.icon},void 0!==this.ctx.text&&{elem:"text",content:{html:this.isSimple(this.ctx.text)?this.xmlEscape(this.ctx.text):this.reapply(this.ctx.text)}}].filter(Boolean)})),r("menu").elem("list-item").tag()("li"),r("menu").elem("group")(t(function(){return this._inMenuTypeNavigation}).tag()("ul"),l()(function(){return{role:"group"}}),t(function(){return this.ctx.title})(l()(function(){return this.extend(M(),{"aria-labelledby":this.generateId()})}),f()(function(){var t=this.ctx.title;return[{elem:"title",attrs:{id:this.generateId(),"aria-hidden":"true"},content:{html:this.isSimple(t)?this.xmlEscape(t):this.reapply(t)}},M()]}))),r("menu").mod("type","navigation")(u()("ul"),c()(function(){return M({_inMenuTypeNavigation:!0})})),r("menu").elem("item").elemMod("type","link")(u()("a"),l()(function(){return this.extend(M(),{role:"link",href:this.ctx.url,target:this.ctx.target})})),r("spin2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="default"),void 0===this.mods.tone&&(this.mods.tone="default"),M()})),r("user2").elem("menu-item").replace()(function(){var t=this.extend(this.ctx,{block:"menu",elem:"item"});return t.mix=[{block:"user2",elem:"menu-item",elemMods:{action:this.elemMods.action}}].concat(this.ctx.mix||[]),delete this.elemMods.action,t.elemMods=this.extend({type:"link"},this.elemMods),t.attrs=this.extend(t.attrs||{},{tabindex:0}),t.content=this.ctx.content,t}),r("menu").elem("text").tag()("span"),r("user2").elem("menu-item").elemMod("action","disk").def()(function(){return this.ctx.text=BEM.I18N("user2","upload_files"),this.ctx.url=this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",M()}),r("user2").elem("menu-item").elemMod("action","edit-accounts").def()(function(){return this.ctx.text=BEM.I18N("user2","edit-accounts"),this.ctx.url=this._params.passportHost+"/auth?mode=edit&retpath="+this._params.retpathEncoded,""!==this._params.passportLinkParams&&(this.ctx.url+="&"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","exit").def()(function(){return this.ctx.text=BEM.I18N("user2","exit"),this.ctx.url=this._exitUrl,""!==this._params.passportLinkParams&&(this.ctx.url+="&"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","mail-compose").def()(function(){return this.ctx.text=BEM.I18N("user2","mail_compose"),this.ctx.url=this["i-services"].serviceUrl("mail")+"/compose",M()}),r("user2").elem("menu-counter")(c()(function(){return M({params:{maxCount:this.ctx.maxCount||9999}})}),u()("span"),l()({role:"alert"}),t(function(){return 0===this.ctx.count}).mix()([{elemMods:{state:"empty"}}]),f()(function(){return this.ctx.count>this.params.maxCount?this.params.maxCount:this.ctx.count})),r("user2").elem("menu-item").elemMod("action","mail").def()(function(){return this.ctx.url=this["i-services"].serviceUrl("mail"),this.ctx.text=[this["i-services"].serviceName("mail"),{block:"user2",elem:"menu-counter",count:this._unreadCount}],M()}),r("user2").elem("menu-item").elemMod("action","passport").def()(function(){return this.ctx.text=BEM.I18N("user2","passport"),this.ctx.url=this._params.passportHost,""!==this._params.passportLinkParams&&(this.ctx.url+="?"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","settings").def()(function(){return this.ctx.text=BEM.I18N("user2","settings"),this.ctx.url=this["i-services"].serviceUrl("tune"),M()}),r("user2").elem("menu-item").elemMod("action","plus").def()(function(){var t=this.ctx.plus,e="string"==typeof this.ctx.plusLinkParams?this.ctx.plusLinkParams:"";return this.ctx.url=this["i-services"].serviceUrl("plus")+e,t&&(this.ctx.url=this["i-services"].serviceUrl("passport")+"/profile/services",""!==this._params.passportLinkParams&&(this.ctx.url+="?"+this._params.passportLinkParams)),this.ctx.content=[{block:"menu",elem:"text",content:BEM.I18N("user2",t?"ya_plus_on":"ya_plus")}],M()}),r("user2").elem("plus-badge")(u()("span")),r("user-account").mod("has-logout","yes").content()(function(){return[{block:"icon",mods:{glyph:"x-sign",size:"xs"},mix:{block:"user-account",elem:"logout"}},M()]}),r("icon").match(function(){return void 0!==this.mods.glyph}).def()(function(){return this.mods["has-glyph"]="yes",M()}),r("icon").mod("glyph","x-sign").content()(function(){return{html:'<svg focusable="false" width="0" height="0" viewBox="0 0 20 20"><path d="M10,20 C4.5,20 0,15.5 0,10 C0,4.5 4.5,0 10,0 C15.5,0 20,4.5 20,10 C20,15.5 15.5,20 10,20 L10,20 L10,20 L10,20 Z M15,6.4 L13.6,5 L10,8.6 L6.4,5 L5,6.4 L8.6,10 L5,13.6 L6.4,15 L10,11.4 L13.6,15 L15,13.6 L11.4,10 L15,6.4 L15,6.4 L15,6.4 L15,6.4 Z"/></svg>'}}),r("user2").elem("accounts").match(function(){return void 0===this.ctx.content}).content()(function(){function t(t){return{block:"menu",elem:"item",content:this.extend({mods:{provider:this.ctx.provider},avatarHost:this.ctx.avatarHost,maxLength:this._params.maxLength},t)}}return[{elem:"accounts-container",content:[].concat(this.ctx.accounts).map(t,this)},{block:"user2",elem:"add-account",account:this.ctx.addAccount}]}),r("user2").elem("add-account").replace()(function(){var t=this._params.passportHost+"/auth?mode=add-user&retpath="+this._params.retpathEncoded;""!==this._params.passportLinkParams&&(t+="&"+this._params.passportLinkParams);var e=this.util.mergeBemjson({block:"user-account",name:BEM.I18N("user2","add-account"),url:t,mix:{block:"user2",elem:"add-account"}},this.ctx.account);return e.content=void 0!==e.content?e.content:[{elem:"pic"},{elem:"name",text:e.name}],{block:"menu",elem:"item",content:e}}),r("user2")(t(function(){return this.ctx.maxLength}).js()(function(){return this.extend(M(),{maxLength:this.ctx.maxLength})}),t(function(){return this._user2Mods["fetch-accounts"]}).elem("accounts").content()(function(){return[{block:"spin2",mods:{size:"xs"},mix:{block:"user2",elem:"accounts-spin"}},M()]})),r("user-account").match(function(){return void 0!==this.ctx.subname}).def()(function(){return this.mods["has-subname"]="yes",M()}),r("user-account").mod("has-subname","yes").elem("name").content()(function(){var t={fb:"Facebook",tw:"Twitter",mr:"Mail.ru",gg:"Google",ok:"Odnoklassniki",vk:"Vkontakte",dz:"Deezer",fs:"Foursquare",ig:"Instagram",lf:"Last.FM",lj:"LiveJournal",in:"LinkedIn",mt:"МТС-Россия",ms:"Microsoft",yh:"Yahoo",ya:"Yandex",vf:"Vodafone-Украина",tg:"Telegram"},e="object"===_typeof(this.ctx.subname)?t[this.ctx.subname.provider]:this.ctx.subname;return e&&e!==this.ctx.text?[M(),{elem:"subname",text:e}]:M()}),r("user-account").elem("subname")(u()("span"),f().match(function(){return void 0===this.ctx.content&&this.ctx.text})(function(){return{html:this.xmlEscape(this.ctx.text)}})),g(function(t){var e=void 0,n=void 0;t.BEMContext.prototype.safeContentHtml=function(t){var n=this["i-global"].safeHtmlContent;if(!n)return t;if(!e){var r=this["i-global"].safeHtmlOptions,s=this.require("xss"),i=s.FilterXSS;e=new i(r)}return e.process(t)},t.BEMContext.prototype.safeContentFormatted=function(t){var e=this;if(!n){var r=this["i-global"].safeHtmlContent;n=_extends({gfm:!0,tables:!0,breaks:!0},r&&{sanitize:!0,sanitizer:function(t){return e.safeContentHtml(t)}})}return this.require("marked")(t,n)}}),r("safe-content")(t(function(t){return t.ctx.formatted}).content()(function(){return{html:this.safeContentFormatted(this.ctx.content)}}),t(function(t){return!t.ctx.formatted}).replace()(function(){return{html:this.safeContentHtml(this.ctx.content)}})),r("b-page")(s("root")(p()(!1),u()("html"),l()(function(){return{lang:this["i-global"].lang||"ru"}}),h()("i-ua_js_no i-ua_css_standard")),i("js-params")(function(){var t=this["i-global"],e={},n={block:"i-global",js:e};return Object.keys(t).forEach(function(n){t.isPublic(n)&&(e[n]=t[n])}),n}),i("doctype")(function(){return this.ctx.doctype||"<!DOCTYPE html>"}),n()(function(){var t=this.ctx;return[{html:E("doctype")},{elem:"root",content:[{elem:"head",content:[t.csp&&this.extend(t.csp,{elem:"csp"}),t.title!==!1&&{tag:"meta",attrs:{charset:t.charset||"utf-8"}},t["x-ua-compatible"]!==!1&&E("xUACompatible"),void 0!==t.title&&{tag:"title",content:t.title},t.favicon&&{elem:"favicon",url:t.favicon},E("defaultMeta"),t.meta,{block:"i-ua",nonce:t.nonce},t.head]},t]}]}),u()("body"),s("head")(p()(!1),u()("head")),s("meta")(p()(!1),u()("meta"),l()(function(){return this.ctx.attrs})),s("favicon").replace()(function(){return{elem:"link",rel:"shortcut icon",url:this.ctx.url}}),f()(function(){return{elem:"body",content:this.ctx.content}}),s("body").tag()(""),m()(function(){return[].concat(M(),[{elem:"body"},E("js-params"),{block:"i-ua",js:!0}])})),r("b-page")(i("xUACompatible")(function(){return{tag:"meta",attrs:{"http-equiv":"X-UA-Compatible",content:this.ctx["x-ua-compatible"]||"IE=edge"}}})),r("b-page")(d()(!0),c()(function(){return M({_isPreview:this.ctx.isPreview})})),r("b-page").elem("js")(p()(!1),u()("script"),l()(function(){return{src:this.ctx.url,nonce:this.ctx.content?this.ctx.nonce||this["i-global"].nonce:null}})),r("b-page").elem("css")(c()(function(){return M()}),p()(!1),u()("style"),l()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),x().match(function(){return void 0!==this.ctx.ie})(t(function(){return this.ctx.ie===!0})(function(){var t=this.ctx.url;return{elem:"cc",condition:"IE 9",content:{elem:"css",url:t?/\.css$/.test(t)?t:t+".ie9.css":void 0,content:this.ctx.content}}}),t(function(){return this.ctx.ie===!1})(function(){return{elem:"cc",condition:"gt IE 9",others:!0,content:{elem:"css",url:this.ctx.url,content:this.ctx.content}}}),t(function(){return"string"==typeof this.ctx.ie})(function(){return{elem:"cc",condition:this.ctx.ie,others:this.ctx.ie.indexOf("!")>-1,content:{elem:"css",url:this.ctx.url,content:this.ctx.content}}})),t(function(){return this.ctx.url})(u()("link"),l()(function(){return{rel:"stylesheet",href:this.ctx.url}}))),r("b-page").elem("css")(t(function(){return this.ctx.ie===!0}).replace()(function(){var t=this.ctx.url;return[{
elem:"cc",condition:"IE 8",content:{elem:"css",url:t?/\.css$/.test(t)?t:t+".ie8.css":void 0,content:this.ctx.content}},{html:M()}]})),r("b-page").elem("cc")(u()(!1),f()(function(){var t=this.ctx.others,e=this.ctx.condition.indexOf("!")>-1;return[{html:["<!--[if "+this.ctx.condition+"]>",t?"<!":"",e||t?"-->":""].join("")},this.ctx.content,{html:[e||t?"<!--":"","<![endif]-->"].join("")}]})),r("b-page").elem("link")(p()(!1),u()("link"),l()(function(){return{rel:this.ctx.rel,type:this.ctx.type,href:this.ctx.url,sizes:this.ctx.sizes,title:this.ctx.title}})),r("b-page").elem("root")(t()(function(){return Boolean(this._isPreview)}).cls()("b-page__preview-html")),r("b-page").elem("icon-set")(x()(function(){var t=this.ctx.data,e=t.staticPath,n=t.faviconDir;return[{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-16.png",sizes:"16x16"},{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-32.png",sizes:"32x32"},{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-64.png",sizes:"64x64"},{tag:"link",attrs:{rel:"mask-icon",href:e+"/public/i/icons/favicon.svg",color:"#338EF5"}}]})),r("b-page").elem("favicon")(u()("link"),p()(!1),l()(function(){return{rel:"icon",href:this.ctx.url,sizes:this.ctx.sizes}})),r("survey")(u()("form"),l()({method:"POST",action:"",novalidate:"",enctype:"multipart/form-data"}),f()(function(){return[{tag:"input",attrs:{type:"hidden",name:"sk",value:this["i-global"].secretkey}},{tag:"input",attrs:{type:"hidden",name:"visitId",value:this["i-global"].visitId}},{elem:"section",content:[{block:"survey-validation",elem:"message",elemMods:{role:"main"},mix:[{block:"survey",elem:"line",elemMods:{type:"main-message"}}],content:BEM.I18N("survey","error-text")},this.ctx.content]},{elem:"submit-button",userTexts:this.ctx.userTexts}]})),r("survey").mod("preview","yes").tag()("div"),r("custom-styles")(f()(function(){return[this.ctx.stylesCss&&{block:"b-page",elem:"css",content:this.ctx.stylesCss,attrs:{id:"template-styles"}}]})),r("custom-styles")(f()(function(){return[].concat(_toConsumableArray(M()),[{block:"b-page",elem:"js",url:this.ctx.staticPath+"/public/less/less.min.js"}])})),r("survey").elem("control").tag()("td"),r("survey").elem("label").content()(function(){var t=this.ctx.content,e={tag:"label",attrs:{for:this.ctx.for},content:["string"==typeof t?{block:"safe-content",formatted:!0,content:t}:t]};return this.ctx.hint&&e.content.push({elem:"hint",content:this.ctx.hint}),e}),r("survey").elem("label").tag()("td"),r("survey").elem("required").tag()("td"),r("survey").elem("required-star")(u()("span"),f()("*")),r("survey").elem("group")(u()("fieldset"),f()(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData;return t.map(function(t){return{block:this.block,elem:"question",field:t,extraSurveyData:e}})})),r("survey").elem("line-inner")(u()("table"),f()(function(){return{tag:"tr",content:this.ctx.content}}),o("long","yes").content()(function(){var t=this.ctx.content[1],e=t.content,n=this.ctx.labelImage;return e?n?[{tag:"tr",content:[this.ctx.content[0],this.ctx.content[1]]},{tag:"tr",content:[{elem:"required"},{elem:"image",data:n}]},{tag:"tr",content:[{elem:"required"},this.ctx.content[2]]}]:[{tag:"tr",content:[this.ctx.content[0],this.ctx.content[1]]},{tag:"tr",content:[{elem:"required"},this.ctx.content[2]]}]:n?[{tag:"tr",content:[this.ctx.content[0],{elem:"image",data:n}]},{tag:"tr",content:this.ctx.content[2]}]:{tag:"tr",content:[this.ctx.content[0],this.ctx.content[2]]}})),r("survey").elem("submit-button").content()(function(){return[{block:"button",mods:{theme:"action",size:"m",role:"prev"},content:{block:"safe-content",content:this.ctx.userTexts.prevButton}},{block:"button",mods:{theme:"action",size:"m",role:"next"},content:{block:"safe-content",content:this.ctx.userTexts.nextButton}},{block:"button",mods:{theme:"action",size:"m",role:"submit"},attrs:{title:{block:"safe-content",content:this.ctx.userTexts.submitButton}},type:"button",content:{block:"safe-content",content:this.ctx.userTexts.submitButton}}]}),r("survey").elem("line").content()(function(){var t={elem:"line-inner",elemMods:{long:"yes"===this.elemMods.long||this.ctx.labelImage?"yes":"",image:this.ctx.labelImage?"yes":""},labelImage:this.ctx.labelImage,content:this.ctx.content};return t.content instanceof Array&&t.content.unshift({elem:"required",content:{elem:"required-star"}}),t}),r("survey").elem("hint")(u()("span"),f()(function(){var t=this.ctx.content;return t?"string"==typeof t?{block:"safe-content",formatted:!0,content:t}:t:null})),r("survey").elem("captcha")(d()(function(){return{captchaType:this.ctx.captchaType}}),f()(function(){var t=this.ctx.tags[0]||"",e=this.ctx.tags[1]||"",n="std"===this.ctx.captchaType?{type:"number"}:{};return[{tag:"input",attrs:t.attrs},{block:"input",js:{},mods:{size:"m"},content:[{elem:"control",controlAttrs:this.extend(e.attrs,n)}]},{elem:"captcha-img",src:t.attrs["data-captcha-image-url"]},{elem:"captcha-updater",content:BEM.I18N("survey","captcha-updater")}]})),r("survey").elem("captcha-updater").content()(function(){return{block:"link",mods:{theme:"pseudo",pseudo:"yes",inner:"yes"},content:[{block:"icon",mods:{type:"updater"},mix:[{block:"survey",elem:"captcha-updater-ico"}]},{elem:"inner",content:BEM.I18N("survey","captcha-updater")}]}}),r("survey").elem("captcha-img")(u()("img"),l()(function(){return{src:this.ctx.src}})),r("survey").elem("question")(m()(function(){var t=this.ctx.field,e=this.ctx.extraSurveyData||{},n=e.query,r=t.name,s=t.group_slug,i=t.is_hidden||"",a=t.is_required||"",o=t.value||[],c=n[r],u=E("getShowConditions"),l=E("getFieldFiltersForField",{_field:t}),h=E("getWidget"),d=[{block:"survey-question",mods:{name:r,required:a?"yes":"",hidden:i?"yes":"","hidden-by-default":i?"yes":"",widget:h},js:{showConditions:u?u:"",name:r,groupSlug:s,defaultFromQuery:c||"",savedValue:o,fieldFilters:l.length?l:"",isMultiple:t.is_allow_multiple_choice,extraSurveyData:e,isHidden:i}}];switch(h){case"tickets":d.push({block:"payment-question",js:!0})}return d}),f()(function(){var t=this.ctx.field,e=this.ctx.extraSurveyData||{},n=t.name,r=void 0,s={},i=e.language||"",a=e.regionId||"",o=e.questionGroups,c=E("getBuilders"),u=E("getWidget");switch(u){case"input":case"autocomplete-selection":s.language=i,s.regionId=a;break;case"questions-group":s.groupFields=o[t.name]}return c.hasOwnProperty(u)&&(r=c[u](t,n,s,e)),r}),i("getBuilders")(function(){var t=this.ctx.field,e=t.type||"";return E(e?"questionBEMJSONBuildersNew":"questionBEMJSONBuilders")}),i("getWidget")(function(){var t=void 0,e=this.ctx.field,n=e.type||"";if(n)t=e.widget||"",e.data_source&&e.data_source.items?"list"===t&&e.is_allow_multiple_choice===!0?t="checkbox-list":"list"===t&&e.is_allow_multiple_choice===!1?t="radio-list":"select"===t?t="select":"matrix"===t&&(t="scale"):t="autocomplete-selection";else if(t="GroupWidget"===e.widget?"questions-group":"PaymentWidget"===e.widget?"payment":e.other_data&&e.other_data.widget||"","DateInput"!==e.widget&&"DateRangeFieldInput"!==e.widget||(t="date-widget"),!t||"radio_or_checkbox_list"===t){var r=e.tags&&e.tags[0]||"",s=r.tag||"",i=r.attrs&&r.attrs.type||"";s&&(t="checkbox"===i||"radio"===i?i+"-list":s)}return t}),i("getShowConditions")(function(){var t=this.ctx.field,e=t.type||"";return e?t.show_conditions||"":t.other_data&&t.other_data.show_conditions||""}),i("inputPopupParams")(function(){return{directions:this["i-global"].isRtl?"bottom-right":"bottom-left"}}),i("inputPopupMix")(function(){return[{block:"popup",mods:{autosize:"yes"}}]}),i("selectPopupParams")(function(){var t=this["i-global"].isRtl?"right":"left";return{directions:[{to:"bottom",axis:t,offset:{top:8}},{to:"top",axis:t,offset:{bottom:8}}]}}),i("buildSelectBEMJSON")(function(){var t=this._tag,e=this._params||{},n=this._js,r=t.options||[],s=t.attrs||{},i=s.name||"",a=s.id||"",o=e.width,c=r[0]&&r[0].content;return{block:"select",mods:{size:"m",theme:"normal",width:o,suggest:e.suggest?"yes":"",disabled:!r.length,to:"bottom"},js:_extends({popupParams:E("selectPopupParams"),popupMods:{autosize:"yes"}},n),name:i,id:a,content:[{block:"button",mods:{theme:"normal"},content:c||" "},e.suggest?{block:"input",mods:{size:"m",clear:"no"},mix:{block:"select",elem:"suggest"},value:c,content:[{elem:"hint",content:BEM.I18N("survey","choose")},{elem:"control"}]}:"",{elem:"control",content:r.map(function(t){return{elem:"option",attrs:t.attrs||{},content:{block:"safe-content",content:t.content}}})}]}}),i("buildInputTextBEMJSON")(function(){var t=this._tag,e=this._hints||[],n=t.attrs||{},r=n.type||"",s="hidden"===r,i=/^id_answer_phone_/.test(n.id);return(i||"number"===r)&&(n.dir="ltr"),i?E("buildPhoneBEMJSON",{_tag:t}):"number"===r?E("buildNumberBEMJSON",{_tag:t}):{block:"input",js:{},mods:{theme:"normal",size:"m",hidden:s?"yes":void 0},mix:[],content:[{elem:"control",controlAttrs:n},e.length?{elem:"samples",content:e.map(function(t,n){return[{block:"link",mods:{theme:"pseudo",pseudo:"yes"},mix:[{block:"input",elem:"sample"}],content:t},n!==e.length-1?", ":""]})}:""]}}),i("buildTextareaBEMJSON")(function(){var t=this._tag,e=E("buildInputTextBEMJSON",{_tag:t});return e.mods.type="textarea",e.value=t.content,e}),i("buildNumberBEMJSON")(function(){var t=this._tag,e=t.attrs||{};return e.pattern="[0-9]*",{block:"textinput",js:{},mods:{type:"number",theme:"normal",size:"m","has-clear":"yes"},mix:[],controlAttrs:e}}),i("buildPhoneBEMJSON")(function(){var t=this._tag,e=t.attrs||{};return{block:"input",js:{},mods:{theme:"normal",size:"m"},mix:[],content:{elem:"control",controlAttrs:_extends({},e,{type:"tel"})}}}),i("buildCheckboxBEMJSON")(function(){var t=this._tag,e=this._label||t.label,n=this._hint,r=this._size||"m",s=this._mods;return{block:"checkbox",mods:_extends({theme:"normal",size:r},s),mix:[],checkboxAttrs:t.attrs,text:{elem:"label",content:[{block:"safe-content",formatted:!0,content:e},n?{block:"survey",elem:"hint",mix:[{block:"i-font",mods:{face:"textbook"}}],content:n}:""],attrs:{title:t.attrs&&t.attrs.title}}}}),i("questionBEMJSONBuildersNew")(function(){return{"checkbox-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.value||[],a=i.map(function(t){return t.id}),o=t.errors||"",c=[],u=[],l=s.some(function(t){return t.label_image});return c.push(s.map(function(t){var n={},r=t.text||"",s=t.id||"",i=[];n.label=r,n.attrs={value:s,name:e,title:l&&r||""},a.indexOf(s)!==-1&&(n.attrs.checked=!0);var o=E("buildCheckboxBEMJSON",{_tag:n,_size:l?"s":"m",_mods:{slug:t.slug}});return o.mix.push({block:"survey",elem:"control-control"}),o.mix.push({block:"survey",elem:"checkbox"}),l&&i.push({elem:"answer-image",data:t.label_image}),i.push(o),l?{tag:"label",elem:"checkbox-list",mix:{block:"survey",elem:"answer-image-container"},content:i}:{elem:"checkbox-list",content:i}})),c.push(E("buildErrorsBEMJSON",{_errors:o})),c.push(E("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),c.push(E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),l?u.push({block:"survey",elem:"checkbox-list-wrap",elemMods:{"answer-image":l?"yes":""},content:c}):u.push(c),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:u}]}},"radio-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.value||[],a=t.errors||"",o=[],c=[],u={},l=void 0,h=s.some(function(t){return t.label_image});return s.forEach(function(t){var e=t.text||"",n=[];i.forEach(function(t){l=t.id}),n.push({block:"radiobox",elem:"radio",elemMods:{slug:t.slug},content:{block:"safe-content",formatted:!0,content:e},controlAttrs:{value:t.id||""},attrs:{title:h&&e||""}}),t.slug&&(u[t.slug]=t.id),h?c.push({block:"survey",elem:"answer-image-container",tag:"label",content:[{block:"survey",elem:"answer-image",data:t.label_image},n]}):c.push(n)}),o.push({block:"radiobox",js:{slugMap:u},mods:{theme:"normal",size:h?"s":"m"},mix:[{block:"survey",elem:"radiobox",elemMods:{"answer-image":h?"yes":""}}],name:e,content:c,value:l}),o.push(E("buildErrorsBEMJSON",{_errors:a})),o.push(E("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),o.push(E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:o}]}},select:function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.value&&t.value[0]||"",a=t.suggest_choices,o=t.errors||"",c={attrs:{},options:[]},u={},l=void 0,h=t.is_disabled_init_item||!1;return c.attrs.name=e,s.forEach(function(t){var e={content:"",attrs:{}};e.content=t.text,e.attrs.value=t.id,i&&i.id===t.id&&(e.attrs.selected=!0),c.options.push(e),t.slug&&(u[t.slug]=t.id)}),h&&(l={content:"--",attrs:{selected:!0,value:""}},t.is_required&&(l.attrs.disabled=!0),c.options.unshift(l)),{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:n},{elem:"control",content:[E("buildSelectBEMJSON",{_tag:c,_params:{width:300,suggest:a},_js:{slugMap:u}}),{elem:"hint",content:r},E("buildErrorsBEMJSON",{_errors:o}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})]}]}},"autocomplete-selection":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.errors||"",i=t.is_allow_multiple_choice,a=t.value&&t.value[0]||{},o=t.__suggest_url?t.__suggest_url:"",c="empty-field";return{elem:"line",labelImage:t.label_image,content:[{elem:"label",for:e,content:n,hint:r},{elem:"control",content:function(){var t={block:"survey-question",elem:"data",mods:{},content:[]},n=E("buildInputTextBEMJSON",{_tag:{attrs:{type:"text",id:e,value:i?"":a.text}}});return n.mix=[].concat(n.mix,{block:"survey-question",elem:"control"}),o&&(n.mods.suggest="yes",n.js.doEmptyRequests=!1,n.js.dataprovider={url:o},n.js.popupParams=E("inputPopupParams"),n.js.popupMixs=E("inputPopupMix"),i&&(t.mods.multiple="yes")),[n,t,E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:c,_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})]}()}]}},scale:function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.errors||"",a=function(t){return s.filter(function(e){return e.type&&e.type===t})},o=function(t){return t.sort(function(t,e){var n=t.position,r=e.position;return n>r?1:-1})},c=o(a("column")),u=o(a("row")),l=t.value||"",h={};l&&l.forEach(function(t){var e=t.id.split("_")[0];h[e]=t.id});var d={block:"scale",content:u.map(function(t){var n=[];return c.forEach(function(e){var r=[t.id,e.id].join("_");n.push({elem:"radio",mix:[{block:"scale",elem:"cell"}],content:{block:"scale",elem:"cell-text",content:{block:"safe-content",formatted:!0,content:e.text}},controlAttrs:{value:r}})}),{elem:"row",mix:[{block:"scale-question",js:!0}],content:[{elem:"title",content:{block:"safe-content",formatted:!0,content:t.text}},{elem:"answer",mix:[{block:"scale-question",elem:"answer"}],attrs:{name:e,value:h[t.id],checked:Boolean(h[t.id])}},{block:"radiobox",mods:{theme:"normal",size:"s",id:t.id},name:[e,t.id].join("_question_"),mix:[{block:"scale-question",elem:"value"}],content:n,value:h[t.id]}]}})};return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:[d,E("buildErrorsBEMJSON",{_errors:i}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}}}}),i("questionBEMJSONBuilders")(function(){return{number:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){var i="empty-field",a=n.attrs.id||"";return{elem:"line",labelImage:t.label_image,mix:[],content:[{elem:"label",for:a,content:e},{elem:"control",content:[E("buildInputTextBEMJSON",{_tag:n}),{elem:"hint",content:r},E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:i,_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"incorrect-number",_validatorType:"incorrectNumber"})]}]}})},tickets:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){var i="empty-field",a=n.attrs.max&&parseInt(n.attrs.max,10)||1,o=n.attrs.min&&parseInt(n.attrs.min,10)||1,c=n.attrs.price&&parseInt(n.attrs.price,10)||0,u=n.attrs.name||"",l=n.attrs.id||"",h=n.attrs.currency&&n.attrs.currency.toLowerCase()||"rub",d={elem:"line",elemMods:{type:"price"},labelImage:t.label_image,content:[{elem:"label",content:BEM.I18N("survey","sum")},{elem:"control",mix:[{block:"payment-question",elem:"price"}],content:[{block:"price",mods:{currency:h},content:c},E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:i,_validatorType:"required"})]}]},p={};if(1===a)p=E("buildInputTextBEMJSON",{_tag:{attrs:{type:"hidden",name:u,id:l,value:o}}});else if(a<=5){for(var m=[],f=o;f<=a;f++)m.push({elem:"radio",controlAttrs:{value:f},content:f});p={elem:"line",mods:{"short-payment-control":"yes"},labelImage:t.label_image,mix:[],content:[{elem:"label",for:l,content:e,hint:r},{elem:"control",content:function(){var t=[{block:"radio-button",mods:{size:"m"},name:u,value:o,content:m}];return t}()}]}}else p={elem:"line",mix:[],labelImage:t.label_image,content:[{elem:"label",for:l,content:e,hint:r},{elem:"control",content:[E("buildInputTextBEMJSON",{_tag:n})]}]};return p.mix.push({block:"payment-question",elem:"control",js:{min:o,max:a,price:c}}),[p,d]})},agreement:function(t){var e=t.label||"",n=t.tags||[],r=t.errors||"";return n.map(function(t){return{elem:"line",elemMods:{type:"agreement"},content:[{elem:"control",content:[E("buildCheckboxBEMJSON",{_tag:t,_label:e}),E("buildErrorsBEMJSON",{_errors:r}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},checkbox:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){return{elem:"line",labelImage:t.label_image,elemMods:{type:"checkbox"},content:[{elem:"control",content:[E("buildCheckboxBEMJSON",{_tag:n,_label:e,_hint:r}),E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},"checkbox-list":function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"",i=[];return i.push(r.map(function(t){var e=E("buildCheckboxBEMJSON",{_tag:t});return e.mix.push({block:"survey",elem:"control-control"}),e.mix.push({block:"survey",elem:"checkbox"}),{elem:"checkbox-list",content:e}})),i.push(E("buildErrorsBEMJSON",{_errors:s})),i.push(E("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),i.push(E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:i}]}},"radio-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.tags||[],i=t.errors||"",a=[],o=void 0;return a.push({block:"radiobox",js:!0,mods:{theme:"normal",size:"m"},mix:[{block:"survey",elem:"radiobox"}],name:e,content:s.map(function(t){var e=t.label||"";return t.attrs.checked&&(o=t.attrs.value),{elem:"radio",content:e,controlAttrs:t.attrs||{}}}),value:o}),a.push(E("buildErrorsBEMJSON",{_errors:i})),a.push(E("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:a}]}},date:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[r.map(function(t){return E("buildSelectBEMJSON",{_tag:t})}),E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:"incorrect-date",_validatorType:"required"})]}]}},"date-widget":function(t){var e=t.label||"",n=t.help_text||"",r=t.errors||"",s=t.other_data&&t.other_data.allowed_range||"",i={},a=[],o=[];t.tags.forEach(function(t){var e=t.attrs;a.push(e.value),o.push(e.name)}),i.min=s.from||"",i.max=s.to||"";var c={block:"DateInput"===t.widget?"date-input":"date-range-input",name:o,value:a,js:{limits:i}};return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[c,E("buildErrorsBEMJSON",{_errors:r}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},statement:function(t){var e=t.label||"",n=t.help_text||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,mix:t.other_data.is_section_header?[{elem:"title",elemMods:{type:"h3"}}]:[],hint:n}]}},file:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"",i=t.other_data&&t.other_data.already_uploaded_filename||"",a=t.other_data&&t.other_data.max_file_size||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[{block:"attach",js:{alreadyUploaded:Boolean(i),maxFileSize:a},mods:{size:"m"},content:[{block:"button",mods:{theme:"normal",size:"m"},mix:[{block:"attach",elem:"button"}],name:r.length&&r[0].attrs.name,id:r.length&&r[0].attrs.id,content:{block:"i-bem",elem:"i18n",keyset:"attach",key:"button-text"}},{elem:"holder",content:{block:"i-bem",elem:"i18n",keyset:"attach",key:"no-file"}}]},i?{elem:"message",content:[{block:"safe-content",content:BEM.I18N("survey","attach-file-already-uploaded",{file:i})}]}:"",a?{elem:"message",content:[{block:"safe-content",content:BEM.I18N("survey","attach-file-max-file-size",{size:a})}]}:"",E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:"attach-file",_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"file-too-large",_validatorType:"fileTooLarge"})]}]}},multifile:function(t){var e=t.label||"",n=t.help_text||"",r=t.errors||"",s=t.other_data&&t.other_data.already_uploaded_files||"",i=t.other_data&&t.other_data.max_file_size||"",a=t.other_data&&t.other_data.max_files_count||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[{block:"file-upload",js:{files:s},maxFilesSize:i,maxFilesCount:a},E("buildErrorsBEMJSON",{_errors:r}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},captcha:function(t){var e=t.label||"",n=t.tags||[],r=t.errors||"",s=t.other_data||{},i=s.captcha_type;return{elem:"line",elemMods:{long:"yes"},content:[{elem:"label",content:e,for:n[1].attrs.id},{elem:"control",content:[{elem:"captcha",tags:n,captchaType:i},E("buildErrorsBEMJSON",{_errors:r}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},input:function(t,e,n,r){n=n||{};var s=t.label||"",i=t.help_text||"",a=t.tags||[],o=t.errors||"",c=n.language||"",u=n.regionId||"",l=t.hints,h=void 0,d=void 0,p=r.enableSamples;return l&&(Array.isArray(l.items)&&p?h=l.items.map(function(t){return t.text}):t.__suggest_url&&(d=t.__suggest_url)),a.map(function(e){var n="empty-field";return e.attrs.dataprovider&&(d=e.attrs.dataprovider+"&http_accept_language="+c+"&http_x_geobase_id="+u),{elem:"line",labelImage:t.label_image,content:[{elem:"label",for:e.attrs.id,content:s},{elem:"control",content:function(){var r=E("buildInputTextBEMJSON",{_tag:e,_hints:h});return d&&(r.mods.suggest="yes",r.js.doEmptyRequests=!1,r.js.dataprovider={url:d},r.js.popupParams=E("inputPopupParams"),r.js.popupMixs=E("inputPopupMix"),t.is_allow_multiple_choice&&(r.mods.multiple="yes")),[r,{elem:"hint",content:i},E("buildErrorsBEMJSON",{_errors:o}),E("buildClientMessageBEMJSON",{_messageKey:n,_validatorType:"required"})]}()}]}})},textarea:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return r.map(function(r){return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",for:r.attrs.id,content:e,hint:n},{elem:"control",content:[E("buildTextareaBEMJSON",{_tag:r}),E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},select:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return r.map(function(r){return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e},{elem:"control",content:[E("buildSelectBEMJSON",{_tag:r,_params:{width:300}}),{elem:"hint",content:n},E("buildErrorsBEMJSON",{_errors:s}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})]}]}})},"questions-group":function(t,e,n,r){var s=t.label||"",i=[];return n.groupFields&&(Object.keys(n.groupFields).map(function(t){i.push({block:"survey-question",elem:"list",mix:{block:this.block,elem:"list"},fields:n.groupFields[t],extraSurveyData:r,copyNum:t,js:{copyNum:t,fields:n.groupFields[t]}})}),i.push({elem:"actions",content:[{block:"button2",mods:{size:"m",theme:"clear",type:"add-group",width:"auto"},mix:{block:"survey-question",elem:"add-questions-group"},content:[{elem:"text",content:[{block:"icon",mods:{type:"plus",size:"m"}},{elem:"text-inner",tag:"span",content:BEM.I18N("survey","add-more")+(s?" «"+s.toLowerCase()+"»":"")}]}]}]})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:s,mix:[{elem:"title",elemMods:{type:"group"}}]},{elem:"control",content:i}]}},payment:function(t){var e=t.label,n=void 0===e?"":e,r=t.help_text,s=void 0===r?"":r,i=t.errors,a=void 0===i?"":i,o=t.label_image,c=t.tags,u=void 0===c?[]:c,l=t.other_data,h=_slicedToArray(u,1),d=h[0],p=l.is_fixed,m=l.max;return{elem:"line",labelImage:o,content:[{elem:"label",content:n},{elem:"control",content:[{block:"payment",mods:{fixed:p},defaultSettings:{amount:0,type:"PC"},types:["PC","AC","MC"],tagData:d,otherData:l},{elem:"hint",content:s},E("buildErrorsBEMJSON",{_errors:a}),E("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),E("buildClientMessageBEMJSON",{_messageKey:"incorrect-number",_validatorType:"isCorrectNumber"}),E("buildClientMessageBEMJSON",{_messageKey:"exceeded-max-amount",_validatorType:"checkMaxAmount",_keyParams:{max:m}})]}]}}}}),i("buildErrorsBEMJSON")(function(){var t=this._errors;return t.map(function(t){return{block:"survey-validation",elem:"message",elemMods:{visibility:"visible"},content:{block:"safe-content",formatted:!1,content:t}}})}),i("buildClientMessageBEMJSON")(function(){var t=this._messageKey,e=this._validatorType,n=this._keyParams;return{block:"survey-validation",elem:"message",elemMods:{from:"client",type:e},content:BEM.I18N("survey",t,n)}}),i("getFieldFiltersForField")(function(){var t=this._field,e=t.data_source||"",n=t.hints||"",r=e||n||{},s=r.filters||[];return s=s.filter(function(t){return"field_value"===t.type})})),r("survey").elem("groups-by-header")(u()(null),f()(function(){return[E("groups-list")]}),i("groups-list")(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData,n=[],r=[];return t.forEach(function(t){var e=t.other_data&&t.other_data.widget||"",s=t.other_data&&t.other_data.is_section_header||"";"statement"===e&&s&&r.length&&(n.push(r),r=[]),r.push(t)}),n.push(r),n.map(function(t){return{block:this.block,elem:"group",fields:t,extraSurveyData:e}})})),r("survey").elem("image")(u()("td"),f()(function(){var t=this.ctx.data,e=t&&t.links||{};return{tag:"img",attrs:{src:e["720x"],srcset:e["1280x"]?e["1280x"]+" 2x":""},elem:"image-pic"}})),r("survey").elem("answer-image")(f().match(function(){return this.ctx.data})(function(){var t=this.ctx.data.links||{};return{tag:"img",attrs:{src:t["324x180"]},elem:"answer-image-pic"}})),r("input")(u()("span"),i("live")(!1),i("getLive")(function(){var t=E("live"),e=this.ctx.js,n=this.mods,r={autofocus:"yes",width:"content","tap-ahead":"yes"};return e?(void 0!==e.live?Boolean(e.live):t)&&!e.autoFocus&&!Object.keys(r).some(function(t){return n[t]===r[t]}):t}),d()(function(){return{live:this._live}}),c()(function(){var t,e=E("value",{ctx:this.ctx.value}),n=this.ctx.id||this.generateId(),r=this.mods,s=E("getLive",{}),i=this.ctx.placeholder;return r.theme=r.theme||"normal",this.ctx.hasOwnProperty("placeholder")&&(t=this.isSimple(i)?i:this.reapply(i)),M({_inputId:n,_labelId:"label"+n,_hintId:"hint"+n,_name:this.ctx.name||"",_value:e,_inputLink:!0,_iconLeft:this.ctx.icon||this.ctx.iconLeft,_iconRight:this.ctx.iconRight,_disabled:r.disabled,_live:s,_placeholder:t,_hasClear:"no"!==r.clear})}),i("value")("",t(function(){return this.ctx})(function(){return this.reapply(this.ctx)}),t(function(){return this.isSimple(this.ctx)})(function(){return this.ctx}))),r("input").elem("box")(u()("span"),f()(function(){return[this._iconLeft&&{elem:"icon",icon:this._iconLeft,elemMods:{side:"left"}},this._iconRight&&{elem:"icon",icon:this._iconRight,elemMods:{side:"right"}},this._hasClear&&{elem:"clear",elemMods:this._value||0===this._value?{visibility:"visible"}:void 0,content:" "},this.ctx.content].filter(Boolean)})),r("input").elem("control")(u()("input"),l()(function(){var t=this.extend({id:this._inputId,name:this._name,placeholder:this._placeholder},this.ctx.controlAttrs);return(this._value||0===this._value||""===this._value)&&(t.value=this._value),this.mods.disabled&&(t.disabled=!0),this._live&&(t.autocomplete="off"),t["aria-labelledby"]=this._labelId+" "+this._hintId,t}),n()(function(){return{elem:"box",content:this.ctx}})),r("input").elem("clear")(u()("span"),l()(function(){return{unselectable:"on"}}),f().match(function(){return!this.ctx.content})("")),r("input").elem("samples")(u()("span"),l()(function(){return{role:"list"}})),r("input").elem("sample")(u()("span"),l()(function(){return{role:"listitem"}})),r("link").match(function(){return this._inputLink&&this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),r("input").mod("type","textarea").elem("control")(u()("textarea"),l()(function(){var t=M({_value:null});return this.extend(t,{rows:10,cols:10})}),f()(function(){return{html:this.xmlEscape(this._value||this.ctx.content||"")}})),r("popup")(c().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var n=t.attrs||(t.attrs={});n.style=(n.style||"")+";z-index:"+t.zIndex+";"}return E("default",{_popupDefaults:!0})}),f()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),r("b-autocomplete-item")(u()("li"),t(function(){return this.ctx.search_cgi&&Array.isArray(this.ctx.search_cgi)}).js()(function(){return{cgi:this.ctx.search_cgi}}),d()(!0),m()(function(){return[{mods:{pers:this.ctx.pers?"yes":""}}]}),f()(function(){var t=this.ctx.data,e=BEM.blocks["b-autocomplete-item"].highlight,n=this.xmlEscape(Array.isArray(t)?t[1]:t);return e(n,this.ctx.hl)})),r("b-autocomplete-item").mod("type","nav")(c()(function(){var t=this.ctx.data,e=t[4],n=(e.match(/^\w[\w-]*:\/\//g)?"":"http://")+e,r=BEM.blocks["i-common__string"].escapeHTML(t[3]),s=" — "+BEM.blocks["b-autocomplete-item"].highlight(t[2],this.ctx.hl);return M({_linkUrlContent:r,_linkInfoConten:s,_url:n})}),d()(function(){return{val:this._url}}),f()(function(){return{elem:"link",tag:"a",attrs:{href:this._url,target:"_blank"},content:[{elem:"link-url",tag:"span",content:this._linkUrlContent},{elem:"link-info",tag:"span",content:this._linkInfoConten}]}})),r("b-autocomplete-item").mod("type","foot")(m()(function(){return[{mods:{enterable:"no"}}]}),f()(function(){return this.ctx.data.slice(1).map(function(t){return Array.isArray(t)?{tag:"span",elem:"foot",content:t[0]
}:t},this)})),r("b-autocomplete-item").mod("type","lingvo").content()(function(){var t=this.ctx.data[1];return[{tag:"span",elem:"text",content:t.text},{tag:"span",elem:"translation",content:[" — ",t.translation]}]}),r("b-autocomplete-item").mod("type","proxy")(d()(function(){var t=this.ctx.data[1];return{id:t.id}}),f()(function(){var t=this.ctx.data[1];return t.text})),r("input").elem("message")(u()("span"),l()(function(){return{"aria-hidden":"true"}})),r("textinput")(u()("span"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),f()(function(){var t=this.ctx,e=this.mods;return void 0===e.view&&(e.view="classic"),[{elem:"control",attrs:this.extend({type:e.type,id:t.id,name:t.name,value:t.text,tabindex:t.tabindex,placeholder:t.placeholder,autocomplete:t.autocomplete===!1&&"off",disabled:Boolean(e.disabled)},t.controlAttrs)},{elem:"box"}]})),r("textinput")(t(function(){return this.ctx.mods&&this.ctx.mods.focused||this.ctx.controlAttrs&&this.ctx.controlAttrs.autofocus}).js()(function(){var t=Boolean(this.ctx.mods&&this.ctx.mods.focused||this.ctx.controlAttrs.autofocus);return this.extend(M(),{autofocus:t,live:!t})})),r("textinput").elem("box").tag()("span"),r("textinput").elem("control").tag()("input"),r("textinput").mod("type","number")(c()(function(){return this.mods["has-clear"]=!1,M()})),r("textinput").mod("has-clear","yes")(f()(function(){return[].concat(M(),{elem:"clear",elemMods:{theme:this.mods.theme,visible:Boolean(this.ctx.text)&&"yes"}})}),t(function(){return this.ctx.controlAttrs&&this.ctx.controlAttrs.readonly}).def()(function(){return this.mods["has-clear"]=!1,M()})),r("textinput").elem("clear")(x()(function(){return{elem:"icon",icon:this.extend({mods:{type:E("icon-type"),glyph:E("icon-glyph")},mix:{block:this.block,elem:"clear",elemMods:this.elemMods}},this.ctx.icon)}})),r("textinput").elem("icon").replace()(function(){var t=this.ctx.icon||{};return t.block="icon",t.mix=[].concat(t.mix,{block:this.block,elem:this.elem,elemMods:this.elemMods}),t.mods=this.extend({size:this.mods.size,disabled:this.mods.disabled},t.mods),t}),r("checkbox")(c()(function(){var t=this.ctx;return t.controlAttrs=this.extend({id:this.generateId(),checked:Boolean(this.mods.checked),disabled:Boolean(this.mods.disabled),tabindex:t.tabindex,name:t.name,value:t.value},void 0===t.controlAttrs?t.checkboxAttrs:t.controlAttrs),t.controlAttrs["aria-labelledby"]="label"+t.controlAttrs.id,void 0===this.mods.view&&(this.mods.view="classic"),void 0===this.mods.lines&&(this.mods.lines="multi"),M({_labelAttrs:{id:t.controlAttrs["aria-labelledby"],for:t.controlAttrs.id}})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),t(function(){return void 0===this.ctx.content}).content()(function(){return[this.util.merge({elem:"box",tag:"span",content:[this.util.merge({elem:"control",attrs:this.ctx.controlAttrs},this.ctx.control),{elem:"tick",tag:"i"}]},this.ctx.box),void 0!==this.ctx.text&&this.util.merge({elem:"label"},this.isSimple(this.ctx.text)?{content:{html:this.xmlEscape(this.ctx.text)}}:this.ctx.text)].filter(Boolean)})),r("checkbox").elem("control")(u()("input"),l()(function(){return{type:"checkbox",autocomplete:"off"}})),r("checkbox").elem("label")(u()("label"),l()(function(){return this.extend({"aria-hidden":"true"},this._labelAttrs)})),r("radiobox")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),M({_disabled:e.disabled,_name:t.name,_value:t.value})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)})),r("radiobox").elem("radio")(c()(function(){var t=this.ctx,e=this.elemMods,n=this.extend({id:this.generateId(),type:"radio",name:this._name,value:t.value},t.controlAttrs),r=void 0!==n.value&&n.value===this._value;return e.disabled||(e.disabled=this._disabled),e.checked||(e.checked=r?"yes":""),e.disabled&&(n.disabled=!0,n.tabindex=-1),e.checked&&(n.checked=!0),M({_controlAttrs:n})}),u()("label"),l()(function(){return{for:this._controlAttrs.id}}),f()(function(){return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:M()}]})),r("radiobox").elem("control")(u()("input"),l()(function(){return this._controlAttrs})),r("radio-button")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),M({_radioButton:{name:t.name,value:t.value,disabled:Boolean(e.disabled)}})}),u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),f()(function(){var t=this.ctx.content;return Array.isArray(t)?t.filter(function(t){return!this.isSimple(t)&&t},this):t})),r("radio-button").elem("radio")(c()(function(){var t=this.elemMods,e=this._radioButton,n=e.disabled,r=this.extend({},this.ctx.controlAttrs),s=void 0!==r.value&&r.value===e.value;return s&&(t.checked="yes"),n&&(t.disabled="yes"),"default"===this.mods.view||t.side||(t.side=["","right","left","both"][2*this.isFirst()+this.isLast()]),r.checked=Boolean(t.checked),r.disabled=Boolean(t.disabled),r.id||(r.id=this.generateId()),M({_controlAttrs:r})}),u()("label"),l()(function(){return{for:this._controlAttrs.id}}),f()(function(){return[{elem:"control"},{elem:"text",tag:"span",content:this.ctx.content}]})),r("radio-button").elem("radio")(l()(function(){var t=this.ctx.attrs,e=void 0===t?{}:t;return _extends({},M(),e)})),r("radio-button").elem("control")(u()("input"),l()(function(){var t=this._controlAttrs;return t.checked=Boolean(t.checked),t.disabled=Boolean(t.disabled),t.disabled&&(t.tabindex="-1"),t.type="radio",t.name=this._radioButton.name,t})),r("select")(c()(function(){var t=this.ctx,e=t.id||this.generateId();return M({_controlAttrs:{id:e,name:t.name},_formSelect:{block:this.block,mods:this.mods,tabindex:t.tabindex}})}),d()(function(){return this.extend({live:!1},this.ctx.js)}),u()("span"),s("option").tag()("option"),s("option-group").tag()("optgroup"),s("text").tag()("span")),r("select").def()(function(){var t=this.ctx,e=(E("js")||{}).live;if(e){var n=t.content.filter(function(t){return"control"===t.elem})[0].content;if(n.length){var r=function t(e){for(var n,r,s=0;s<e.length&&(n=e[s],"option"===n.elem&&Object(n.attrs).selected?r=n:"option-group"===n.elem&&(r=t(n.content)),!r);s++);return r},s=r(n);return s||(s=n[0],"option-group"===s.elem&&(s=s.content[0])),M({_initValue:s.attrs.value,_initText:s.content})}}return M()}),r("select").elem("item").attrs()(function(){return{id:this.generateId()}}),r("select").elem("item").match(function(){return this.elemMods.label}).attrs()(function(){var t=M()||{};return this._labelId&&(t.id=this._labelId),t["aria-hidden"]="true",t}),r("button").match(function(){return this._formSelect})(l()(function(){var t=M()||{};t.role="listbox",t.type="button",t["aria-haspopup"]="true",t["aria-expanded"]="false";var e=this._formSelect.tabindex;return"undefined"!=typeof e&&(t.tabindex=e),t}),c()(function(){var t=this.ctx,e=this._formSelect.mods,n=this.mods;return n.arrow="down",e.theme&&(n.theme=e.theme),e.size&&(n.size=e.size),e.disabled&&(n.disabled="yes"),this._initText&&(t.content=this._initText),M({"ctx._theme":!0})}),m()(function(){return[{block:this._formSelect.block,elem:"button"}]})),r("select").elem("group")(l()(function(){return{role:"group","aria-labelledby":this._labelId}}),m()(function(){var t=this.isFirst()?this.isLast()?"both":"first":this.isLast()?"last":"middle";return{elemMods:{position:t}}}),c()(function(){return M({_labelId:this.generateId()})})),r("select").elem("control")(t(function(){return this._initValue}).def()(function(){var t=this.ctx;return t.attrs=this.extend(t.attrs,{value:this._initValue}),M()}),u()("select"),l()(function(){var t={};return["id","name","tabindex"].forEach(function(e){this._controlAttrs[e]&&(t[e]=this._controlAttrs[e])}.bind(this)),t.disabled=Boolean(this.mods.disabled),t.tabindex=-1,t["aria-hidden"]="true",this.ctx.controlAttrs||t})),r("attach")(u()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),c()(function(){var t=this.ctx;this.mods;return this.mods.theme||(this.mods.theme="normal"),M({_attachButton:!0,_id:t.id||this.generateId(),_name:t.name||"attachment",_tabindex:t.tabindex,_disabled:this.mods.disabled})}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx,e=t.text&&{html:this.xmlEscape(t.text)},n=[];return"button2"!==this.mods.use&&n.push(this.util.mergeBemjson({block:"button",mods:{size:this.mods.size,theme:this.mods.theme},mix:{block:"attach",elem:"button"},id:this._id,name:this._name,tabindex:t.tabindex,content:e||BEM.I18N("attach","button-text")},t.button||{})),void 0!==t.holder&&n.push("string"==typeof t.holder?{elem:"holder",content:{html:this.xmlEscape(t.holder)}}:this.extend(t.holder,{elem:"holder"})),n})),r("button").match(function(){return this._attachButton})(u()("span"),t(function(){return this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),c()(function(){this.ctx.content||(this.ctx.content=BEM.I18N("attach","button-text"));var t=this.ctx;return t.id&&(this._id=t.id),t.name&&(this._name=t.name),M({_name:this._name,_id:this._id,_textId:"text"+this._id,_tabindex:t.tabindex||this._tabindex})}),l()(function(){return{}}),f()(function(){var t=M(),e={block:"attach",elem:"control",attrs:this.extend({autocomplete:"off"},this.ctx.controlAttrs||{})};return[t,e]}),s("text").attrs()(function(){var t=M()||{};return t.id=this._textId,t["aria-hidden"]="true",t})),r("attach").elem("control")(m()(function(){return[{block:"button",elem:"control"}]}),u()("input"),l()(function(){var t=this.extend(this.ctx.attrs||{},{type:"file",name:this._name,id:this._id,"aria-labelledby":this._textId});return t.disabled=Boolean(this._disabled),this._disabled&&(t["aria-disabled"]="true"),this._tabindex&&(t.tabindex=this._tabindex),t})),r("attach").elem("holder")(c()(function(){return this.elemMods.state="hidden",M()}),u()("span"),l()(function(){return{"aria-hidden":"true"}}),f()(function(){return[{block:"image",mix:{block:"attach",elem:"icon-file"}},{elem:"text",tag:"label",attrs:{for:this._id},content:this.ctx.content||BEM.I18N("attach","no-file")},{block:"image",mix:{block:"attach",elem:"reset"}}]})),r("image")(u()("img"),l()(function(){var t=this.ctx,e={src:"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""};return t.url&&(e.src=t.url),["alt","width","height"].forEach(function(n){t[n]&&(e[n]=t[n])}),e})),r("date-input")(s("label").tag()("label"),c()(function(){var t=this.ctx,e=t.value||"",n=t.name||"";return e instanceof Array&&(e=e[0]),n instanceof Array&&(n=n[0]),e&&(e=e.split(".").reverse().join("-")),M({name:n,value:e})})),r("date-input")(f()(function(){var t=this.ctx;return[{block:"m-calendar",mix:[{block:t.block,elem:"control"}],mods:{toggler:"input",type:"month",has:"clear"},js:this.extend(t.js||{},{autoclose:!0,value:this.value}),size:"m",attrs:t.attrs,theme:"grey"},{block:this.ctx.block,elem:"iso-date",tag:"input",attrs:{type:"hidden",name:this.name,value:this.value}}]})),g(function(t,e){t.BEMContext.prototype["mi-helpers"]={getDateFromHumanString:function(t){var e,n=Math.abs(~t.search(/\./)||~t.search("Z")),r=t;return r=r.replace(/-/g,",").replace("T",",").replace(/:/g,","),r=n?r.substr(0,n-1):r,r=r.split(","),r[1]=r[1]-1,e=this.getUTC_YMD(r[0],r[1],r[2]),r[3]&&e.setHours(r[3]),r[4]&&e.setMinutes(r[4]),r[5]&&e.setSeconds(r[5]),e},getUTC_YMD:function(t,e,n){var r=new Date(Date.UTC(2e3,10));return r.setUTCFullYear(t),r.setUTCMonth(e),r.setUTCDate(n),r.setUTCMinutes(r.getMinutes()+r.getTimezoneOffset()),r},getHumanStringFromDate:function(t){var e,n=t.date,r=n.getFullYear(),s=(n.getMonth()+1).toString(),i=n.getDate().toString(),a=n.getHours().toString(),o=n.getMinutes().toString(),c=n.getSeconds().toString();return 1===s.length&&(s="0"+s),e=r+"-"+s,t.needDay!==!1&&(1===i.length&&(i="0"+i),e=e+"-"+i,t.needHours&&(1===a.length&&(a="0"+a),e=e+"T"+a,t.needMinutes&&(1===o.length&&(o="0"+o),e=e+":"+o,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},s={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};return function(i,a,o){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(i)||/\d/.test(i)||(a=i,i=void 0);try{if(i=i?new Date(i):new Date,isNaN(i))throw SyntaxError("invalid date");a=String(s[a]||a||s.default),"UTC:"==a.slice(0,4)&&(a=a.slice(4),o=!0);var c=o?"getUTC":"get",u=i[c+"Date"](),l=i[c+"Day"](),h=i[c+"Month"](),d=i[c+"FullYear"](),p=i[c+"Hours"](),m=i[c+"Minutes"](),f=i[c+"Seconds"](),x=i[c+"Milliseconds"](),y=o?0:i.getTimezoneOffset(),g={d:u,dd:r(u),ddd:BEM.I18N("i-tanker__days","short"+(l?l:7)),dddd:BEM.I18N("i-tanker__days","n"+(l?l:7)),m:h+1,mm:r(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:r(p%12||12),H:p,HH:r(p),M:m,MM:r(m),s:f,ss:r(f),l:r(x,3),L:r(x>99?Math.round(x/10):x),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(i).match(e)||[""]).pop().replace(n,""),o:(y>0?"-":"+")+r(100*Math.floor(Math.abs(y)/60)+Math.abs(y)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!=10)*u%10]};return a.replace(t,function(t){return t in g?g[t]:t.slice(1,t.length-1)})}catch(t){}finally{}}}()}}),r("m-datepicker")(d()(!0),s("great-chooser").tag()("form")),r("awesome-icon").tag()("span"),r("i-ua").content()(function(){var t=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("");return[].concat(M()||[],{html:t})}),r("input").elem("hint")(u()("label"),l()(function(){return{id:this._hintId,for:this._inputId,"aria-hidden":"true"}}),c()(function(){return this._iconLeft&&(this.elemMods.lpad="yes"),this._iconRight&&(this.elemMods.rpad="yes"),this._value||0===this._value||(this.elemMods.visibility="visible"),M()})),r("input").elem("control").match(function(){return this._placeholder}).wrap()(function(){return[{elem:"hint",content:this._placeholder},this.ctx]}),r("m-calendar").mod("toggler","input").content()(function(){return{elem:"toggler",content:{block:"input",mods:{size:this.ctx.size,clear:"no",toggler:"datepicker",disabled:this.ctx.mods.disabled||""},placeholder:this.ctx.js.defaultText,content:[{elem:"control",attrs:this.extend(this.ctx.attrs||{},{readonly:"yes"})}]}}}),r("date-range-input").content()(function(){var t=this.ctx,e=this.ctx.block,n=t.value||"",r=t.name||"",s=["from","to"],i=t.js.limits,a=n.map(function(t,n){var a=s[n],o=void 0;return t||(o=i.min||i.max),{block:"date-input",mods:{type:a},mix:[{block:e,elem:a}],name:r[n],attrs:{id:r[n]},value:t,js:{defaultText:BEM.I18N(e,a),limits:i,date:o}}});return a}),r("price").mod("currency","rub").content()(function(){return[{elem:"val",content:this.ctx.content}," ₽"]}),r("price").mod("currency","eur").content()(function(){return[{elem:"val",content:this.ctx.content}," €"]}),r("price").elem("val").tag()("span"),r("survey-question").elem("list")(f()(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData;return{content:[E("remove-elem"),{block:"survey",elem:"groups-by-header",fields:t,extraSurveyData:e}]}}),t(function(){return Number(this.ctx.copyNum)}).mode("remove-elem")(function(){return{elem:"list-remove",content:[{block:"icon",mods:{size:"m",type:"close"}}]}})),r("autocomplete-item")(d()(function(){return this.ctx.data}),f()(function(){return[{elem:"label",tag:"span",content:this.ctx.data.label},{elem:"data",data:this.ctx.data},{elem:"clear",tag:"span",content:"×"}]})),r("autocomplete-item").elem("data")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.data.name,value:this.ctx.data.value}})),r("file")(d()(function(){return{attrs:this.ctx.fileAttrs}}),f()(function(){var t=this.ctx,e=t.fileAttrs||"",n=e.size||"s",r=e.name||"";return[{block:"button",mods:{theme:"normal",size:n,side:"left",active:"no"},content:r.length>20?r.substr(0,20)+"…":r,attrs:{title:r}},{block:"button",mods:{theme:"normal",size:n,side:"right","only-icon":"yes"},mix:[{block:"file",elem:"delete"}],content:[{block:"spin2",mods:{size:"xxs",progress:"yes"}},{block:"image",mix:[{block:"button",elem:"icon",elemMods:{10:"delete"}}],alt:""}]}]})),r("file").mod("hidden","yes")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.content}})),r("file-upload")(d()(function(){return this.extend(this.ctx.js,{maxFilesSize:this.ctx.maxFilesSize,maxFilesCount:this.ctx.maxFilesCount})}),f()(function(){return[{block:"attach",mods:{size:"m"},content:[{block:"button",mods:{theme:"normal",size:"m"},mix:[{block:"attach",elem:"button"}],controlAttrs:{multiple:"multiple"},name:"file",content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"upload"}}],alt:BEM.I18N("file-upload","upload-text")},BEM.I18N("file-upload","upload-text")]}]},{elem:"limit",content:1===this.ctx.maxFilesCount?BEM.I18N("file-upload","limit-hint-one-file",{size:this.ctx.maxFilesSize}):BEM.I18N("file-upload","limit-hint",{count:this.ctx.maxFilesCount,size:this.ctx.maxFilesSize})}]})),r("file-upload").elem("limit").tag()("span"),r("survey-validation").elem("message-list").tag()("ul"),r("scale").elem("cell-text").tag()("span"),r("scale").elem("answer")(u()("input"),l()(function(){return this.extend(this.ctx.attrs,{type:"checkbox"})}));r("payment")(d()(function(){var t=this.ctx.tagData.attrs,e=this.ctx.otherData.max,n=this.ctx,r=n.types,s=n.defaultSettings,i=t.value,a=void 0===i?"":i,o=a.split(" "),c=_slicedToArray(o,1),u=c[0];return{amount:u||s.amount,maxAmount:e,types:r,defaultSettings:s}}),f()(function(){var t=this,e=this.ctx.tagData.attrs,n=e.value,r=void 0===n?"":n,s=e.id,i=e.name,a=this.ctx,o=a.types,c=a.defaultSettings,u=c.amount,l=c.type,h=r.split(" "),d=_slicedToArray(h,2),p=d[0],m=d[1],f=void 0===m?"":m;return p=p||u,o.indexOf(f.toUpperCase())===-1&&(f=l),[{elem:"amount",value:Number(p)},{block:"input",mods:{hidden:"yes"},mix:[{block:this.block,elem:"payment-value"}],content:[{elem:"control",controlAttrs:{id:s,name:i,value:p+" "+f}}]},{block:"radio-button",mods:{theme:"normal",size:"m"},mix:[{block:this.block,elem:"payment-type"}],value:f,content:o.map(function(e){return{elem:"radio",controlAttrs:{value:e},attrs:{title:BEM.I18N("payment","title-"+e.toLowerCase())},elemMods:{"only-icon":"yes",checked:f===e?"yes":""},content:[{block:"icon",mods:{type:"payment-"+e.toLowerCase()},mix:[{block:t.block,elem:"icon"}]}]}})}]}));r("payment").elem("amount")(f()(function(){var t=this.ctx.value;return{block:"input",js:{},mods:{theme:"normal",size:"m",clear:"no"},mix:[{block:this.block,elem:"amount-input"}],content:[{elem:"control",controlAttrs:{type:"number",min:0,value:t}}]}})),r("payment").mod("fixed",!0)(s("amount").content()(function(){return{block:"price",mods:{currency:"rub"},content:this.ctx.value}})),r("user").elem("icon").match(function(){return this._uid})(c()(function(){var t=this.ctx.avatarId||(this["i-global"].displayName||{}).default_avatar;return M({_avatarId:t})}),u()("span"),i("host")("//avatars.mds.yandex.net"),d()(function(){return{avatarId:this._avatarId}})),r("user").elem("icon").mode("iconSize")("middle"),r("user")(s("enter").def()(function(){var t=BEM.I18N("user","enter");return w([{block:"button",mods:{pseudo:"yes",size:"m",theme:"pseudo"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:t,"aria-label":t},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}])}),s("enter-label")(u()("span"),l()(function(){return{"aria-hidden":"true"}}),f()(function(){return BEM.I18N("user","enter")}))),r("domik")(c().match(function(){return!this.mods.logo})(function(){var t;return this.ctx.lang?t=this.ctx.lang:BEM.blocks&&BEM.blocks["i-global"]?t=BEM.blocks["i-global"].param("lang"):this["i-global"]&&(t=this["i-global"].lang),this.mods.logo=["en","tr","hy","ka","az"].indexOf(t)!==-1?"en":"ru",M()}),f()(function(){return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:this.ctx.content}]}),s("roof-border").tag()("i"),s("roof-body").tag()("i"),s("logo").tag()("i")),r("auth")(c()(function(){var t=this.ctx,e=function(t,e){return t?BEM.blocks["i-global"].param(e):this["i-global"][e]}.bind(this,BEM&&BEM.blocks);return void 0===t.retpath&&(t.retpath=e("retpath")),void 0===t.from&&(t.from=e("passport-msg")),M({_passportHost:e("passport-host")})}),u()("form"),d()(!0),l()(function(){return{method:"post",action:this.ctx.url||this._passportHost+"/auth",role:"form","aria-label":BEM.I18N("auth","auth")}}),i("auto-content")([]),f()(function(){var t=this.ctx;return[t.content||E("auto-content"),["retpath","from","origin","timestamp"].map(function(e){return{elem:"hidden",mix:{elem:e},name:e,val:t[e]}})]})),r("auth").elem("hidden")(u()("input"),l()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.val}})),r("popup").elem("tail").tag()("i"),r("domik").mod("type","hidden")(d()(!1),c()(function(){return w({block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]})})),r("auth").mod("content","auto")(i("auto-content")([{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]),s("username").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]}}),s("password").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]}}),s("haunter").content()(function(){return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:BEM.I18N("auth","temporary")}}),s("button").content()(function(){return{block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:BEM.I18N("auth","logon")}}),s("remember").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/restoration",text:BEM.I18N("auth","remember")}}),s("register").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/registration",text:BEM.I18N("auth","register")}})),r("auth").elem("social").attrs()(function(){return{role:"group","aria-label":BEM.I18N("auth","social-log-in")}}),r("auth").elem("social-icon")(u()("i"),f()(" ")),r("dropdown")(d()(!0),m()(function(){return[{mods:{action:"closed"}}]}),s("popup").replace()(function(){var t=this.ctx,e=[{block:"dropdown",elem:"popup"}];return t.mix&&(e=e.concat(t.mix)),{block:"popup",mix:e,mods:this.elemMods,underMods:t.underMods,attrs:t.attrs,js:t.js,content:[{elem:"tail"},{elem:"content",content:t.content}]}})),r("button2").mod("type","submit").attrs()(function(){return this.extend(M(),{type:"submit"})}),r("domik").mod("type","popup").attrs()(function(){var t=M()||{};return t.role="dialog",t}),r("user").mod("menu","yes")(l()(function(){var t=M()||{};return t.role="button",t.tabindex=0,t["aria-haspopup"]="true",t["aria-expanded"]="false",t}),i("exit-url")(function(){var t=this["i-global"],e="/passport?mode=";return e+="logout&yu="+(t.yandexuid||""),t.retpath&&(e+="&retpath="+encodeURIComponent(t.retpath)),t["passport-host"]+e}),i("user-menu")(function(){var t=E("exit-url");return[{elem:"item",type:"mail",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("mail"),content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:{caller:this.ctx.mailCallerId}}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(this)}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","letter_compose"),url:this["i-services"].serviceUrl("mail")+"/compose"}},{elem:"item",type:"disk",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","tune"),url:this["i-services"].serviceUrl("tune")}},{elem:"item",type:"passport",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","passport"),url:this["i-services"].serviceUrl("passport")}},{elem:"item",type:"logout",content:{block:"link",mods:{theme:"normal"},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:t}}]}),t(function(){return this["i-global"].login}).wrap()(function(){var t=E("user-menu");return{block:"dropdown-menu",mods:{theme:"ffffff",size:"m",user:"yes"},content:[this.ctx,{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:t}]}})),r("dropdown-menu")(d()(!0),c()(function(){var t=this.mods;return void 0!==t.size||(t.size="m"),void 0!==t.theme||(t.theme="ffffff"),this.dropdownMenuSize=t.size,this._inDropdownMenu=!0,M()})),r("dropdown-menu").elem("popup").def()(function(){var t=this.ctx;return w({block:"dropdown",elem:"popup",js:this.ctx.js,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:this.extend({size:this.dropdownMenuSize},this.elemMods)}),attrs:t.attrs,content:{block:"dropdown-menu",elem:"menu",title:t.menuTitle,type:t.type,elemMods:t.menuMods,mix:t.menuMix,content:t.content}})}),r("dropdown-menu").elem("menu").def()(function(){var t=this.ctx,e=t.type||"vert",n=this.elemMods;return n.theme||(n.theme="ffffff"),w({block:"b-menu-"+e,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:n}),title:t.title,content:t.content})}),r("b-menu-vert").match(function(){return this._inDropdownMenu})(l()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),r("b-menu-horiz").match(function(){return this._inDropdownMenu})(l()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),r("b-menu-vert")(f()(function(){return[this.ctx.title,{elem:"layout",content:this.ctx.content}]}),s("layout").tag()("ul"),s("item").match(function(){return!this._inItemContent}).wrap()(function(){return this.position--,{elem:"layout-unit",content:[this.ctx,this.ctx["item-content"]]}}),s("item-content").def()(function(){return M({_inItemContent:!0})}),s("layout-unit")(u()("li"),m()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t})),s("item-selector").tag()("span"),s("submenu").tag()("ul")),r("b-menu-horiz")(d()(!0),s("item").wrap()(function(){return this.position--,{elem:"layout-unit",content:this.ctx}}),s("layout-unit").mix()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t}),s("item-selector").tag()("span")),r("user-menu-update").js()(!0),r("logo2").elem("company")(l()(function(){var t=this.ctx,e=t.language,n=t.color,r=["ru","uk","kz","by"].includes(e)?"Яндекс":"Yandex",s=n?"&color="+n:"",i="https://yastatic.net/q/logoaas/v1/"+r+".svg?viewBox=1"+s;return this.extend(M(),{style:"background: url("+i+") left/contain no-repeat"})})),r("logo2").elem("service")(l()(function(){var t=this.ctx.language,e=["ru","uk","kz","by"].includes(t)?"Формы":"Forms",n="https://yastatic.net/q/logoaas/v1/"+e+".svg?viewBox=1";return this.extend(M(),{style:"background: url("+n+") left/contain no-repeat"})})),r("logo2")(f()(function(){return[{elem:"company",tld:this.ctx.tld,language:this.ctx.language,color:this.ctx.color},{elem:"service",adminUrl:this.ctx.adminUrl,language:this.ctx.language}]})),r("logo2").mod("type","header")(s("company")(u()("a"),l()(function(){return this.extend(M(),{href:"//yandex."+this.ctx.tld})})),s("service")(u()("a"),l()(function(){return this.extend(M(),{href:this.ctx.adminUrl+"?utm_campaign=header"})}))),g(function(t,n){var r=t.BEMContext||n.BEMContext;r.prototype.require=function(t){return e[t]}})}),i.exportApply(r),r}var n=function(){function t(e,r,s){function i(o,c){if(!r[o]){if(!e[o]){var u="function"==typeof n&&n;if(!c&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return i(n||t)},h,h.exports,t,e,r,s)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<s.length;o++)i(s[o]);return i}return t}()({1:[function(t,e,n){function r(t){return void 0===t||null===t}function s(t){var e={};for(var n in t)e[n]=t[n];return e}function i(t){t=s(t||{}),t.whiteList=t.whiteList||a.whiteList,t.onAttr=t.onAttr||a.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||a.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||a.safeAttrValue,this.options=t}var a=t("./default"),o=t("./parser");t("./util");i.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,s=n.whiteList,i=n.onAttr,a=n.onIgnoreAttr,c=n.safeAttrValue,u=o(t,function(t,e,n,o,u){var l=s[n],h=!1;if(l===!0?h=l:"function"==typeof l?h=l(o):l instanceof RegExp&&(h=l.test(o)),h!==!0&&(h=!1),o=c(n,o)){var d={position:e,sourcePosition:t,source:u,isWhite:h};if(h){var p=i(n,o,d);return r(p)?n+":"+o:p}var p=a(n,o,d);return r(p)?void 0:p}});return u},e.exports=i},{"./default":2,"./parser":4,"./util":5}],2:[function(t,e,n){function r(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,
t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function s(t,e,n){}function i(t,e,n){}function a(t,e){return o.test(e)?"":e}var o=/javascript\s*\:/gim;n.whiteList=r(),n.getDefaultWhiteList=r,n.onAttr=s,n.onIgnoreAttr=i,n.safeAttrValue=a},{}],3:[function(t,e,n){function r(t,e){var n=new i(e);return n.process(t)}var s=t("./default"),i=t("./css");n=e.exports=r,n.FilterCSS=i;for(var a in s)n[a]=s[a];"undefined"!=typeof window&&(window.filterCSS=e.exports)},{"./css":1,"./default":2}],4:[function(t,e,n){function r(t,e){function n(){if(!i){var n=s.trim(t.slice(a,o)),r=n.indexOf(":");if(r!==-1){var u=s.trim(n.slice(0,r)),l=s.trim(n.slice(r+1));if(u){var h=e(a,c.length,u,l,n);h&&(c+=h+"; ")}}}a=o+1}t=s.trimRight(t),";"!==t[t.length-1]&&(t+=";");for(var r=t.length,i=!1,a=0,o=0,c="";o<r;o++){var u=t[o];if("/"===u&&"*"===t[o+1]){var l=t.indexOf("*/",o+2);if(l===-1)break;o=l+1,a=o+1,i=!1}else"("===u?i=!0:")"===u?i=!1:";"===u?i||n():"\n"===u&&n()}return s.trim(c)}var s=t("./util");e.exports=r},{"./util":5}],5:[function(t,e,n){e.exports={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,s;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,s=t.length;r<s;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},{}],6:[function(t,e,n){function r(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function s(t,e,n){}function i(t,e,n){}function a(t,e,n){}function o(t,e,n){}function c(t){return t.replace(E,"&lt;").replace(z,"&gt;")}function u(t,e,n,r){if(n=f(n),"href"===e||"src"===e){if(n=w.trim(n),"#"===n)return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(j.lastIndex=0,j.test(n))return""}else if("style"===e){if(O.lastIndex=0,O.test(n))return"";if(N.lastIndex=0,N.test(n)&&(j.lastIndex=0,j.test(n)))return"";r!==!1&&(r=r||M,n=r.process(n))}return n=x(n)}function l(t){return t.replace(B,"&quot;")}function h(t){return t.replace(S,'"')}function d(t){return t.replace(C,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function p(t){return t.replace(I,":").replace(A," ")}function m(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return w.trim(e)}function f(t){return t=h(t),t=d(t),t=p(t),t=m(t)}function x(t){return t=l(t),t=c(t)}function y(){return""}function g(t,e){function n(e){return!!r||w.indexOf(t,e)!==-1}"function"!=typeof e&&(e=function(){});var r=!Array.isArray(t),s=[],i=!1;return{onIgnoreTag:function(t,r,a){if(n(t)){if(a.isClosing){var o="[/removed]",c=a.position+o.length;return s.push([i!==!1?i:a.position,c]),i=!1,o}return i||(i=a.position),"[removed]"}return e(t,r,a)},remove:function(t){var e="",n=0;return w.forEach(s,function(r){e+=t.slice(n,r[0]),n=r[1]}),e+=t.slice(n)}}}function b(t){return t.replace(T,"")}function v(t){var e=t.split("");return e=e.filter(function(t){var e=t.charCodeAt(0);return 127!==e&&(!(e<=31)||(10===e||13===e))}),e.join("")}var k=t("cssfilter").FilterCSS,_=t("cssfilter").getDefaultWhiteList,w=t("./util"),M=new k,E=/</g,z=/>/g,B=/"/g,S=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,I=/&colon;?/gim,A=/&newline;?/gim,j=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,O=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,N=/u\s*r\s*l\s*\(.*/gi,T=/<!--[\s\S]*?-->/g;n.whiteList=r(),n.getDefaultWhiteList=r,n.onTag=s,n.onIgnoreTag=i,n.onTagAttr=a,n.onIgnoreTagAttr=o,n.safeAttrValue=u,n.escapeHtml=c,n.escapeQuote=l,n.unescapeQuote=h,n.escapeHtmlEntities=d,n.escapeDangerHtml5Entities=p,n.clearNonPrintableCharacter=m,n.friendlyAttrValue=f,n.escapeAttrValue=x,n.onIgnoreTagStripAll=y,n.StripTagBody=g,n.stripCommentTag=b,n.stripBlankChar=v,n.cssFilter=M,n.getDefaultCSSWhiteList=_},{"./util":8,cssfilter:3}],7:[function(t,e,n){function r(t){var e=h.spaceIndex(t);if(e===-1)var n=t.slice(1,-1);else var n=t.slice(1,e+1);return n=h.trim(n).toLowerCase(),"/"===n.slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function s(t){return"</"===t.slice(0,2)}function i(t,e,n){"user strict";var i="",a=0,o=!1,c=!1,u=0,l=t.length,h="",d="";for(u=0;u<l;u++){var p=t.charAt(u);if(o===!1){if("<"===p){o=u;continue}}else if(c===!1){if("<"===p){i+=n(t.slice(a,u)),o=u,a=u;continue}if(">"===p){i+=n(t.slice(a,o)),d=t.slice(o,u+1),h=r(d),i+=e(o,i.length,h,d,s(d)),a=u+1,o=!1;continue}if(('"'===p||"'"===p)&&"="===t.charAt(u-1)){c=p;continue}}else if(p===c){c=!1;continue}}return a<t.length&&(i+=n(t.substr(a))),i}function a(t,e){"user strict";function n(t,n){if(t=h.trim(t),t=t.replace(d,"").toLowerCase(),!(t.length<1)){var r=e(t,n||"");r&&s.push(r)}}for(var r=0,s=[],i=!1,a=t.length,u=0;u<a;u++){var p,m,f=t.charAt(u);if(i!==!1||"="!==f)if(i===!1||u!==r||'"'!==f&&"'"!==f||"="!==t.charAt(u-1))if(/\s|\n|\t/.test(f)){if(t=t.replace(/\s|\n|\t/g," "),i===!1){if(m=o(t,u),m===-1){p=h.trim(t.slice(r,u)),n(p),i=!1,r=u+1;continue}u=m-1;continue}if(m=c(t,u-1),m===-1){p=h.trim(t.slice(r,u)),p=l(p),n(i,p),i=!1,r=u+1;continue}}else;else{if(m=t.indexOf(f,u+1),m===-1)break;p=h.trim(t.slice(r+1,m)),n(i,p),i=!1,u=m,r=u+1}else i=t.slice(r,u),r=u+1}return r<t.length&&(i===!1?n(t.slice(r)):n(i,l(h.trim(t.slice(r))))),h.trim(s.join(" "))}function o(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function c(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function u(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}function l(t){return u(t)?t.substr(1,t.length-2):t}var h=t("./util"),d=/[^a-zA-Z0-9_:\.\-]/gim;n.parseTag=i,n.parseAttr=a},{"./util":8}],8:[function(t,e,n){e.exports={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,s;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,s=t.length;r<s;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}}},{}],9:[function(t,e,n){function r(t){return void 0===t||null===t}function s(t){var e=d.spaceIndex(t);if(e===-1)return{html:"",closing:"/"===t[t.length-2]};t=d.trim(t.slice(e+1,-1));var n="/"===t[t.length-1];return n&&(t=d.trim(t.slice(0,-1))),{html:t,closing:n}}function i(t){var e={};for(var n in t)e[n]=t[n];return e}function a(t){t=i(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=c.onIgnoreTagStripAll),t.whiteList=t.whiteList||c.whiteList,t.onTag=t.onTag||c.onTag,t.onTagAttr=t.onTagAttr||c.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||c.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||c.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||c.safeAttrValue,t.escapeHtml=t.escapeHtml||c.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new o(t.css))}var o=t("cssfilter").FilterCSS,c=t("./default"),u=t("./parser"),l=u.parseTag,h=u.parseAttr,d=t("./util");a.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,i=n.whiteList,a=n.onTag,o=n.onIgnoreTag,u=n.onTagAttr,p=n.onIgnoreTagAttr,m=n.safeAttrValue,f=n.escapeHtml,x=e.cssFilter;n.stripBlankChar&&(t=c.stripBlankChar(t)),n.allowCommentTag||(t=c.stripCommentTag(t));var y=!1;if(n.stripIgnoreTagBody){var y=c.StripTagBody(n.stripIgnoreTagBody,o);o=y.onIgnoreTag}var g=l(t,function(t,e,n,c,l){var y={sourcePosition:t,position:e,isClosing:l,isWhite:i.hasOwnProperty(n)},g=a(n,c,y);if(!r(g))return g;if(y.isWhite){if(y.isClosing)return"</"+n+">";var b=s(c),v=i[n],k=h(b.html,function(t,e){var s=d.indexOf(v,t)!==-1,i=u(n,t,e,s);if(!r(i))return i;if(s)return e=m(n,t,e,x),e?t+'="'+e+'"':t;var i=p(n,t,e,s);return r(i)?void 0:i}),c="<"+n;return k&&(c+=" "+k),b.closing&&(c+=" /"),c+=">"}var g=o(n,c,y);return r(g)?f(c):g},f);return y&&(g=y.remove(g)),g},e.exports=a},{"./default":6,"./parser":7,"./util":8,cssfilter:3}],marked:[function(e,n,r){(function(t){!function(t){"use strict";function e(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||b.defaults,this.rules=v.normal,this.options.pedantic?this.rules=v.pedantic:this.options.gfm&&(this.options.tables?this.rules=v.tables:this.rules=v.gfm)}function s(t,e){if(this.options=e||b.defaults,this.links=t,this.rules=k.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=k.pedantic:this.options.gfm&&(this.options.breaks?this.rules=k.breaks:this.rules=k.gfm)}function i(t){this.options=t||b.defaults}function a(){}function o(t){this.tokens=[],this.token=null,this.options=t||b.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function u(t,e){if(e){if(u.escapeTest.test(t))return t.replace(u.escapeReplace,function(t){return u.replacements[t]})}else if(u.escapeTestNoEncode.test(t))return t.replace(u.escapeReplaceNoEncode,function(t){return u.replacements[t]});return t}function l(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function h(t,e){return t=t.source||t,e=e||"",{replace:function(e,n){return n=n.source||n,n=n.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function d(t,e,n){if(t){try{var r=decodeURIComponent(l(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!w.test(n)&&(n=p(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}function p(t,e){return _[" "+t]||(/^[^:]+:\/*[^\/]*$/.test(t)?_[" "+t]=t+"/":_[" "+t]=y(t,"/",!0)),t=_[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+e:t+e}function m(){}function f(t){for(var e,n,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function x(t,e){var n=t.replace(/\|/g,function(t,e,n){for(var r=!1,s=e;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"}),r=n.split(/ \|/),s=0;if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function y(t,e,n){if(0===t.length)return"";for(var r=0;r<t.length;){var s=t.charAt(t.length-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.substr(0,t.length-r)}function g(t,e){if(t.indexOf(e[1])===-1)return-1;for(var n=0,r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function b(t,n,r){if("undefined"==typeof t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(r||"function"==typeof n){r||(r=n,n=null),n=f({},b.defaults,n||{});var s,i,a=n.highlight,c=0;try{s=e.lex(t,n)}catch(t){return r(t)}i=s.length;var l=function(t){if(t)return n.highlight=a,r(t);var e;try{e=o.parse(s,n)}catch(e){t=e}return n.highlight=a,t?r(t):r(null,e)};if(!a||a.length<3)return l();if(delete n.highlight,!i)return l();for(;c<s.length;c++)!function(t){return"code"!==t.type?--i||l():a(t.text,t.lang,function(e,n){return e?l(e):null==n||n===t.text?--i||l():(t.text=n,t.escaped=!0,void(--i||l()))})}(s[c])}else try{return n&&(n=f({},b.defaults,n)),o.parse(e.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||b.defaults).silent)return"<p>An error occurred:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}}var v={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:m,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:m,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:m,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};v._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,v._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,v.def=h(v.def).replace("label",v._label).replace("title",v._title).getRegex(),v.bullet=/(?:[*+-]|\d{1,9}\.)/,v.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,v.item=h(v.item,"gm").replace(/bull/g,v.bullet).getRegex(),v.list=h(v.list).replace(/bull/g,v.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+v.def.source+")").getRegex(),v._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",v._comment=/<!--(?!-?>)[\s\S]*?-->/,v.html=h(v.html,"i").replace("comment",v._comment).replace("tag",v._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),v.paragraph=h(v.paragraph).replace("hr",v.hr).replace("heading",v.heading).replace("lheading",v.lheading).replace("tag",v._tag).getRegex(),v.blockquote=h(v.blockquote).replace("paragraph",v.paragraph).getRegex(),v.normal=f({},v),v.gfm=f({},v.normal,{fences:/^ {0,3}(`{3,}|~{3,})([^`\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),v.gfm.paragraph=h(v.paragraph).replace("(?!","(?!"+v.gfm.fences.source.replace("\\1","\\2")+"|"+v.list.source.replace("\\1","\\3")+"|").getRegex(),v.tables=f({},v.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),v.pedantic=f({},v.normal,{html:h("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",v._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),e.rules=v,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},e.prototype.token=function(t,e){t=t.replace(/^ +$/gm,"");for(var n,r,s,i,a,o,c,u,l,h,d,p,m,f,g,b;t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:y(s,"\n")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(o={type:"table",header:x(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},o.header.length===o.align.length)){for(t=t.substring(s[0].length),d=0;d<o.align.length;d++)/^ *-+: *$/.test(o.align[d])?o.align[d]="right":/^ *:-+: *$/.test(o.align[d])?o.align[d]="center":/^ *:-+ *$/.test(o.align[d])?o.align[d]="left":o.align[d]=null;for(d=0;d<o.cells.length;d++)o.cells[d]=x(o.cells[d],o.header.length);this.tokens.push(o)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),i=s[2],f=i.length>1,c={type:"list_start",ordered:f,start:f?+i:"",loose:!1},this.tokens.push(c),s=s[0].match(this.rules.item),u=[],n=!1,m=s.length,d=0;d<m;d++)o=s[d],h=o.length,o=o.replace(/^ *([*+-]|\d+\.) */,""),~o.indexOf("\n ")&&(h-=o.length,o=this.options.pedantic?o.replace(/^ {1,4}/gm,""):o.replace(new RegExp("^ {1,"+h+"}","gm"),"")),d!==m-1&&(a=v.bullet.exec(s[d+1])[0],(i.length>1?1===a.length:a.length>1||this.options.smartLists&&a!==i)&&(t=s.slice(d+1).join("\n")+t,d=m-1)),r=n||/\n\n(?!\s*$)/.test(o),d!==m-1&&(n="\n"===o.charAt(o.length-1),r||(r=n)),r&&(c.loose=!0),g=/^\[[ xX]\] /.test(o),b=void 0,g&&(b=" "!==o[1],o=o.replace(/^\[[ xX]\] +/,"")),l={type:"list_item_start",task:g,checked:b,loose:r},u.push(l),this.tokens.push(l),this.token(o,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(m=u.length,d=0;d<m;d++)u[d].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),p=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(o={type:"table",header:x(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},o.header.length===o.align.length)){for(t=t.substring(s[0].length),d=0;d<o.align.length;d++)/^ *-+: *$/.test(o.align[d])?o.align[d]="right":/^ *:-+: *$/.test(o.align[d])?o.align[d]="center":/^ *:-+ *$/.test(o.align[d])?o.align[d]="left":o.align[d]=null;for(d=0;d<o.cells.length;d++)o.cells[d]=x(o.cells[d].replace(/^ *\| *| *\| *$/g,""),o.header.length);this.tokens.push(o)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var k={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};k._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",k.em=h(k.em).replace(/punctuation/g,k._punctuation).getRegex(),k._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,k._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,k._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,k.autolink=h(k.autolink).replace("scheme",k._scheme).replace("email",k._email).getRegex(),k._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,k.tag=h(k.tag).replace("comment",v._comment).replace("attribute",k._attribute).getRegex(),k._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|`(?!`)|[^\[\]\\`])*?/,k._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*)/,k._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,k.link=h(k.link).replace("label",k._label).replace("href",k._href).replace("title",k._title).getRegex(),k.reflink=h(k.reflink).replace("label",k._label).getRegex(),k.normal=f({},k),k.pedantic=f({},k.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",k._label).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k._label).getRegex()}),k.gfm=f({},k.normal,{escape:h(k.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),k.gfm.url=h(k.gfm.url,"i").replace("email",k.gfm._extended_email).getRegex(),k.breaks=f({},k.gfm,{br:h(k.br).replace("{2,}","*").getRegex(),text:h(k.gfm.text).replace(/\{2,\}/g,"*").getRegex()}),s.rules=k,s.output=function(t,e,n){var r=new s(e,n);return r.output(t)},s.prototype.output=function(t){for(var e,n,r,i,a,o,c="";t;)if(a=this.rules.escape.exec(t))t=t.substring(a[0].length),c+=u(a[1]);else if(a=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(a[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(a[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.inRawBlock=!1),t=t.substring(a[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):u(a[0]):a[0];else if(a=this.rules.link.exec(t)){var l=g(a[2],"()");if(l>-1){var h=a[0].length-(a[2].length-l)-(a[3]||"").length;a[2]=a[2].substring(0,l),a[0]=a[0].substring(0,h).trim(),a[3]=""}t=t.substring(a[0].length),this.inLink=!0,r=a[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r),e?(r=e[1],i=e[3]):i=""):i=a[3]?a[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(a,{href:s.escapes(r),title:s.escapes(i)}),this.inLink=!1}else if((a=this.rules.reflink.exec(t))||(a=this.rules.nolink.exec(t))){if(t=t.substring(a[0].length),e=(a[2]||a[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){c+=a[0].charAt(0),t=a[0].substring(1)+t;continue}this.inLink=!0,c+=this.outputLink(a,e),this.inLink=!1}else if(a=this.rules.strong.exec(t))t=t.substring(a[0].length),c+=this.renderer.strong(this.output(a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.em.exec(t))t=t.substring(a[0].length),c+=this.renderer.em(this.output(a[6]||a[5]||a[4]||a[3]||a[2]||a[1]));else if(a=this.rules.code.exec(t))t=t.substring(a[0].length),c+=this.renderer.codespan(u(a[2].trim(),!0));else if(a=this.rules.br.exec(t))t=t.substring(a[0].length),c+=this.renderer.br();else if(a=this.rules.del.exec(t))t=t.substring(a[0].length),c+=this.renderer.del(this.output(a[1]));else if(a=this.rules.autolink.exec(t))t=t.substring(a[0].length),"@"===a[2]?(n=u(this.mangle(a[1])),r="mailto:"+n):(n=u(a[1]),r=n),c+=this.renderer.link(r,null,n);else if(this.inLink||!(a=this.rules.url.exec(t))){if(a=this.rules.text.exec(t))t=t.substring(a[0].length),c+=this.inRawBlock?this.renderer.text(a[0]):this.renderer.text(u(this.smartypants(a[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===a[2])n=u(a[0]),r="mailto:"+n;else{do o=a[0],a[0]=this.rules._backpedal.exec(a[0])[0];while(o!==a[0]);n=u(a[0]),r="www."===a[1]?"http://"+n:n}t=t.substring(a[0].length),c+=this.renderer.link(r,null,n)}return c},s.escapes=function(t){return t?t.replace(s.rules._escapes,"$1"):t},s.prototype.outputLink=function(t,e){var n=e.href,r=e.title?u(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,u(t[1]))},s.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t;
},s.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,s=0;s<r;s++)e=t.charCodeAt(s),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},i.prototype.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(t,r);null!=s&&s!==t&&(n=!0,t=s)}return r?'<pre><code class="'+this.options.langPrefix+u(r,!0)+'">'+(n?t:u(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:u(t,!0))+"</code></pre>"},i.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.prototype.html=function(t){return t},i.prototype.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(t,e,n){var r=e?"ol":"ul",s=e&&1!==n?' start="'+n+'"':"";return"<"+r+s+">\n"+t+"</"+r+">\n"},i.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},i.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},i.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},i.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.prototype.tablecell=function(t,e){var n=e.header?"th":"td",r=e.align?"<"+n+' align="'+e.align+'">':"<"+n+">";return r+t+"</"+n+">\n"},i.prototype.strong=function(t){return"<strong>"+t+"</strong>"},i.prototype.em=function(t){return"<em>"+t+"</em>"},i.prototype.codespan=function(t){return"<code>"+t+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(t){return"<del>"+t+"</del>"},i.prototype.link=function(t,e,n){if(t=d(this.options.sanitize,this.options.baseUrl,t),null===t)return n;var r='<a href="'+u(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},i.prototype.image=function(t,e,n){if(t=d(this.options.sanitize,this.options.baseUrl,t),null===t)return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(t){return t},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(t){return t},a.prototype.link=a.prototype.image=function(t,e,n){return""+n},a.prototype.br=function(){return""},o.parse=function(t,e){var n=new o(e);return n.parse(t)},o.prototype.parse=function(t){this.inline=new s(t.links,this.options),this.inlineText=new s(t.links,f({},this.options,{renderer:new a})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,l(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,s="",i="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(s+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(s,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var a=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,a,o);case"list_item_start":i="";var c=this.token.loose,u=this.token.checked,h=this.token.task;for(this.token.task&&(i+=this.renderer.checkbox(u));"list_item_end"!==this.next().type;)i+=c||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i,h,u);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},c.prototype.slug=function(t){var e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){var n=e;do this.seen[n]++,e=n+"-"+this.seen[n];while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var _={},w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;m.exec=m,b.options=b.setOptions=function(t){return f(b.defaults,t),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=o,b.parser=o.parse,b.Renderer=i,b.TextRenderer=a,b.Lexer=e,b.lexer=e.lex,b.InlineLexer=s,b.inlineLexer=s.output,b.Slugger=c,b.parse=b,"undefined"!=typeof n&&"object"===("undefined"==typeof r?"undefined":_typeof(r))?n.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):t.marked=b}(this||("undefined"!=typeof window?window:t))}).call(this,"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],xss:[function(t,e,n){function r(t,e){var n=new o(e);return n.process(t)}function s(){return"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope}var i=t("./default"),a=t("./parser"),o=t("./xss");n=e.exports=r,n.FilterXSS=o;for(var c in i)n[c]=i[c];for(var c in a)n[c]=a[c];"undefined"!=typeof window&&(window.filterXSS=e.exports),s()&&(self.filterXSS=e.exports)},{"./default":6,"./parser":7,"./xss":9}]},{},[]),r=!0;"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(exports.BEMHTML=e({xss:n("xss"),marked:n("marked")}),r=!1),"object"===("undefined"==typeof modules?"undefined":_typeof(modules))&&(modules.define("BEMHTML",[],function(t){t(e({xss:n("xss"),marked:n("marked")}))}),r=!1),r&&(BEMHTML=e({xss:n("xss"),marked:n("marked")}),t.BEMHTML=BEMHTML)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this);
function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var _slicedToArray=function(){function t(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function e(t){var e=a(t);if(h)for(var i,n=0;i=f[n++];)t.hasOwnProperty(i)&&e.push(i);return e}function i(i,n,s){for(var r,a,c=e(s),l=0,h=c.length;l<h;)"__self"!==(r=c[l++])&&(a=s[r],u(a)&&(!o||a.toString().indexOf(".__base")>-1)?n[r]=function(e,o){var s=function t(){var e=this.__base;this.__base=t.__base;var i=o.apply(this,arguments);return this.__base=e,i};return s.__base=i[e]||("__constructor"===e?n.__self.__parent:t.noop),s}(r,a):n[r]=a)}function n(e,i){for(var n,o=1;n=e[o++];)i?u(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=u(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}var o=function(){return"_"}.toString().indexOf("_")>-1,s=function(){},r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},a=Object.keys,c=t.extend,l=Array.isArray,u=t.isFunction,h=!0,d={toString:""};for(var p in d)d.hasOwnProperty(p)&&(h=!1);var f=h?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=l(t[0]),o=e||u(t[0]),a=o?e?n(t[0]):t[0]:s,h=t[o?1:0]||{},d=t[o?2:1],p=h.__constructor||o&&a.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:o?function(){return a.apply(this,arguments)}:function(){};if(!o)return p.prototype=h,p.prototype.__self=p.prototype.constructor=p,c(p,d);c(p,a),p.__parent=a;var f=a.prototype,m=p.prototype=r(f);return m.__self=m.constructor=p,h&&i(f,m,h),d&&i(a,p,d),p},t.inheritSelf=function(){var t=arguments,e=l(t[0]),o=e?n(t[0],t[0][0]):t[0],s=t[1],r=t[2],a=o.prototype;return s&&i(a,a,s),r&&i(o,o,r),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,l=i(s,r),u=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(n=this.buildEventName(n),c=u[n]||(u[n]={ids:{},list:{}}),!(l in c.ids)){var p=c.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[l]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||"undefined"==typeof n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),l=0;n=c[l++];)if(n=this.buildEventName(n),a=r[n])if(o){var u=i(o,s),h=a.ids;if(u in h){var d=a.list,p=h[u],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[u]}}else delete this[e][n]}else delete this[e]}else{var _=this;s=o,t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o=this[e],s="string"==typeof i,r=s?i:i.type,a=this.buildEventName(r);if(s||(i.type=a,i.target||(i.target=this)),o&&(o=o[a])){var c,l=o.list.first;for(l&&s&&(i=t.Event(a),i.target=this);l;)i.data=l.data,c=l.fn.call(l.ctx||this,i,n),"undefined"!=typeof c&&(i.result=c,c===!1&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&this.un(r,l.fn,l.ctx),l=l.next}return this}};t.observable=t.inherit(n,n)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e){function i(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function n(t,e,n){if(c(t))return void(e[i(n,"*","*")]=t);var o,s,r;for(o in t)if(l(t,o))if(r=t[o],c(r))e[i(n,o,"*")]=r;else for(s in r)l(r,s)&&(e[i(n,o,s)]=r[s])}function o(t,e){return e?Array.isArray(e)?function(i){for(var n=0,o=e.length;n<o;)if(i.hasMod(t,e[n++]))return!0;return!1}:function(i){return i.hasMod(t,e)}:function(e){return e.hasMod(t)}}function s(t){t.onSetMod&&(n(t.onSetMod,t),delete t.onSetMod);var e,i;if(t.onElemSetMod){for(e in t.onElemSetMod)l(t.onElemSetMod,e)&&(i=t.onElemSetMod[e],n(i,t,e));delete t.onElemSetMod}}var r=[],a=t.inherit,c=t.isFunction,l=Function.prototype.call.bind(Object.prototype.hasOwnProperty),u={},h="_",d="__",p={};this.BEM=a(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,i!==!1?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,i,n,o){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(t.isFunction(i)||t.isFunction(n))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t.isFunction(i)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,i){var n=!0;return"object"!==("undefined"==typeof e?"undefined":_typeof(e))||e instanceof t.Event||(n="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),n&&(this.__base(e=this.buildEvent(e),i),this._trigger(e,i)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,i,n){var o=arguments.length,s=!1;1==o?(n="",i=t,t=e,s=!0):2==o&&("string"==typeof t?(n=i,i=t,t=e):(n="",s=!0));var r=this.getMod(t,i)===n;return s?!r:r},getMod:function(t,e){var i="undefined"==typeof t?"undefined":_typeof(t);if("string"===i||"undefined"===i){e=t||e;var n=this._modCache,o=e in n?n[e]:n[e]=this._extractModVal(e);return o}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(i,n,o){"undefined"==typeof o&&("string"==typeof i?(o="undefined"==typeof n||n,n=i,i=e):o=!0);var s=this;if(!i||i[0]){o===!1||null===o?o="":o!==!0&&(o=o.toString());var r=(i&&i[0]?t.identify(i[0]):"")+"_"+n;if(this._processingMods[r])return s;var a,c=i?s._getElemMod(n,i,a=s.__self._extractElemNameFrom(i)):s.getMod(n);if(c===o)return s;this._processingMods[r]=!0;var l=!0,u=[n,o,c];i&&u.unshift(i),[["*","*"],[n,"*"],[n,o]].forEach(function(t){l=s._callModFn(a,t[0],t[1],u)!==!1&&l}),!i&&l&&(s._modCache[n]=o),l&&s._afterSetMod(n,o,c,i,a),delete this._processingMods[r]}return s},_afterSetMod:function(t,e,i,n,o){var s={modName:t,modVal:e,oldModVal:i};n&&(s.elem=n),this.trigger({modName:t,modVal:"*",elem:o},s).trigger({modName:t,modVal:e,elem:o},s)},toggleMod:function(t,i,n,o,s){"string"==typeof t&&(s=o,o=n,n=i,i=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,i);return(r==n||r==o)&&this.setMod(t,i,"boolean"==typeof s?s?n:o:this.hasMod(t,i,n)?o:n),this},delMod:function(t,i){return i||(i=t,t=e),this.setMod(t,i,"")},_callModFn:function(t,n,o,s){var r=i(t,n,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:u,decl:function(i,n,r){"string"==typeof i?i={block:i}:i.name&&(i.block=i.name),s(n||(n={}));var l=u[i.baseBlock||i.block]||this;if(i.modName){var h=o(i.modName,i.modVal);t.each(n,function(t,i){c(i)&&(n[t]=function(){var o;if(h(this))o=i;else{var s=l.prototype[t];s&&s!==n[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(r&&"boolean"==typeof r.live){var d=r.live;r.live=function(){return d}}var p,f=l;return i.baseMix&&(f=[f],i.baseMix.forEach(function(t){f.push(u[t])})),i.block==l._name?(p=a.self(f,n,r))._processLive(!0):((p=u[i.block]=a(f,n,r))._name=i.block,delete p._liveInitable),p},declMix:function(t,e,i){return s(e||(e={})),t=u[t]=a(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new u[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,i,n,o){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(t.isFunction(i)||t.isFunction(n))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t.isFunction(i)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e=h+t.modName+h+(t.modVal===!1?"":t.modVal);return t.elem&&(e=d+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==r.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=r.length;t&&r.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);i<n;)delete t[arguments[i++]];return this},channel:function(i,n){return"boolean"==typeof i&&(n=i,i=e),i||(i="default"),n?void(p[i]&&(p[i].un(),delete p[i])):p[i]||(p[i]=new t.observable)}}))}(jQuery),function(t,e,i){function n(t){var e="undefined"==typeof t?"undefined":_typeof(t);return"string"===e||"number"===e||"boolean"===e}function o(t,e,i){null!=e&&e!==!1&&(i.push(c,t),e!==!0&&i.push(c,e))}function s(t,e,i,n){n.push(t),o(e,i,n)}function r(t,e,i,n,r){s(t,a,a,r),r.push(l,e),o(i,n,r)}var a,c="_",l="__",u="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:u,MOD_DELIM:c,ELEM_DELIM:l,buildModPostfix:function(t,e,i){var n=i||[];return o(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,o,c){if(n(i)?n(o)||(c=o,o=i,i=e,e=a):"undefined"!=typeof i?(c=i,i=a):e&&"string"!=typeof e&&(c=e,e=a),!e&&"undefined"==typeof i&&!c)return t;var l=c||[];return e?r(t,e,i,o,l):s(t,i,o,l),c?l:l.join("")},buildClasses:function(t,n,o,a){n&&"string"!=typeof n&&(a=o,o=n,n=i);var c=a||[];return n?r(t,n,i,i,c):s(t,i,i,c),o&&e.each(o,function(e,i){i&&(c.push(" "),n?r(t,n,e,i,c):s(t,e,i,c))}),a?c:c.join("")}}}(BEM,jQuery),function(t,e,i){function n(t,i){var n=t[0];e.each(a(n),function(r,a){s(a,n,r,i);var c=f[a.uniqId];c?c.domElem.index(n)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(r,t,a)})}function o(t,n,o,r,c){"boolean"==typeof o&&(c=r,r=o,o=i);var l=n[0];if(!l||l.dataset===i||"react"!==l.dataset.lego){o=s(o||a(l)[t],l,t);var u=o.uniqId;if(f[u])return f[u]._init();p[u]=p[u]?p[u].add(n):n;var h=l.parentNode;h&&11!==h.nodeType||e.unique(p[u]);var d=v[t]||S.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||r||o.live===!1){r&&n.addClass("i-bem");var m=new d(p[u],o,Boolean(r));return delete p[u],c&&c.apply(m,C.call(arguments,4)),m}}}function s(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=m[s]||(m[s]={});return r[n]||(r[n]=t),t}function r(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function a(t){var i=e.identify(t);return m[i]||(m[i]=c(t))}function c(t){var e,i=t.getAttribute("data-bem");return i?JSON.parse(i):e?e():{}}function l(t){delete m[e.identify(t)]}function u(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},_={},g={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,M=b.MOD_DELIM,E=b.ELEM_DELIM,k=RegExp("[^"+M+"]"+M+"("+y+")(?:"+M+"("+y+"))?$"),D=b.buildModPostfix,B=b.buildClass,C=Array.prototype.slice,w=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var S=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},o._blockInsideCache={},f[o._uniqId=i.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._findBlocks("find",t,e,!0);return this._blockInsideCache[i]=n,n},blockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(t,e)),n},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var i="string"==typeof e?e:B(e.block,e.modName,e.modVal),n="string"==typeof t?t:t.__bemElemName;return n+":"+i},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,s,r){if(!this.domElem)return r?null:[];s||(s=n,n=i);var a=n?"string"==typeof n?this.findElem(n):n:this.domElem,c="string"==typeof s,l=c?s:s.block||s.blockName,u="."+(c?l:B(l,s.modName,s.modVal))+(r?":first":""),h=a.filter(u);if(t&&(h=h.add(a[t](u))),r)return h[0]?o(l,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,i){var n=o(l,e(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,n,o,s){e.isFunction(o)&&(s=o,o=i);var r=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),s.apply(r,arguments)};return s?t.bind(r._buildEventName(n),o,(a.guid=s.guid=s.guid||e.guid++,a)):e.each(n,function(e,i){r.bindToDomElem(t,e,o,i)}),r},bindToDoc:function(t,e,i){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e,i)},bindToWin:function(t,n,o){return e.isFunction(n)&&(o=n,n=i),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,n,o)},bindTo:function(t,i,n,o){var s=arguments.length;switch(s){case 3:e.isFunction(n)&&(o=n,"object"===("undefined"==typeof i?"undefined":_typeof(i))&&(n=i,i=t,t=this.domElem));break;case 2:e.isFunction(i)?(o=i,i=t,t=this.domElem):"string"==typeof t||t instanceof e||(n=i,i=t,t=this.domElem);break;case 1:i=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n,o)},unbindFromDomElem:function(t,e,i){return t.unbind(this._buildEventName(e),i),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(d,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(h,t,e)},unbindFrom:function(t,i,n){var o=arguments.length;return 1===o?(i=t,t=this.domElem):2===o&&e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,i,n)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(t.indexOf(".")===-1)return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,i){var n=this,o=_[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var l=o.ctxs[c];l&&(e.each(l,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[c]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:i);return e||(o.length?o.forEach(function(t){n[t]=s[t]}):n=s),s},setMod:function(t,i,n){if(t&&"undefined"!=typeof n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem)[0];return o&&(n=o.getAttribute("class").match(this.__self._buildModValRE(t,i||e))),n?n[2]||!0:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(k);i[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s,"g"),l=""===i||i===!1;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),s=a;i!==!0&&(s+=M+i),(n===!0?c.test(o):(" "+o).indexOf(" "+a+M)>-1)?t.attr("class",o.replace(c,l?"":"$1"+s)):l||t.addClass(s)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i),this.__base.apply(this,arguments)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=D(i,n),a=[],c=e.map(function(t){return a.push("."+B(o,t,i,n)),t+s}),l=1===c.length,u=r(t,a.join(","));return t===this.domElem&&a.forEach(function(t,i){(this._elemCache[c[i]]=l?u:u.filter(t)).__bemElemName=e[i]},this),u},_elem:function(t,e,i){return this._elemCache[t+D(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,i,n))},this),o},dropElemCache:function(t,e,i){if(t){var n=D(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[B(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this,n=i.__self;i._isDestructing||(i._isDestructing=!0,i._needSpecialUnbind&&n.doc.add(n.win).unbind("."+i._uniqId),i.dropElemCache().domElem.each(function(t,i){var n=a(i);e.each(n,function(t,e){var n=f[e.uniqId];n?n._isDestructing||u(n,i):delete p[e.uniqId]}),l(i)}),t||i.domElem.remove(),i.__base(),delete f[i.un()._uniqId],delete i.domElem,delete i._elemCache)}},{scope:null,doc:d,win:h,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this){var i="undefined"==typeof e;if(i^t){e=this.live()!==!1;var n=this.getName(),o=this.live;this.live=function(){return this.getName()===n?e:o.apply(this,arguments)}}}return e},init:function(t,i,o){!t||e.isFunction(t)?(o=i,i=t,t=d):"string"==typeof t&&(t=e(t));var s=e.identify();return r(t,".i-bem").each(function(){n(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),n&&(w.call(r(n,".i-bem",o)).each(function(t,i){var n=a(this);e.each(n,function(t,e){if(e.uniqId){var n=f[e.uniqId];n?u(n,i):delete p[e.uniqId]}}),l(this)}),t||(o?n.empty():n.remove()))},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,o){var s=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){s._liveClassBind(t,e,n,o)});else{var r=g[i],a=e.identify(n);r||(r=g[i]={},d.bind(i,s._liveClassTrigger.bind(s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(n,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=g[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);r<a;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=g[t.type];if(i){var n=t.target,o=Object.keys(i);do for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(r.indexOf(" "+s+" ")!==-1){for(var c=!1,l=i[s].fns,u=0;u<l.length;u++)l[u].fn.apply(e(n),arguments)===!1&&(c=!0);if(c&&t.preventDefault(),c||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(s){var r=[n._name,((s.data||(s.data={})).domElem=e(this)).closest(n.buildSelector()),!0],a=o.apply(null,i?r.concat([t,s]):r);if(a&&!i&&t)return t.apply(a,arguments)}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){n&&!e.isFunction(n)||(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(B(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(B(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,n,o){n&&!e.isFunction(n)||(o=n,n=t,t=i);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(B(s._name,t),n,o)}),s):s._liveClassUnbind(B(s._name,t),n,o)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n,o)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("object"===("undefined"==typeof n?"undefined":_typeof(n))&&(e.isFunction(o)||e.isFunction(s))&&(n=this._buildModEventName(n)),"string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var c=a._buildCtxEventName(n),l=_[c]||(_[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=l.ctxs[t];i||(i=l.ctxs[t]={},++l.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){"object"===("undefined"==typeof i?"undefined":_typeof(i))&&e.isFunction(n)&&(i=this._buildModEventName(i));var s=this,r=_[i=s._buildCtxEventName(i)];return r&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=r.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],n&&!e.isEmptyObject(t)||(r.counter--,delete r.ctxs[i]))}),r.counter||delete _[i]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:i},extractParams:c,_buildModClassPrefix:function(t,e){return this._name+(e?E+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+M+t},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+M+"("+y+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+E+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+B(this._name,t,e,i)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(t){function e(){return window.innerHeight|0+n.outerHeight()}function i(){return window.innerWidth|0+n.outerWidth()}var n=t(window),o=e(),s=i();(t.event.special.resize||(t.event.special.resize={})).preDispatch=function(t){var n=e(),r=i();return(s!==r||o!==n)&&(o=n,void(s=r))}}(jQuery),jQuery.cookie=function(t,e,i){if("undefined"==typeof e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var c;"number"==typeof i.expires?(c=new Date,c.setTime(c.getTime()+24*i.expires*60*60*1e3)):c=i.expires,a="; expires="+c.toUTCString()}var l=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,l,u,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return n[t]||t})}function i(t,i){var n="";try{n=t(i)}catch(o){try{n=t(e(i))}catch(t){n=i}}return n}var n={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return i(decodeURI,t)}),decodeURIComponent:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return i(decodeURIComponent,t)})})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:this.__self.getCookie("yandex_login")?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))},getCookie:function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(i===-1)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(n===-1?e.substring(i):e.substring(i,n))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(i===-1)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(n===-1?e.substring(i):e.substring(i,n))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(i){return(i=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":i.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,e.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},i),i}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(i,n){i=i||document,n=n||".g-js",t(i).find(n).each(function(){var i=t(this),n=i.data("bem")||(this.onclick?this.onclick():{}),o=n.name||"",s=e.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t,e){var i={};/msie|trident/i.test(e)?i.ie=parseInt(e.split(/msie|rv:/i)[1],10):e.indexOf("Opera")!==-1&&(i.opera=parseInt(e.split(/Version\//i)[1],10));var n,o={},s={};(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=n[1]:(n=e.match(/Android\s+([\d.]+)/))?o.android=n[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(n=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.iphone=!0):(n=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.ipad=!0):(n=e.match(/Bada\/([\d.]+)/))?o.bada=n[1]:(n=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=this.__self.ios||this.__self.android,e=t.split("."),i=e.shift(),n=e.join("-"),o=this.getMod("platform");return{platform:o,major:i,subversion:n}}}},{ios:o.ios,iphone:s.iphone,ipad:s.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:i.ie,opera:i.opera})}(window,navigator.userAgent),$(function(){BEM.afterCurrentEvent(function(){BEM.channel("i-bem").trigger("start-init"),BEM.DOM.init(function(){BEM.channel("i-bem").trigger("init")})})}),function(t){t.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,i=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),n=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error([BEM.I18N("b-statcounter__metrika","JSERR_incorrectID"),"block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?n():i.push(n)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){
var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:",i="//mc.yandex.ru/metrika/watch.js";!t&&$.ajax({url:e+i,dataType:"script",cache:!0}),this.loadMetrika=function(){}}})}(BEM.DOM),BEM.DOM.decl("b-statcounter__metrika",{addCounter:function(t){var e=t&&t.id||"",i=BEM.blocks["i-global"].param("login");t.params||(t.params={}),i?($.cookie("noSessionLogin"+e)&&(t.params.sessionLogin=!0,$.cookie("noSessionLogin"+e,"",{path:"/"})),t.params.login=!0):($.cookie("noSessionLogin"+e,1,{path:"/"}),t.params.login=!1),this.__base.apply(this,arguments)}}),function(t,e,i){function n(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var o,s=0;s<c;s++)o=r[s],i[o]=e[o]||t[o]||n[o]||a[s];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||l||(i.buttons=u[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}function o(t,e){var n=i.Event(t),o=e.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){o(),s()},n}var s={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},r=Object.keys(s),a=r.map(function(t){return s[t]}),c=r.length,l=!1,u=[0,1,4,2];try{l=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var h=t.Map&&t.Map.prototype.forEach,d=h?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this.delete(t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},p={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return!!t.contains&&t.contains(e)},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=o(t,e);return i._target=i._target||e.target,i},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return i.event.trigger(t,null,e,!t.bubbles)},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};p.boundHandler=p.eventHandler.bind(p);var f,m,_={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,s=0,r=i.length;s<r&&(e=i[s]);s++){var a=Math.abs(n-e.x),c=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return n(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(d.has(this.POINTER_ID)&&this.cancel(t),d.set(this.POINTER_ID,t),p.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||p.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=d.get(this.POINTER_ID);e&&e.button===t.button&&(p.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||p.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||p.leaveOut(this.prepareEvent(t))},cancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){d.delete(this.POINTER_ID)}},g={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===d.size||1===d.size&&d.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,s=t.identifier+2;return n(o,i.extend({},t,{pointerId:s,target:p.captureInfo[s]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,i=this.scrollTypes;return t===i.EMITTER?e="none":t===i.XSCROLLER?e="X":t===i.YSCROLLER?e="Y":i.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;var e,i,n=this.firstTouchTarget;do{if(!n)break;if(e=n.getAttribute("touch-action"),null!==e)break;n=n.parentNode}while(n!==document);var o=this.touchActionToScrollType(e);if("none"===o)i=!1;else if("XY"===o||void 0===o)i=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y",c=Math.abs(s["client"+r]-this.firstXY[r]),l=Math.abs(s["client"+a]-this.firstXY[a]);i=c>=l}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,o=t.length;n<o&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(d.size>=e.length){var i=[];d.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){d.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),p.over(t),p.enter(t),p.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=d.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;p.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(p.leaveOut(i),p.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(p.up(t),p.out(t),p.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){p.cancel(t),p.out(t),p.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){d.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=_.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},v={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){p.listen(t,this.events)},unregister:function(t){p.unlisten(t,this.events)},prepareEvent:function(t){var e=n(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){d.delete(t)},MSPointerDown:function(t){d.set(t.originalEvent.pointerId,t),p.down(this.prepareEvent(t))},MSPointerMove:function(t){p.move(this.prepareEvent(t))},MSPointerUp:function(t){p.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){p.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){p.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){p.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){p.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){p.fireEvent("lostpointercapture",this.prepareEvent(t))}},b=function(t){if(!d.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(f=function(t,e){t.setPointerCapture(e)},m=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(f=function(t,e){b(e),t.msSetPointerCapture(e)},m=function(t,e){b(e),t.msReleasePointerCapture(e)}):(f=function(t,e){b(e),p.setCapture(e,t)},m=function(t,e){b(e),p.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){f(this[0],t)},releasePointerCapture:function(t){m(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,i="pointer"+t;e[i]||(e[i]={}),e[i].props=r.concat(e[i].props||[])}):(delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?p.registerSource("ms",v):(p.registerSource("mouse",_),void 0!==t.ontouchstart&&p.registerSource("touch",g)),p.register(document)))}(window,document,jQuery),function(t,e){function i(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),p))}function n(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var s=m[o],r=s.target===t.target;if(!s[n]&&(r||!(Math.abs(e-s.clientX)>d||Math.abs(i-s.clientY)>d))&&(r||document.elementFromPoint(s.clientX,s.clientY)!==s.target)){t._sourcePoint=s,s[n]=t;break}}_.push(t),setTimeout(Array.prototype.shift.bind(_),p)}}function s(t){for(var e=0;e<_.length;e++)if(_[e]===t)return _[e]._sourcePoint}function r(t){var e=s(t);return Boolean(e)&&e.target!==t.target}function a(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}if(!e.event.special.pointerclick){var c,l=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,u="touchAction"in document.documentElement.style,h=10,d=25,p=900,f=250,m=[],_=[],g=null,v=null,b=u?function(t){function e(t){return!(!t||t===document.documentElement)&&("manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement))}return e(t)}:function(){return!1};l?(c={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!b(t.target)))if("pointerdown"===e)v=t;else if("pointermove"===e&&v&&(v.target!==t.target||n(v,t)))v=null;else if("pointerleave"===e||"pointercancel"===e)v=null;else if("pointerup"===e){if(i(t),!v)return;if(!(t.timeStamp-v.timeStamp>f))return g||(g=setTimeout(function(){g=v=null})),a.apply(this,arguments);v=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),r(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):c={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(c)},teardown:function(){e(this).off(c)}}}}(window,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=o),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i&&i.prop("disabled",e)})},pressed:function(t,e){return!this.hasMod("disabled")&&void this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return!this.isDisabled()&&(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return!this.isDisabled()&&void(!e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),function(){function t(){i.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),i=$(document.documentElement),n=0,o=!1;document.documentMode<=11?i.on("focusin",function(e){var i=e.originalEvent;!i||i.fromElement||i.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),i.addClass("utilityfocus").on({focusin:function(){i.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(n),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(n),n=setTimeout(function(){o=!1},600)}})}(),$.extend({util:{}}),function(){function t(t){return"[object Object]"===n.call(t)}function e(i,n,o){var s,r;i=Object(i),n=Object(n);for(s in n)r=o&&o(i[s],n[s],s),void 0!==r?i[s]=r:t(i[s])&&t(n[s])?i[s]=e(i[s],n[s],o):i[s]=n[s];return i}function i(t,i){return e(t,i,function(t,e,i){if("mix"===i)return[].concat(t,e)})}var n=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:i})}(),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return!this.hasMod("disabled")&&void(this._focused||(this._focus(),this.trigger("focus")))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var i=this._getControl();i.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),i.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex)},yes:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",-1),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"link",modName:"has-metrika",modVal:"yes"},{_sendMetrika:function(){var t=this.params,e=t.metrikaParams,i=t.metrikaGoal;i?BEM.blocks["fi-metrika"].reachGoal(i,e):e&&BEM.blocks["fi-metrika"].setParams(e)}},{live:function(){return this.liveBindTo({modName:"has-metrika",modVal:"yes"},"pointerclick",function(t){this._sendMetrika(t)}),this.__base()}}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),i=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",i?"&yu="+i:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="…";return function(e,i,n){return e.length>i+n?e.substring(0,i-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this.elem("name").length){var t=this,e=t.elemParams("name");e.isUglyUserName&&BEM.blocks["i-user-services"].get(function(i){var n=BEM.blocks["i-common__string"].cleverSubstring,o=BEM.blocks["i-common__string"].escapeHTML,s=Object(i.displayName).name||i.login,r=n(s,e.maxLength,e.maxLengthRelative);r='<span class="user__first-letter">'+o(r.charAt(0))+"</span>"+o(r.slice(1)),t.elem("name").html(r),t.trigger("update-name")})}}}},toggleCollapsed:function(t){return this.toggleMod("hide-name","yes","",t)}}),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1===e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){return this._retpath=this.params._retpath,this._isAuthorized=Boolean(this.params._uid),!this._isAuthorized||(this._currentAccount=this.findBlockOn("current-account","user-account"),this._popup=this.findBlockInside("popup2").setAnchor(this._currentAccount),this._menu=this.findBlockInside("menu"),this._exitItem=this.elem("menu-item","action","exit"),this._plusItem=this.elem("menu-item","action","plus"),this._addItem=this.elem("add-account"),this._accountsContainer=this.findElem(this._menu.domElem,"accounts-container"),this._menuCounter=this.findElem("menu-counter"),this.bindTo("menu-item","pointerclick",this._onMenuItemClick),this.bindTo(this._exitItem,"pointerclick",this._onLogout),BEM.blocks["user-account"].on(this._accountsContainer,"click",this._onAccountClick,this),void BEM.blocks["user-account"].on(this._accountsContainer,"logout",this._processLogout,this))}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0),this._popup.setMod("visible","yes").on("beforeClose",this._onPopupClose,this),this._setMaxHeight(),this.bindToWin("resize orientchange",this._setMaxHeight),this._popup.on("beforeOpen",function(){this._onPopupOpen(),this._popup.un("beforeOpen",this._onPopupOpen,this)},this)},"":function(){var t=this.trigger("beforeClose");return(!t.isDefaultPrevented||!t.isDefaultPrevented())&&(this.unbindFromWin("resize orientchange",this._setMaxHeight),this.domElem.attr("aria-expanded",!1),void this._popup.delMod("visible").un("beforeClose",this._onPopupClose,this))}}},destruct:function(){return this._isAuthorized&&(BEM.blocks["user-account"].un(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].un(this._accountsContainer,"logout",this._processLogout,this)),this.__base.apply(this,arguments)},setUnreadCount:function(t){var e=this._menu.findBlockInside("user-account");return this._currentAccount.setCounter(t),e&&e.hasMod("has-ticker")&&e.setCounter(t),this._menuCounter&&(t>0?this.delMod(this._menuCounter,"state","empty"):this.setMod(this._menuCounter,"state","empty"),this._menuCounter[0].innerText=t),this},setRetpath:function(t){this._retpath=t;var e=encodeURIComponent(t),i=function(t,i){var n=$(i),o=n.attr("href");if(o){var s=o.replace(/([\&\?]retpath=)[^\&]*/,"$1"+e);s!==o&&n.attr("href",s)}};return $().add(this._menu&&this._menu.findElem("item")).add(this.findElem("current-account")).add(this.findElem("a11y-exit")).add(this.findElem("enter")).add(this._addItem).each(i),this},getPopup:function(){return this._popup},getMenu:function(){return this._menu},getCurrentAccount:function(){return this._currentAccount},_changeUser:function(t){var e=this.params._passportHost+"/passport?mode=embeddedauth";$('<form method="POST" action="'+e+'"><input type="hidden" name="action"  value="change_default"><input type="hidden" name="uid"     value="'+t+'"><input type="hidden" name="retpath" value="'+this._retpath+'"><input type="hidden" name="yu"      value="'+this.params._yu+'"></form>').appendTo("body").submit()},_onCurrentAccountClick:function(t,e){t.block===this._currentAccount&&(e.domEvent.preventDefault(),this.toggleMod("opened","yes"),this.trigger("current-account-click"))},_onAccountClick:function(t,e){if(!e.isLogout){var i=this.elemParams(t.block.domElem).uid;this._changeUser(i)}},_onPopupClose:function(){this.delMod("opened")},_onPopupOpen:function(){this.trigger("beforeOpen")},_processLogout:function(t,e){var i=this.elemParams(t.target.domElem).uid;i&&this.trigger("logout-click",{uid:i,account:t.target})},_onMenuItemClick:function(t){this.trigger("menu-item-click")},_onLogout:function(t){this.trigger("logout")},_setMaxHeight:function(){var t=BEM.DOM.win,e=this.params.menuMaxHeight;e||(e=t.height()-this.domElem.offset().top+t.scrollTop()),this._menu.domElem.css("max-height",e)},getDefaultParams:function(){return{menuMaxHeight:0}}},{live:function(){this.liveInitOnBlockInsideEvent("init","user-account"),this.liveInitOnBlockInsideEvent("click","user-account",this.prototype._onCurrentAccountClick),this.liveBindTo("enter","pointerclick",function(t){this.trigger("login")})}}),$.extend({debounce:function t(e,i,n,o){var s,t=function(){var t=arguments;o=o||this,n&&!s&&e.apply(o,t),clearTimeout(s),s=setTimeout(function(){n||e.apply(o,t),s=null},i)};return 3===arguments.length&&"boolean"!=typeof n&&(o=n,n=!1),t.stop=function(){clearTimeout(s),s=null},t},throttle:function t(e,i,n){var o,s,r,t=function(){s=arguments,r=!0,n=n||this,o||function(){r?(e.apply(n,s),r=!1,o=setTimeout(arguments.callee,i)):o=null}()};return t.stop=function(){clearTimeout(o),o=null},t}}),function(t){var e=t.innerWidth>t.innerHeight,i=t.innerWidth,n=400,o=$.throttle(function(){var n=t.innerWidth,o=t.innerHeight,s=n>o;s!==e&&n!==i&&($(t).trigger("orientchange",{landscape:s,width:n,height:o}),e=s,i=n)},n);BEM.DOM.win.bind("resize",o),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.bindToWin("orientchange",this._onOrientChange,this).__base.apply(this,arguments)}}},_onOrientChange:function(t,e){var i=this.__self,n=document.documentElement,o=n.className,s="i-ua_orient_"+(e.landscape?"landscape":"portrait");o.indexOf(s)===-1&&(n.className=o.replace(/\bi-ua_orient_\w+\b/,s)),i.width=e.width,i.height=e.height,i.landscape=e.landscape}},{width:t.innerWidth,height:t.innerHeight,landscape:e})}(window),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return!this.hasMod("disabled")&&void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){(!this._preventClick||t.detail>0)&&this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.prvntKeys)&&t.preventDefault(),i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){
this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("mousedown",function(t){t.preventDefault()}),this.__base()}}),BEM.decl("fi-metrika",{onSetMod:{js:function(){var t=this.params.counterId,e=$.Deferred(),i="yaCounter"+t;if(this._counterPromise=e.promise(),window[i])e.resolve(window[i]);else{var n="yacounter"+t+"inited";$(document).one(n,function(){e.resolve(window[i])})}}},run:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this._counterPromise.then(function(e){e[t].apply(e,i)})},reachGoal:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.run.apply(this,["reachGoal"].concat(e))},setParams:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.run.apply(this,["params"].concat(e))}},{counters:[],getCounter:function(t){return this.counters[t]||(this.counters[t]=BEM.create(this._name,{counterId:t})),this.counters[t]},getDefaultCounter:function(){var t=BEM.blocks["i-global"].param("metrikaId");return this.getCounter(t)},reachGoal:function(){var t;(t=this.getDefaultCounter()).reachGoal.apply(t,arguments)},setParams:function(){var t;(t=this.getDefaultCounter()).setParams.apply(t,arguments)}}),BEM.DOM.decl({block:"button2",modName:"has-metrika",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("click",this._sendMetrika)}},_sendMetrika:function(){var t=this.params,e=t.metrikaParams,i=t.metrikaGoal;i?BEM.blocks["fi-metrika"].reachGoal(i,e):e&&BEM.blocks["fi-metrika"].setParams(e)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),void 0!==this._url&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.DOM.decl("user-account",{setCounter:function(t){var e=this.findBlockInside("ticker");e&&e.val(t)},_onClick:function(t){var e={domEvent:t};this.isLogoutClick&&(e.isLogout=!0,this.isLogoutClick=!1),this.trigger("click",e)},_onMouseOver:function(t){this.setMod("hovered","yes").bindTo("mouseleave",this._onMouseLeave)},_onMouseLeave:function(){this.delMod("hovered").unbindFrom("mouseleave")},_onFocusIn:function(t){this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusOut)},_onFocusOut:function(){this.trigger("blur").delMod("focused").unbindFrom("focusout")},_onLogoutClick:function(){this.isLogoutClick=!0,this.trigger("logout")}},{live:function(){this.liveBindTo("pointerclick",this.prototype._onClick),this.liveBindTo("focusin",this.prototype._onFocusIn),this.liveBindTo("mouseover",this.prototype._onMouseOver),this.liveBindTo("logout","pointerclick",this.prototype._onLogoutClick)}}),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),function(t){var e=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){var n="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";i=t.matchMedia(n).matches}else i=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:i})}(window),BEM.DOM.decl({block:"user-account",modName:"has-ticker",modVal:"yes"},{getTicker:function(){return this.findBlockOn("ticker","ticker")}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount;return this._count=t,this.elem("value").attr("title",t).text(t>e?e:t),t?this.show():this.hide(),this}}),BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=void 0,this._zIndex=null,this._zIndexGroupLevel=null,this._scope=BEM.DOM.scope,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._isAttachedToScope||(this._scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup().bindTo("pointerdown pointerclick",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup().unbindFrom("pointerdown pointerclick")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setScope:function(t){return this._scope=t,this._isAttachedToScope=!1,this},setContent:function(t){return BEM.DOM.update(this.domElem,t),this},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),t},_setPreventHideByClick:function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)},_bindToParentPopup:function(){var t=this._getParentPopup();return t&&(t.on("beforeClose",this._onParentPopupClose,this),t.addChild&&t.addChild(this)),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=void 0,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t&&t.splice(t.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}}},{live:!0,_visiblePopupsZIndexes:(BEM.blocks.popup||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3}),BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._lastPopupDrawingCss={left:void 0,top:void 0,zIndex:void 0,display:void 0},this._lastTailDrawingCss={left:void 0,top:void 0},this._initialVisible=this.hasMod("visible")}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScollAndResize).redraw(!0)},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},_draw:function(){function t(t,e){var i=!1;return Object.keys(e).forEach(function(n){var o=e[n];t[n]!==o&&(t[n]=o,i=!0)}),i}var e=this._calcBestDrawingParams();return this.setMod("direction",e.direction),t(this._lastPopupDrawingCss,this._calcDrawingCss(e))&&this.domElem.css(this._lastPopupDrawingCss),t(this._lastTailDrawingCss,this._calcTailDrawingCss(e))&&this.elem("tail").css(this._lastTailDrawingCss),this},redraw:function(t){return this.hasMod("visible","yes")||t?(this.setMod("outside","yes")._draw().delMod("outside"),this):this},_calcDrawingCss:function(t){var e,i=this._scope;return i.is(BEM.DOM.scope)||(e=i.offset(),t.top-=e.top,t.left-=e.left),{left:t.left,top:t.top}},_calcTailDrawingCss:function(t){return t.tail},calcPossibleDrawingParams:function(){var t=this._calcTargetDimensions(),e=this._calcViewportDimensions(),i=this._calcOffsets();return this.params.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return this._checkMainDirection(n,"bottom")?(o.top=t.top+t.height+i.main,o.height=e.bottom-o.top-i.viewport):this._checkMainDirection(n,"top")?(o.height=t.top-e.top-i.main-i.viewport,o.top=t.top-o.height-i.main):(this._checkSecondaryDirection(n,"center")?(o.height=e.bottom-e.top-2*i.viewport,o.top=t.top+(t.height-o.height)/2):this._checkSecondaryDirection(n,"bottom")?(o.height=t.top+t.height-e.top-i.secondary-i.viewport,o.top=t.top+t.height-o.height-i.secondary):this._checkSecondaryDirection(n,"top")&&(o.top=t.top+i.secondary,o.height=e.bottom-o.top-i.viewport),this._checkMainDirection(n,"left")?(o.width=t.left-e.left-i.main-i.viewport,o.left=t.left-o.width-i.main):(o.left=t.left+t.width+i.main,o.width=e.right-o.left-i.viewport)),this._checkSecondaryDirection(n,"right")?(o.width=t.left+t.width-e.left-i.secondary-i.viewport,o.left=t.left+t.width-o.width-i.secondary):this._checkSecondaryDirection(n,"left")?(o.left=t.left+i.secondary,o.width=e.right-o.left-i.viewport):this._checkSecondaryDirection(n,"center")&&this._checkMainDirection(n,"top","bottom")&&(o.width=e.right-e.left-2*i.viewport,o.left=t.left+t.width/2-o.width/2),o},this)},_calcBestDrawingParams:function(){for(var t,e,i,n,o,s,r=this._calcPopupDimensions(),a=this._calcTargetDimensions(),c=this._calcViewportDimensions(),l=this.params.directions,u=l.length,h=0;h<u&&(t=l[h],e=this._calcPos(t,a,r),i=this._calcViewportFactor(e,c,r),(0===h||i>s||!s&&this.hasMod("direction",t))&&(n=t,s=i,o=e),!(s>this.__self.VIEWPORT_ACCURACY_FACTOR));h++);return{direction:n,left:o.left,top:o.top,tail:this._calcTailPos(n,a,r,o)}},_calcPopupDimensions:function(){var t=this.domElem.outerWidth(),e=this.domElem.outerHeight();return{width:t,height:e,innerWidth:this.domElem.innerWidth(),innerHeight:this.domElem.innerHeight(),area:t*e}},_calcTailDimension:function(){var t=this.elem("tail"),e=this.params.tailSize||t.outerWidth();return t.length>0&&"none"!==t.css("display")?e:0},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var t=BEM.DOM.win,e=t.scrollTop(),i=t.scrollLeft(),n=t.width(),o=t.height();return{top:e,left:i,bottom:e+o,right:i+n}},_calcPos:function(t,e,i){var n={},o=this._calcOffsets();return this._checkMainDirection(t,"bottom")?n.top=e.top+e.height+o.main:this._checkMainDirection(t,"top")?n.top=e.top-i.height-o.main:this._checkMainDirection(t,"left")?n.left=e.left-i.width-o.main:this._checkMainDirection(t,"right")&&(n.left=e.left+e.width+o.main),this._checkSecondaryDirection(t,"right")?n.left=e.left+e.width-i.width-o.secondary:this._checkSecondaryDirection(t,"left")?n.left=e.left+o.secondary:this._checkSecondaryDirection(t,"bottom")?n.top=e.top+e.height-i.height-o.secondary:this._checkSecondaryDirection(t,"top")?n.top=e.top+o.secondary:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?n.left=e.left+e.width/2-i.width/2:this._checkMainDirection(t,"left","right")&&(n.top=e.top+e.height/2-i.height/2)),n},_calcTailPos:function(t,e,i,n){var o={},s=this._calcTailDimension()/2,r=this.params.tailOffset,a=this.params.tailSize;return this._checkMainDirection(t,"bottom")?o.top=-s:this._checkMainDirection(t,"top")?o.top=Math.floor(i.innerHeight-s):this._checkMainDirection(t,"left")?o.left=Math.floor(i.innerWidth-s):this._checkMainDirection(t,"right")&&(o.left=-s),this._checkSecondaryDirection(t,"right")?o.left=i.innerWidth-Math.ceil(Math.min(i.innerWidth,e.width)/2)-s-r:this._checkSecondaryDirection(t,"left")?o.left=Math.ceil(Math.min(i.innerWidth,e.width)/2)-s+r:this._checkSecondaryDirection(t,"bottom")?o.top=i.innerHeight-Math.ceil(Math.min(i.innerHeight,e.height)/2)-s-r:this._checkSecondaryDirection(t,"top")?o.top=Math.ceil(Math.min(i.innerHeight,e.height)/2)-s+r:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?o.left=Math.ceil(i.innerWidth/2)-s+r:o.top=Math.ceil(i.innerHeight/2)-s+r),{top:o.top,left:o.left,width:a,height:a}},_calcViewportFactor:function(t,e,i){var n=this.params.viewportOffset,o=Math.max(t.left,e.left+n),s=Math.min(t.left+i.width,e.right-n),r=Math.max(t.top,e.top+n),a=Math.min(t.top+i.height,e.bottom-n);return o<s&&r<a?(s-o)*(a-r)/i.area:0},_calcOffsets:function(){var t=this.params,e=this._calcTailDimension();return{main:t.mainOffset>=0&&e>0?Math.max(t.mainOffset,Math.round(e*Math.SQRT1_2)):t.mainOffset,secondary:t.secondaryOffset,viewport:t.viewportOffset}},_checkMainDirection:function(t,e,i){return 0===t.indexOf(e)||i&&0===t.indexOf(i)},_checkSecondaryDirection:function(t,e){return t.indexOf("-"+e)>0},_checkDirection:function(t,e){return t.indexOf(e)>=0},_onWinScollAndResize:function(t){this.hasMod("visible","yes")&&this._draw()},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,tailOffset:0,directions:this.__self.AVAILABLE_DIRECTIONS})},_setVisible:function(){this._initialVisible&&(this._initialVisible=!1,this.delMod("visible").setMod("visible","yes"))}},{VIEWPORT_ACCURACY_FACTOR:.99,AVAILABLE_DIRECTIONS:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"]}),BEM.DOM.decl({block:"popup2",modName:"target"},{getDefaultParams:function(){return _extends({},this.__base.apply(this,arguments),{directions:["bottom-left","bottom-center","bottom-right"]})}}),function(t){function e(t,e){return t.addClass("i-bem "+e).bem(e)}BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._destructor=null,this._fixedAnchor=void 0}},visible:{yes:function(){this.bindToDoc("documentchange",this._onWinScollAndResize),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("documentchange")}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(t){return this._unbindFromDestructor()._unbindFromParentPopup(),this._anchor=t instanceof BEM.DOM?t.domElem:t,this._destructor=e(this._anchor,"_"+this.__self.getName()+"-destructor"),this._fixedAnchor=void 0,this._bindToDestructor(),this._setVisible(),this.hasMod("visible")?this._recaptureZIndex()._bindToParentPopup().redraw():this._zIndexGroupLevel=null,this},_calcTargetDimensions:function(){var t=this._anchor,e=this._getOffsetOf(t);return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}},_getOffsetOf:function(t){var e=t.offset();return"pageYOffset"in window&&(e.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),e.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft)),e},_calcDrawingCss:function(e){var i=this.__base.apply(this,arguments);if("undefined"==typeof this._fixedAnchor&&(this._fixedAnchor=this._getFirstFixedParent(this._anchor)),this._fixedAnchor){var n=0,o=0,s=this._getFirstFixedParent(this._scope);if(s){var r=s.offset();n=r.left,o=r.top}i.left-=t(window).scrollLeft()-n,i.top-=t(window).scrollTop()-o}return t.extend(i,{position:this._fixedAnchor?"fixed":""})},_getFirstFixedParent:function(e){for(e=e[0];e;){if(1===e.nodeType&&"fixed"===t(e).css("position"))return t(e);e=e.parentNode}return null},_calcZIndexGroupLevel:function(){var t=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t)},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){if(void 0===this._parentPopup){var t=this._anchor.closest(".popup, .popup2");this._parentPopup=this.findBlockOn(t,this.__self.getName())||this.findBlockOn(t,"popup")}return this._parentPopup}});var i=BEM.DOM;i.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery),BEM.DOM.decl({block:"popup2",modName:"hiding",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchorParents=null,this._isAnchorVisible=void 0,this._updateIsAnchorVisible=$.throttle(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL,this)}},visible:{yes:function(){this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible.stop(),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=void 0}}},_getAnchorParents:function(){for(var t,e=this;e&&e._anchor;)t=e,e=e._getParentPopup();return $(t._anchor).parents()},setAnchor:function(t){return this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._isAnchorVisible=void 0,this.hasMod("visible")?(this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents()):this._anchorParents=null,this},_unbindFromDestructor:function(){return this._updateIsAnchorVisible.stop&&this._updateIsAnchorVisible.stop(),this.__base.apply(this,arguments)},_calcDrawingCss:function(t){var e=this.__base.apply(this,arguments);return"undefined"==typeof this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),$.extend(e,{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var t=this._anchor,e=this._getOffsetOf(t),i=e.left,n=e.top,o=i+t.outerWidth(),s=n+t.outerHeight(),r=this.getMod("direction"),a=Math.floor(this._checkDirection(r,"top")?n:s),c=Math.floor(this._checkDirection(r,"left")?i:o),l=!0;return this._anchorParents.each(function(t,e){if("BODY"===e.tagName)return!1;e=$(e);var i=/scroll|hidden|auto/,n=i.test(e.css("overflow-y")),o=i.test(e.css("overflow-x"));if(n||o){var s=this._getOffsetOf(e),r=Math.floor(s.top);if(a<r||r+e.outerHeight()<a)return l=!1;var u=Math.floor(s.left);return l=c>=u&&u+e.outerWidth()>=c}}.bind(this)),l},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._updateIsAnchorVisible.stop(),this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScollAndResize:function(){this.hasMod("visible")&&(this.__base.apply(this,arguments),this._updateIsAnchorVisible())},_updateIsAnchorVisible:function(){if(this.domElem){var t=this._calcIsAnchorVisible();t!==this._isAnchorVisible&&(this._isAnchorVisible=t,this.redraw())}}},{UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100}),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerclick",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerclick").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("target","anchor")&&(this._anchor[0]===t.target||this._anchor.find(t.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:(BEM.blocks.popup||{})._visiblePopupsStack||[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].__self.getName()===this.getName()&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}}),BEM.DOM.decl({block:"menu",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.elem("item").attr("id",function(t,e){return e||$.identify()}),this._val=this.getVal()}},disabled:function(t,e){this.__base.apply(this,arguments),this.setMod(this.elem("item"),t,e)}},onElemSetMod:{item:{hovered:{yes:function(t){return!this.hasMod(t,"disabled")&&(this.delMod(this.elem("item","hovered","yes"),"hovered"),this.domElem.attr("aria-activedescendant",t.attr("id")),void this.trigger("item-hover",{item:t}))},"":function(){this.domElem.removeAttr("aria-activedescendant"),this.trigger("item-hover",{})}},checked:function(t,e,i){this.domElem.attr("aria-selected",Boolean(i))},disabled:{yes:function(){this.delMod("hovered"),this.domElem.attr("aria-disabled",!0)},"":function(){this.domElem.attr("aria-disabled",!1)}}}},_onChange:function(){var t=this._val,e=this.getVal();return t!==e&&(this._val=e,this.trigger("change",{prevVal:t,currVal:e})),this},getItems:function(t,e){return this.elem("item",t,e).get().map(function(t){return $(t)})},setContent:function(t){return BEM.DOM.update(this.domElem,t),this.reset(),this},getVal:function(){},reset:function(){this.dropElemCache()},_onItemEnter:function(t,e){this.setMod(t,"hovered","yes")},_onItemLeave:function(t,e){this.delMod(t,"hovered")},_onItemFocusin:function(t,e){this.setMod(t,"hovered","yes")},_onFocusout:function(t){this.__base.apply(this,arguments),this.delMod(this.elem("item","hovered","yes"),"hovered")},_onItemClick:function(t,e,i){this.trigger("click",{item:t,source:i.source})}},{live:function(){return this.liveBindTo("item","pointerover pointerout",function(t){var e=t.data.domElem;this.hasMod(e,"disabled","yes")||e[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onItemEnter(e,t):this._onItemLeave(e,t))}).liveBindTo("item","pointerclick",function(t){var e=t.data.domElem;this.hasMod(e,"disabled")||this._onItemClick(e,t,{source:"pointer"})}).liveBindTo("item","focusin",function(t){var e=t.data.domElem;this.hasMod(e,"disabled")||this._onItemFocusin(e,t)}).liveBindTo("focusout",function(t){this._onFocusout(t)}),this.__base()}}),BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){return this.__base.apply(this,arguments),!this.hasMod("type","navigation")&&(this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),void this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress))},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(t){for(var e,i,n=t?this.getItems().reverse():this.getItems(),o=0,s=!1;i=n[o];o++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))s=!0;else{if(s){e=i;break}e||(e=i)}e&&(this.setMod(e,"hovered","yes"),this._scrollToItem(e))},hoverText:function(t,e){for(var i,n=this.getItems(),o=n.length,s=this._normalizeText(t),r=e||0;r<o;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(s))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);r++,r===n.length&&(r=0,o=e)}},_normalizeText:function(t){return t.toLowerCase().replace(/ё/,"е")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_scrollToItem:function(t){var e=this.domElem.offset().top,i=t.offset().top,n=0;i<e?n=i-e:(n=i+t.outerHeight()-e-this.domElem.outerHeight(),n<0&&(n=0)),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(t,e){var i=BEM.blocks.keycodes,n=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||((i.is(n,"UP","DOWN")||!e&&n===i.SPACE)&&t.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||e.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),t,{source:"keyboard"})},_onKeypress:function(t){var e,i,n=Number(new Date),o=t.charCode,s=String.fromCharCode(o).toLowerCase(),r=s===this._lastChar&&1===this._searchTerm.length,a=this.getItems();return o<=BEM.blocks.keycodes.SPACE||t.ctrlKey||t.altKey||t.metaKey?void(this._lastTime=n):(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=s:this._searchTerm=(this._searchTerm||"")+s,this._lastChar=s,this._lastTime=n,e=this.elem("item","hovered","yes"),i=$($.map(a,function(t){return t.get()})).index(e),i=i>=0?i:0,r&&0===this._normalizeText(e.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),void this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500}),BEM.DOM.decl({block:"user2",modName:"fetch-accounts",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._accountsElem=this.findElem(this._menu.domElem,"accounts"),this._accountsSpin=this.findBlockInside(this._accountsElem,"spin2"),this._accountsDataProvider=BEM.create(this.params.accountsDataProvider,{callbackCtx:this,accountsUrl:this.params.accountsUrl}),this._fetchAccounts()}}},onElemSetMod:{accounts:{loading:function(t,e,i){this._accountsSpin.setMod("progress",i),this._popup.redraw()}}},_fetchAccounts:function(){var t=this.hasMod("has-logout"),e=void 0!==this.params._plus;this.setMod(this._accountsElem,"loading","yes"),this._accountsDataProvider.get({yu:this.params._yu},function(i){var n="",o=!0,s={avatarHost:this.params._avatarHost||"",maxLength:this.params.maxLength||"",provider:this.getMod("provider")||""};if(i.accounts){var r=this.params.accountsMax,a=i.accounts.reduce(function(t,e){return t.length<r&&e.uid!==i.default_uid&&t.push(e),t},[]).map(this.__self.accountToBemjson(s)).map(function(i){return t&&(i.mods=$.extend(i.mods||{},{"has-logout":"yes"})),e||(i.pic.plus=!1),{block:"menu",elem:"item",content:i}});n=BEMHTML.apply(a),o=Boolean(i["can-add-more"])}this.findElem(this._accountsElem,"accounts-container").html(n),this.updateCounters&&this.updateCounters(),this.toggleMod(this.findElem(this._accountsElem,"add-account"),"hidden","","yes",o),this.delMod(this._accountsElem,"loading")})},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{accountsDataProvider:"user2__accounts-provider",accountsMax:this._params.accountsMax||5,maxLength:this._params.maxLength||16})}},{accountToBemjson:function(t){return function(e){var i=Boolean(e.displayName.default_avatar),n=e.attributes.has_plus;return{block:"user-account",mix:[{block:"user2",elem:"account",js:{uid:e.uid}}],mods:{provider:t.provider},pic:{avatarId:e.displayName.default_avatar,plus:n},name:e.displayName.name,subname:e.defaultEmail||e.displayName.social,ticker:i?{count:0,maxCount:99}:void 0,avatarHost:t.avatarHost,maxLength:t.maxLength}}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl("i-request",{get:function(t){t=$.extend({},this._getPageContext(),t);for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return this.__base.apply(this,[t].concat(i))},_getPageContext:function(){return{context:BEM.blocks["i-global"].param("pageContext")}}}),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.decl({block:"user2__accounts-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{url:this._params.accountsUrl,timeout:5e3})}}),BEM.DOM.decl({block:"user2",modName:"fetch-unread",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._unreadDataProvider=BEM.create(this.params.unreadDataProvider,{callbackCtx:this,exportHost:this.params.exportHost}),this._fetchUnread()}}},_fetchUnread:function(){this._unreadDataProvider.get({key:this.params._yu},this._onFetchUnreadSuccess)},_onFetchUnreadSuccess:function(t){this.setUnreadCount(t.unread||0)},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{unreadDataProvider:"user2__unread-provider"})}}),BEM.decl({block:"user2__unread-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){var t=this._params.exportHost||"https://export.yandex.ru";return $.extend(this.__base.apply(this,arguments),{url:t+"/for/unread.xml",cache:!1})}}),BEM.blocks["cf-helpers"]={getStorage:function(t){var e=null;
try{e="sessionStorage"===t?window.sessionStorage:window.localStorage,e.setItem("foo","bar"),e.removeItem("foo")}catch(t){return!1}return{storage:e,setItem:function(t,i){try{return"string"!=typeof i&&(i=JSON.stringify(i)),e.setItem(t,i),!0}catch(t){}return!1},getItem:function(t){try{return e.getItem(t)}catch(t){}return!1},getData:function(t){try{return JSON.parse(e.getItem(t))}catch(t){}return!1},removeItem:function(t){try{return e.removeItem(t),!0}catch(t){}return!1}}},buildPath:function(t){var e=BEM.blocks["i-global"].param("basePath");return(e+"/"+t).replace(/\/+/g,"/")},getDraftStorageKey:function(t){var e="form_draft_"+t;return window.name&&window.parent!==window&&(e+="_name_"+window.name),e},postMessage:function(t){var e=window.parent,i=window.name,n=t;i&&("string"==typeof n?(e.postMessage(n,"*"),n={name:i,message:t}):n.name=i),"string"!=typeof n&&(n=JSON.stringify(n)),e.postMessage(n,"*")}},BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlockOn("i-global"),this._initServices()}},_initServices:function(){BEM.create("i-update-secretkey"),BEM.create("auth-cookie")}}),function(t,e){function i(){O=t.getVarsList(),t.getSetting("sendClientUa")&&O.push("1042="+encodeURIComponent(navigator.userAgent))}function n(){F=O.concat(["143.2129="+ct])}function o(t){function e(){removeEventListener("DOMContentLoaded",e),removeEventListener("load",e),t()}"loading"===document.readyState?(addEventListener("DOMContentLoaded",e),addEventListener("load",e)):t()}function s(){ct&&setTimeout(function(){t.sendTimeMark=l,t.sendResTiming=p,t.timeEnd=h;for(var e=t._defRes;e.length;){var i=e.shift();p(i[0],i[1])}for(var n=t._defTimes;n.length;){var o=n.shift();l(o[0],o[1],!1,o[2])}Object.keys(ot).forEach(function(t){d(t)}),a(),c(),t.getSetting("sendAutoElementTiming")&&_t(),B(),"complete"===document.readyState?r():addEventListener("load",r)},0)}function r(){t.getSetting("disableOnLoadTasks")||(removeEventListener("load",r),f(),_(),y(),M(),k())}function a(){var e=J.domContentLoadedEventStart,i=J.domContentLoadedEventEnd;if(0===e&&0===i)return void setTimeout(a,50);var n=O.concat(["2129="+ct,"1036="+(J.domainLookupStart-ct),"1037="+(J.domainLookupEnd-J.domainLookupStart),"1038="+(J.connectEnd-J.connectStart),J.secureConnectionStart&&"1383="+(J.connectEnd-J.secureConnectionStart),"1039="+(J.responseStart-J.connectEnd),"1040="+(J.responseEnd-J.responseStart),"1040.906="+(J.responseEnd-J.domainLookupStart),"1310.2084="+(J.domLoading-J.responseStart),"1310.2085="+(J.domInteractive-J.responseStart),"1310.1309="+(i-e),"1310.1007="+(e-J.responseStart),navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency]);Object.keys($).forEach(function(t){t in J&&J[t]&&n.push($[t]+"="+x(J[t],ct))}),t.vsStart?(n.push("1484="+(K[t.vsStart]||2771)),t.vsChanged&&n.push("1484.719=1")):n.push("1484="+K.visible),tt&&(tt.redirectCount&&n.push("1384.1385="+tt.redirectCount),1!==tt.type&&2!==tt.type||n.push("770.76="+tt.type)),C(n),I(A,n)}function c(){if(at&&(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())){for(var e=Z.getEntriesByType("paint"),i=0;i<e.length;i++){var n=e[i],o=W[n.name];o&&!lt[n.name]&&(lt[n.name]=!0,ut++,l("1926."+o,n.startTime))}if(ut<Q)try{new X(function(t,e){c(),e&&e.disconnect()}).observe({entryTypes:["paint"]})}catch(t){}}}function l(i,n,o,s){n===e&&(n=G()),o!==e&&o!==!0||t.mark(i,n);var r=P(i);if(r.push("207="+x(n)),u(r,s)){I(N,r),it[i]=it[i]||[],it[i].push(n);var a=t._markListeners[i];a&&a.length&&a.forEach(function(t){t(n)})}}function u(t,e){if(e){if(e.isCanceled&&e.isCanceled())return!1;Object.keys(e).forEach(function(i){"function"!=typeof e[i]&&t.push(i+"="+e[i])})}return!0}function h(t,e){var i=ot[t];i&&0!==i.length&&(i.push(G(),e),d(t))}function d(i,n,o){var s,r,a,c=ot[i];if("undefined"!=typeof n?(r=t.getTime(),s=r-n):c&&(s=c[0],r=c[1],a=c[2]),s!==e&&r!==e){var l=P(i);l.push("207.2154="+x(s),"207.1428="+x(r),"2877="+x(r-s)),u(l,o)&&u(l,a)&&(I(L,l),delete ot[i])}}function p(e,i){w(i,function(n){if(n){var o=P(e);t.getSetting("sendUrlInResTiming")&&o.push("13="+encodeURIComponent(i)),T(o,n[0]),I(R,o)}})}function f(){var e=t.getSetting("periodicStatsIntervalMs");e||null===e||(e=15e3),e&&(ht=setInterval(m,e)),addEventListener("beforeunload",m)}function m(){var e=!1;t._periodicTasks.forEach(function(t){t()&&(e=!0)}),e||clearInterval(ht)}function _(){if(X){var e=Z.getEntriesByType("navigation");g(e);var i=Z.getEntriesByType("resource");g(i);try{new X(function(t){g(t.getEntries())}).observe({entryTypes:["resource","navigation"]})}catch(t){}t._periodicTasks.push(b)}}function g(t){if(t&&t.length)for(var e=nt,i=0;i<t.length;i++){var n=v(t[i]);if(n){var o=n.domain+"-"+n.extension,s=e[o]=e[o]||{count:0,size:0};s.count++,s.size+=n.size}}}function v(t){var e=t.transferSize;if(null!=e){rt.href=t.name;var i=rt.pathname;if(0!==i.indexOf("/clck")){var n=i.lastIndexOf("."),o="";return n!=-1&&i.lastIndexOf("/")<n&&i.length-n<=5&&(o=i.slice(n+1)),{size:e,domain:rt.hostname,extension:o}}}}function b(){var e=t.getSetting("maxTrafficCounters")||250;if(pt>=e)return!1;for(var i=Object.keys(nt),n="",o=0;o<i.length;o++){var s=i[o],r=nt[s];n+=encodeURIComponent(s)+"!"+r.count+"!"+r.size+";"}if(n.length){pt++;var a=O.concat(["d="+n,"t="+x(G())]);I(V,a)}return nt={},pt<e}function y(){if(X)try{new X(function(t,e){var i=t.getEntries()[0];if(i){var n=i.processingStart-i.startTime;d("first-input",n),e.disconnect()}}).observe({type:"first-input",buffered:!0})}catch(t){}}function M(){if(X){var t=new X(function(t){var e=t.getEntries();null==dt&&(dt=0);for(var i=0;i<e.length;i++){var n=e[i];n.hadRecentInput||(dt+=n.value)}});try{t.observe({type:"layout-shift",buffered:!0})}catch(t){}addEventListener("visibilitychange",function e(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",e);try{"function"==typeof t.takeRecords&&t.takeRecords(),t.disconnect()}catch(t){}E()}}),addEventListener("beforeunload",E)}}function E(){if(null!=dt){var t=Math.round(1e6*dt)/1e6;I(q,O.concat("s="+t)),dt=null}}function k(){if(X&&(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())){var e=new X(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];ft=n.renderTime||n.loadTime}mt||(l("largest-loading-elem-paint",ft),mt=!0)});try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}addEventListener("visibilitychange",function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(t){}D()}}),addEventListener("beforeunload",D)}}function D(){null!=ft&&(l("largest-contentful-paint",ft),ft=null)}function B(e,i,n){function o(){var n,a=i||s,c=G(),l=t._tti.events||[],u=l.length;0!==u&&(n=l[u-1],a=Math.max(a,Math.floor(n.startTime+n.duration))),c-a>=H?r(e,a,l):c-a>=U?r(e,(i||s)+U,l):setTimeout(o,1e3)}if(t._tti){var s=G(),r=function(e,o,r){var a={2796.2797:S(r,i),689.2322:x(s)};n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),l(e||"2795",o,!0,a),t._tti.fired=!0};o()}}function C(t){et&&t.push("2437="+(Y[et.type]||2771),et.downlinkMax!==e&&"2439="+et.downlinkMax,et.effectiveType&&"2870="+et.effectiveType,et.rtt!==e&&"rtt="+et.rtt,et.downlink!==e&&"dwl="+et.downlink)}function w(t,e){function i(){var t=Z.getEntriesByName(n);return t.length?e(t):void(o++<z?(setTimeout(i,s),s+=s):e(null))}if(!at)return e(null);st.href=t;var n=st.href,o=0,s=100;setTimeout(i,0)}function S(t,e){return t=t||[],e=e||0,t.filter(function(t){return t.startTime-e>=-50}).map(function(t){var e=t.name?t.name.split("-").map(function(t){return t[0]}).join(""):"u",i=Math.floor(t.startTime),n=Math.floor(i+t.duration);return e+"-"+i+"-"+n}).join(".")}function P(e){return F.concat(["1701="+e,t.ajaxStart&&"1201.2154="+x(t.ajaxStart),t.ajaxComplete&&"1201.2052="+x(t.ajaxComplete)])}function T(t,e){Object.keys($).forEach(function(i){if(i in e){var n=e[i];(n||0===n)&&t.push($[i]+"="+x(n))}})}function x(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}function I(e,i){var n=encodeURIComponent(window.YaStaticRegion||"unknown");i.push("-cdn="+n);var o=i.filter(Boolean).join(",");t.send(null,e,o)}if(!t)throw new Error("Rum: interface is not included");if(!t.enabled)return t.getSetting=function(){return""},t.getVarsList=function(){return[]},void(t.getResourceTimings=t.pushConnectionTypeTo=t.pushTimingTo=t.normalize=t.sendCounter=t.sendDelta=t.sendTimeMark=t.sendResTiming=t.sendTTI=t.makeSubPage=t.sendHeroElement=t.onReady=function(){});t.getVarsList=function(){var e=t._vars;return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t]).replace(/\*/g,"%2A")})},t.setVars=function(e){Object.keys(e).forEach(function(i){t._vars[i]=e[i]}),i(),n()};var O,F,A="690.1033",N="690.2096.207",L="690.2096.2877",j="690.2096.2892",R="690.2096.2044",V="690.2096.361",q="690.2096.4004",z=10,H=3e3,U=2e4,$={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},K={visible:1,hidden:2,prerender:3},Y={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},W={"first-paint":2793,"first-contentful-paint":2794},Q=Object.keys(W).length,G=t.getTime,X=window.PerformanceObserver,Z=window.performance||{},J=Z.timing||{},tt=Z.navigation||{},et=navigator.connection,it={},nt={},ot=t._deltaMarks,st=document.createElement("link"),rt=document.createElement("a"),at="function"==typeof Z.getEntriesByType,ct=J.navigationStart;if(i(),n(),t.ajaxStart=0,t.ajaxComplete=0,X)try{new X(function(t,e){var i=t.getEntriesByType("navigation")[0];if(i){e&&e.disconnect();var n=[];T(n,i),C(n),I(j,O.concat(n))}}).observe({entryTypes:["navigation"]})}catch(t){}o(s),t._getCommonVars=function(){return O};var lt={},ut=0;t.getTimeMarks=function(){return it};var ht;t._periodicTasks=[];var dt,pt=0,ft=null,mt=!1,_t=X?function(){if(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())try{new X(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];l("element-timing."+n.identifier,n.startTime)}}).observe({type:"element",buffered:!0})}catch(t){}}:function(){};t.sendTTI=B,t.sendHeroElement=function(t){l("2876",t)},t._subpages={},t.makeSubPage=function(e,i){var n=t._subpages[e];"undefined"==typeof n?t._subpages[e]=n=0:t._subpages[e]=++n;var o=!1;return{689.2322:x("undefined"!=typeof i?i:G()),2924:e,2925:n,isCanceled:function(){return o},cancel:function(){o=!0}}},t._getLongtasksStringValue=S,t.getResourceTimings=w,t.pushConnectionTypeTo=C,t.pushTimingTo=T,t.normalize=x,t.sendCounter=I,t.sendDelta=d,t.sendTrafficData=b,t.finalizeLayoutShiftScore=E,t.finalizeLargestContentfulPaint=D,t.onReady=o}(Ya.Rum),Ya.Rum.enabled&&addEventListener("load",function t(){removeEventListener("load",t);var e=Ya.Rum;if(e.sendTimeMark("1724"),e.getSetting("sendAutoResTiming"))for(var i=document.querySelectorAll("script[data-rCid], div[data-rCid]"),n=0,o=i.length;n<o;n++){var s=i[n],r=s.src;if(!r){var a=getComputedStyle(s).backgroundImage;if(a){var c=a.match(/^url\(["']?(.*?)["']?\)$/);c&&(r=c[1])}}r&&e.sendResTiming(s.getAttribute("data-rCid"),r)}}),window.BEM&&BEM.channel("i-bem").onFirst("start-init",function(){Ya.Rum.getSetting("sendBeforeBemInited")&&Ya.Rum.sendTimeMark("2418")}).onFirst("init",function(){Ya.Rum.sendTimeMark("2295")}),BEM.decl("auth-cookie",{onSetMod:{js:function(){BEM.blocks["i-global"].param("needReset")&&$.ajax({url:BEM.blocks["i-global"].param("passport-host")+"/auth/update/",xhrFields:{withCredentials:!0}})}}}),BEM.decl("i-update-secretkey",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._savedYandexuid=String(BEM.blocks["i-global"].param("yandexuid")||""),this._savedLogin=String(BEM.blocks["i-global"].param("yandexLoginCookie")||""),this._retry=0,this._setTimer()}},destruct:function(){clearTimeout(this._timer),this.__base.apply(this,arguments)},_setTimer:function(){this._timer=setTimeout(this._checkChanges.bind(this),1e3)},_checkChanges:function(){this._readCurrents(),this._isYandexuidChanged()||this._isLoginChanged()?(this._requestSecretkey(),this._saveCurrents()):this._setTimer()},_readCurrents:function(){this._currentYandexuid=String($.cookie("yandexuid")||""),this._currentLogin=String($.cookie("yandex_login")||"")},_saveCurrents:function(){this._savedYandexuid=this._currentYandexuid,this._savedLogin=this._currentLogin},_isYandexuidChanged:function(){return this._currentYandexuid&&this._currentYandexuid!==this._savedYandexuid},_isLoginChanged:function(){return this._currentLogin.toUpperCase()!==this._savedLogin.toUpperCase()},_requestSecretkey:function(){this._retry+=1,$.ajax({url:BEM.blocks["cf-helpers"].buildPath("/update-sk/"),type:"POST",headers:{"x-visit-id":BEM.blocks["i-global"].param("visitId")},data:{reason:"cookies updated",context:{oldYandexuid:this._savedYandexuid,newYandexuid:this._currentYandexuid,oldLogin:this._savedLogin,newLogin:this._currentLogin,retry:this._retry}},success:this._updateSecretkey.bind(this)})},_updateSecretkey:function(t){$("input[type=hidden][name=sk]").val(t.sk),BEM.blocks["i-global"].param("secretkey",t.sk),this._setTimer()}}),BEM.decl("i-api-request",{run:function(t){return this._defer=$.Deferred(),this._requestOptions=$.extend(this.getDefaultParams(),t),this._isSecretkeyUpdated=!1,this._prepareRequest(),this._send(),this._defer.promise()},getDefaultParams:function(){return{type:"GET",dataType:"json"}},abort:function(){this._request&&this._request.abort()},_send:function(){this._setToken(),this._request=$.ajax(this._requestOptions).done(this._success.bind(this)).fail(this._error.bind(this))},_prepareRequest:function(){var t=this._requestOptions;t.headers=$.extend(t.headers,{"x-visit-id":BEM.blocks["i-global"].param("visitId")}),t.data||(t.data={}),this._setPageContext()},_setToken:function(){this._requestOptions.headers=$.extend(this._requestOptions.headers,{"csrf-token":BEM.blocks["i-global"].param("secretkey")})},_setPageContext:function(){var t=this._requestOptions,e=BEM.blocks["i-global"].param("pageContext"),i=t.data instanceof FormData?function(e,i){t.data.append(e,i)}:function(e,i){t.data[e]=i};Object.keys(e).forEach(function(t){i("context["+t+"]",e[t])})},_success:function(t){this._defer.resolve(t)},_error:function(t){403!==t.status||"Forbidden"!==t.statusText||this._isSecretkeyUpdated?this._defer.reject(t):this._requestSk().done(function(){this._isSecretkeyUpdated=!0,this._send()}.bind(this)).fail(this._defer.reject)},_requestSk:function(){var t={url:BEM.blocks["cf-helpers"].buildPath("/update-sk/"),type:"POST",data:{reason:"request failed",context:{url:this._requestOptions.url}}};return $.ajax(t).done(this._updateSk.bind(this))},_updateSk:function(t){$("input[type=hidden][name=sk]").val(t.sk),BEM.blocks["i-global"].param("secretkey",t.sk)}}),function(t,e){function i(t){return Boolean(""===t||t&&t.charCodeAt&&t.substr)}function n(t){return h?h(t):"[object Array]"===d.call(t)}function o(t){return Boolean(t)&&"[object Object]"===d.call(t)}function s(t,e){var i=void 0;t=t||{},e=e||{};for(i in e)e.hasOwnProperty(i)&&null==t[i]&&(t[i]=e[i]);return t}function r(t,e,i){var n=[],o=void 0,s=void 0;if(!t)return n;if(u&&t.map===u)return t.map(e,i);for(o=0,s=t.length;o<s;o++)n[o]=e.call(i,t[o],o,t);return n}function a(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function c(t){var e=l.settings.currency.format;return"function"==typeof t&&(t=t()),i(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:i(e)?l.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}var l={};l.version="0.4.1",l.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var u=Array.prototype.map,h=Array.isArray,d=Object.prototype.toString,p=l.unformat=l.parse=function(t,e){if(n(t))return r(t,function(t){return p(t,e)});if(t=t||0,"number"==typeof t)return t;e=e||l.settings.number.decimal;var i=new RegExp("[^0-9-"+e+"]",["g"]),o=parseFloat(String(t).replace(/\((.*)\)/,"-$1").replace(i,"").replace(e,"."));return isNaN(o)?0:o},f=l.toFixed=function(t,e){e=a(e,l.settings.number.precision);var i=Math.pow(10,e);return(Math.round(l.unformat(t)*i)/i).toFixed(e)},m=l.formatNumber=l.format=function(t,e,i,c){if(n(t))return r(t,function(t){return m(t,e,i,c)});t=p(t);var u=s(o(e)?e:{precision:e,thousand:i,decimal:c},l.settings.number),h=a(u.precision),d=t<0?"-":"",_=String(parseInt(f(Math.abs(t||0),h),10)),g=_.length>3?_.length%3:0;return d+(g?_.substr(0,g)+u.thousand:"")+_.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+u.thousand)+(h?u.decimal+f(Math.abs(t),h).split(".")[1]:"")},_=l.formatMoney=function(t){var e=t.number,i=t.symbol,u=t.precision,h=t.thousand,d=t.decimal,f=t.format;if(n(e))return r(e,function(t){return _({val:t,symbol:i,precision:u,thousand:h,decimal:d,format:f})});e=p(e);var g=s(o(i)?i:{symbol:i,precision:u,thousand:h,decimal:d,format:f},l.settings.currency),v=c(g.format),b=void 0;return b=e>0?v.pos:e<0?v.neg:v.zero,b.replace("%s",g.symbol).replace("%v",m(Math.abs(e),a(g.precision),g.thousand,g.decimal))};l.formatColumn=function(t){var e=t.list,u=t.symbol,h=t.precision,d=t.thousand,f=t.decimal,_=t.format;if(!e)return[];var g=s(o(u)?u:{symbol:u,precision:h,thousand:d,decimal:f,format:_},l.settings.currency),v=c(g.format),b=v.pos.indexOf("%s")<v.pos.indexOf("%v"),y=0,M=r(e,function(t){if(n(t))return l.formatColumn({val:t,opts:g});t=p(t);var e=void 0;e=t>0?v.pos:t<0?v.neg:v.zero;var i=e.replace("%s",g.symbol).replace("%v",m(Math.abs(t),a(g.precision),g.thousand,g.decimal));return i.length>y&&(y=i.length),i});return r(M,function(t){return i(t)&&t.length<y?b?t.replace(g.symbol,g.symbol+new Array(y-t.length+1).join(" ")):new Array(y-t.length+1).join(" ")+t:t})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports.accounting=l):"function"==typeof define&&define.amd?define([],function(){return l}):(l.noConflict=function(i){return function(){return t.accounting=i,l.noConflict=e,l}}(t.accounting),t.accounting=l)}(this),function(){BEM.DOM.decl("survey",{onSetMod:{js:function(){var t=this,e=t.params,i=e.formId,n=BEM.blocks["cf-helpers"],o=n.getStorage("sessionStorage");t.isPreview="yes"===t.getMod("preview"),t.pageNumbers=t.findElem("page").toArray().map(function(e){return t.getMod($(e),"page")}),t.questions=t.findBlocksInside("survey-question"),t.submitButton=t.findBlockInside({block:"button",modName:"role",modVal:"submit"}),t.nextButton=t.findBlockInside({block:"button",modName:"role",modVal:"next"}),t.prevButton=t.findBlockInside({block:"button",modName:"role",modVal:"prev"}),t.submitButton&&t.submitButton.on("click",t.submitClick,this),t.nextButton&&t.nextButton.on("click",t.nextClick,this),t.prevButton&&t.prevButton.on("click",t.prevClick,this),t.metrikaChangeReached=!1,t.saveToNamedFileds(),t.bindTo(t.elem("checkbox").find("a").add(t.elem("radiobox").find("a")),"pointerclick",function(t){t.stopPropagation()}),t.bindTo("captcha-updater","pointerclick",function(e){t.updateCaptcha(e)}),t.bindTo("submit",function(){t.collectClientData(),o&&o.removeItem(n.getDraftStorageKey(i))}),BEM.blocks["survey-question"].on(this.domElem,{addQuestions:function(t,e){this.addQuestions(e)},removeQuestions:function(t,e){this.removeQuestions(e)},change:function(){this.updateMetrikaParams(),this.metrikaChangeReached||(this.goal("ya-forms_start-change"),this.metrikaChangeReached=!0)}},this)},progress:function(t,e){this.findBlocksInside("submit-button","button").forEach(function(t){t.setMod("disabled",e)})}},saveToNamedFileds:function(t){var e=this,i=t||this.questions;i.forEach(function(t){var i=t.params,n=i.name;n&&(e.namedFields[n]=t)})},submitClick:function(){this.goal("ya-forms_submit"),this.validateSurvey()},nextClick:function(){this.validateSurvey(),this.goal("ya-forms_next")},prevClick:function(){this.showAnotherPage(!1),this.goal("ya-forms_prev")},validateSurvey:function(){this.setMod("progress","yes"),this.trigger("survey-validate")},onValidateSuccess:function(){this.hasMod("isLastPage","yes")?this.domElem.submit():(this.delMod("progress"),this.showAnotherPage(!0))},onValidateError:function(){this.delMod("progress")},showAnotherPage:function(t){var e=this.getCurrentPage(),i=this.findElem("page","page",e),n=this.getAnotherPageWithQuestions(t),o=this.findElem("page","page",n);this.delMod(i,"visible"),this.setMod(o,"visible","yes"),this.updateButtonStates(),this.trigger("change-page",{fromPage:e,toPage:n})},updateButtonStates:function(){var t=this.getAnotherPageWithQuestions(!1),e=this.getAnotherPageWithQuestions(!0);this.setMod("hasPrevPage",t&&"yes"),this.setMod("hasNextPage",e&&"yes"),this.setMod("isLastPage",!e&&"yes")},getCurrentPage:function(){var t=this.findElem("page","visible","yes");return this.getMod(t,"page")},getCurrentPageQuestions:function(){return this.getPageQuestions(this.getCurrentPage())},getPageQuestions:function(t){var e=this.findElem("page","page",t);return this.findBlocksInside(e,"survey-question")},getAnotherPageWithQuestions:function(t){var e=t?this.pageNumbers:[].concat(this.pageNumbers).reverse(),i=this.getCurrentPage(),n=e.indexOf(i),o=e.slice(n+1),s=null;return o.some(function(t){return this.getPageQuestions(t).some(function(e){var i=e.params.groupSlug,n=i?this.namedFields[i]:e;if(!n.hasMod("hidden","yes"))return s=t,!0}.bind(this))}.bind(this)),s},namedFields:{},collectClientData:function(){var t=this.domElem,e='<input type="hidden" value="">',i=this.collectPlugins(),n={date:new Date,js:!0,parent_origin:document.referrer};i&&(n.plugins=i),Object.keys(n).forEach(function(i){t.find('input[name="'+i+'"]').remove(),$(e).attr("name",i).val(n[i]).prependTo(t)})},collectPlugins:function(){var t=[];return jQuery.each(navigator.plugins,function(e,i){var n=i.name;i.version?n+=", "+i.version:"Shockwave Flash"===i.name&&(n=i.description),t.indexOf(n)===-1&&t.push(n)}),t.join(" | ")},showAlert:function(t,e,i){var n=this,o=i||"";e&&t&&(n.closeAlert(),n.alert||(n.alert=n.findBlockOn($(BEMHTML.apply({block:"popup",mods:{theme:o.theme||"error",role:"survey-alert",autoclosable:"yes"},js:{directions:{to:o.direction||"bottom",axis:"left"},tail:{width:8,height:8}},content:[{elem:"tail"},{elem:"content"}]})),"popup"),BEM.DOM.append(n.domElem,n.alert.domElem)),n.alert.setContent(t).show(e))},closeAlert:function(){this.alert&&this.alert.hide()},updateCaptcha:function(t){function e(t){var e=t.image_url,i=t.key,s=n.parents(o.buildSelector("captcha"));s.find('input[type="hidden"]').attr("data-captcha-image-url",e).val(i),s.find(o.buildSelector("captcha-img")).attr("src",e)}function i(){o.delMod(n,"updating")}var n=t.data&&t.data.domElem||"",o=this;if(n&&!o.hasMod(n,"updating")){var s=this.elemParams("captcha")||{},r=s.captchaType;o.setMod(n,"updating","yes"),BEM.create("i-api-request").run({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/surveys/captcha/"),data:{captchaType:r}}).done(e).always(i)}},removeQuestionsFromStorage:function(t){t.forEach(function(t){t.deleteFromStorage(t.params.name)})},addQuestions:function(t){this.questions=this.questions.concat(t),this.saveToNamedFileds(t),this.findBlockOn("survey-field-filters").addQuestions(t),this.findBlockOn("survey-conditions").addQuestions(t)},removeQuestions:function(t){this.questions=this.findBlocksInside("survey-question"),self.namedFields={},this.saveToNamedFileds(),this.findBlockOn("survey-field-filters").removeQuestions(t),this.findBlockOn("survey-conditions").removeQuestions(t),this.removeQuestionsFromStorage(t)},updateMetrikaParams:function(){this.isPreview||this.metrikaSent||(BEM.blocks["fi-metrika"].setParams({"Начало заполнения формы":!0}),this.metrikaSent=!0)},goal:function(t){Object.values(this.params.metrikaIds).forEach(function(e){BEM.blocks["fi-metrika"].getCounter(e).reachGoal(t)}),BEM.blocks["fi-metrika"].reachGoal(t)}})}(),BEM.decl("iframe-height",{},{height:0,init:function(){this._inited||(this._inited=!0,this._detectChangeHeight(),this._checkChangeHeight())},_detectChangeHeight:function(){var t=$.throttle(this._checkChangeHeight,50,this);if(window.addEventListener("resize",t,!1),window.MutationObserver){var e=new MutationObserver(t);e.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}else setInterval(this._checkChangeHeight.bind(this),500)},_checkChangeHeight:function(){var t=document.querySelector(".popup_visibility_visible, .popup2_visible_yes"),e=t?Math.max(document.documentElement.scrollHeight,document.body.scrollHeight):document.body.offsetHeight;e!==this.height&&(this.height=e,BEM.blocks["cf-helpers"].postMessage({"iframe-height":e}))}}),BEM.DOM.decl({block:"custom-styles",modName:"inplace",modVal:!0},{height:0,onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).on("message",this._onPostMessage.bind(this)),$("<style>",{id:"template-styles"}).appendTo("body"),window.parent.postMessage(JSON.stringify({message:"styles-ready",defaultStyles:this.params.styling.defaults}),"*")}},_onPostMessage:function(t){var e=t.originalEvent.data||{};"setStylesTemplate"===e.type?this._setStyles(e):"clearStyles"===e.type&&this._clearStyles()},_setStyles:function(t){var e=t.data;e.styles&&this._applyStyles(e)},_applyStyles:function(t){var e=this;this._getTemplateText().then(function(i){var n=$.extend({},e.params.styling.defaults,e._prepareStyles(t));less.render(i,{modifyVars:n},function(t,e){t?console.error(t):$("#template-styles").text(e.css)})})},_prepareStyles:function(t){var e=t.styles,i=t.image_form,n=t.image_page;return i&&i.links&&i.links["2560x"]&&(e.bg_url=i.links["2560x"]),n&&n.links&&n.links["2560x"]&&(e.page_bg_url=n.links["2560x"]),e.bg_url&&(/^(https?:)?\/\//.test(e.bg_url)||(e.bg_url=BEM.blocks["i-global"].param("staticPath")+"/public/styles_templates_images"+e.bg_url.match(/\/[^\/]+$/)),e.bg_url=JSON.stringify(e.bg_url)),e.page_bg_url&&(e.page_bg_url=JSON.stringify(e.page_bg_url)),e.answer_text_color||(e.answer_text_color=e.question_text_color),e},_clearStyles:function(){$("#template-styles").text("")},_getTemplateText:function(){return this.templatePromise||(this.templatePromise=$.get(BEM.blocks["i-global"].param("staticPath")+"/public/styles.less")),this.templatePromise}}),BEM.DOM.decl({block:"survey",modName:"preview",modVal:"yes"},{onSetMod:{js:function(){this.__base(),BEM.blocks["iframe-height"].init()}}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){return!this.hasMod("disabled")&&(e?this._focused||this._focus():this._focused&&this._blur(),void this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")}))}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var i="undefined"!=typeof t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return!this.hasMod("disabled","yes")&&void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._updateVal)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")}))}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._updateVal()})}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",function(){this._updateValNextTick()}),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(i){
i.setMod(t,e)})}},_onSampleClick:function(t,e){var i=this.elemParams(t);this.val("val"in i?i.val:t.text(),{source:"sample"})}},{live:function(){return this.liveBindTo("sample","pointerclick",function(t){this._onSampleClick(t.data.domElem,t)}),this.__base()}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){var e=BEM.blocks.keycodes.is(t.which,"UP","DOWN");if(e&&!t.shiftKey){t.preventDefault();var i=this._items.length,n=!1;if(i){var o=t.which-39,s=this._curItemIndex,r=0;do n=(0===s&&o===-1||s+o>=i)&&this._onLeaveItem(this._items[s],!0),s+=o,s<0?s=i-1:s>=i&&(s=0);while(!n&&this._onEnterItem(this._items[s],!0)===!1&&++r<i)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],n=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&i.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),n.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:n,js:o,content:{elem:"content",content:i}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){i.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),n=this._getItemIndex(t),n>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(t.enter()!==!1?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(t)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var i=t.select(e||!1),n="object"===("undefined"==typeof i?"undefined":_typeof(i))?i.needUpdate:i!==!1,o="object"===("undefined"==typeof i?"undefined":_typeof(i))&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent(function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(n||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var i=t._getPopup(),n=e.items||e;t.foot&&n.length&&$.inArray(t.foot,n)===-1&&n.push(t.foot),n.length?(t._curItemIndex=-1,BEM.DOM.update(i.elem("items"),t._buildItemsHtml(n),function(){i.isShown()||(i.show(t.elem("box")),t._setWidth()),t._items=i.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):i.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t,i){var n,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(o,n),o}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),BEM.DOM.decl({block:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("update-items",this._onUpdateItems),this.params.dataprovider.dataType="json"}},_doRequest:function(){return this.params.doEmptyRequests!==!1||""!==this.val()?this.__base.apply(this,arguments):void this._getPopup().hide()},_onUpdateItems:function(){if(!this._isDestructing){var t=this.getPopup();t.isShown()&&(t._resetDefault(),t.repaint())}},_getPopup:function(){var t=this.__base.apply(this,arguments);return t._moveToContainer(),t}}),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+i).bem(i)}var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide(function(){i.domElem&&i.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(t){return this._scope=t,this._inContainer=!1,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!==("undefined"==typeof r?"undefined":_typeof(r))||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r},this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;s<n;s++)for(var r=t[s],a=r.length,c=0;c<a;c++)for(var l=e[s],u=l.length,h=0;h<u;h++)for(var d=i[s],p=d.length,f=0;f<p;f++)o.push({direction:r[c],axis:l[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},i=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),i=t.map(function(t){if("string"==typeof t){var i=t.split("-");t={to:i[0],tail:{}},i[1]&&(t.axis=i[1]),i[2]&&(t.tail.axis=i[2])}var n=t.to;return e[n]||(e[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,e[n]=t,n},this),{directions:e,keys:i}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;t<i;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){i!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},l=r.top+a.top-c.top,u=r.left+a.left-c.left,h=u+s.width-o.width,d=l+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),l<0&&(p.height+=l),u<0&&(p.width+=u),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(i=Math.abs(p.height*p.width),e=s.height*s.width,e!==i&&(f=i/e*100)),f},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),i=!0;return!(parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility"))&&($(this).parentsUntil(e).each(function(){var t=$(this);if("none"===t.css("display"))return i=!1}),i)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do t._preventHideByClick=!0,t=t._getParentPopup();while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)return void(this._preventHideByClick=null);if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;i<n;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(t,e,i){function n(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function o(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function s(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}function r(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,l={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},u=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function t(i,s){"string"==typeof i&&(i={block:i}),i.name&&(i.block=i.name);var t=d[i.block]||(d[i.block]={});s.onBlock&&n(t,"_block",o(s.onBlock,i)),s.onElem&&(e.isFunction(s.onElem)?n(t,"_elem",o(s.onElem,i)):e.each(s.onElem,function(e,s){n(t,"_elem"+("*"===e?"":c+e),o(s,i))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=i},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,i,n,o){var s=this,r=s._params;return"undefined"==typeof i?r[t]:(!n&&t in r?o&&(r[t]=e.extend(i,r[t])):r[t]=i,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.attrs||{})[t];var o=n._params.attrs;return o?(i||!(t in o))&&(o[t]=e):(n._params.attrs={})[t]=e,n},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.mods||{})[t];var o=n._params.mods;return o?(i||!(t in o))&&(o[t]=e):(n._params.mods={})[t]=e,n},mix:function(t,e){var i=this,n=i._params;return"undefined"==typeof t?n.mix:(!e&&"mix"in n?n.mix=n.mix.concat(t):n.mix=t,i)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,i=e._params;return t.content=i.content,i.content=t,e},beforeContent:function(t){var e=this,i=e._params;return i.content=s(t,i.content),e},afterContent:function(t){var e=this,i=e._params;return i.content=s(i.content,t),e},wrap:function(t){var e=this,i=e._params;return t.block||(t._curBlock=e._curBlock),t.content=i._wrapper?i._wrapper:i,i._wrapper=t,e},tParam:function(t,e){var i=this,n=i._tParams||(i._tParams={});if("undefined"==typeof e)return n[t];var o=i._tParamsChanges||(i._tParamsChanges={});return t in o||(o[t]=n[t]),n[t]=e,i},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,i=t._buffer,n=t._params,o="undefined"==typeof n?"undefined":_typeof(n);if("string"===o||"number"===o)i.push(n);else if(e.isArray(n))for(var s,r,a=0,c=n.length;a<c;)t._params=s=n[a++],r="undefined"==typeof s?"undefined":_typeof(s),"string"===r||"number"===r?i.push(s):s&&(s._pos=a,s._siblingsCount=c,t._buildByDecl());else n&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,i=this,n=i._buffer,o=i._params,s=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||i._curBlock.block),d=!1;o.js&&((t={})[u(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),n.push("<",s),(a||o.cls)&&(n.push(' class="'),a&&(h(c,o.elem,o.mods,n),o.mix&&e.each(o.mix,function(e,i){i&&(n.push(" "),h(i.block,i.elem,i.mods,n),i.js&&((t||(t={}))[u(i.block,i.elem)]=i.js===!0?{}:i.js,d||(d=!i.elem)))})),o.cls&&n.push(a?" ":"",o.cls),d&&n.push(" i-bem"),n.push('"')),t&&n.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&n.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),l[s]?n.push("/>"):(n.push(">"),"undefined"!=typeof o.content&&(i._params=o.content,i._buildAll()),n.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,i=t._curBlock,n=t._params;if(n._curBlock&&(t._curBlock=n._curBlock),n.block&&(t._curBlock=n),!n._wrapper){if(n.block||n.elem){var o=d[t._curBlock.block];if(o){var s;if(n.elem?(s=o["_elem"+c+n.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!n._isStopped););}}if(n._wrapper)return n._curBlock=t._curBlock,t._params=n._wrapper,t._buildAll()}var l=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=i,l){var u=t._tParams;e.each(l,function(t,e){"undefined"==typeof e?delete u[t]:u[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)})},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",c=t.indexOf(a)!==-1,l=function(){for(var e,i=/\&(#\d+|#x[a-f\d]+|\w+);/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},u=function(t){if(c)return t;for(;t.indexOf(a)!==-1&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!c&&l(),s.forEach(function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:u(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:u(t.slice(i,o=e[1]))})},this),n.push({tag:"span",elem:"span",content:u(t.slice(o))}),n}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",function(t){this.trigger(t.type)}),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),i=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",!!t.param("pers")&&"yes").content(BEM.blocks["b-autocomplete-item"].highlight(i,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"nav",modVal:"yes"},{enter:function(){return!1},select:function(t){if(t){var e=window.open();e.opener=null,e.location=this.val()}return{needEvent:!0}}},{getUrl:function(t){return(t.match(/^\w[\w-]*:\/\//g)?"":"http://")+t}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onSetMod:{js:{inited:function(){this.setMod("nav","yes")}}},enter:function(){return this.__base.apply(this,arguments)},select:function(){return this.__base.apply(this,arguments)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(t){var e=t.param("data"),i=4===t.param("suggestVersion"),n=e[4]||e[3],o=(n.match(/^\w[\w-]*:\/\//g)?"":"http://")+n;t.js({val:o}).content({
elem:"link",url:o,title:BEM.blocks["i-common__string"].escapeHTML(i?e[3]:e[2]),description:BEM.blocks["b-autocomplete-item"].highlight(i?e[2]:e[1],t.param("hl"))})},onElem:{link:function(t){t.tag("a").attrs({href:t.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:t.param("title")},{elem:"link-info",tag:"span",content:[" — "].concat(t.param("description"))}])}}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(t){t.mod("enterable","no").content($.map(t.param("data").slice(1),function(t){return $.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"lingvo"},{onBlock:function(t){var e=t.param("data")[1];t.content([{tag:"span",elem:"text",content:e.text},{tag:"span",elem:"translation",content:[" — ",e.translation]}])}}),BEM.DOM.decl("input",{onElemSetMod:{message:{visibility:function(t,e,i){var n=this,o=n.getMod(t,"type");if(o){var s=!0;i||n.elem("message","type",o).each(function(){this!==t[0]&&n.hasMod($(this),"visibility","visible")&&(s=!1)}),s&&n.toggleMod("message-"+o,"yes","","visible"===i)}}}}}),BEM.DOM.decl({block:"textinput",baseBlock:"control"},{onSetMod:{js:{inited:function(){this._control=this.elem("control"),this._text=this._control.val()}}},val:function(t){var e="undefined"!=typeof t,i=this._control;return t=e?null===t?"":t.toString():i.val(),t!==this._text&&(i.val(t),this._textChange()),e?this:t},getText:function(){return this._control.val()},setText:function(t){return t===this.getText()?this:(this._control.val(t),this._textChange(),this)},_textChange:function(t){var e=this._control.val(),i=this._text,n=Boolean(e!==i);if(!n)return!1;this._text=e;var o={text:e,oldText:i,byCode:t};this.trigger("change",o)}},{live:function(){return this.liveBindTo("control","input",function(){this._textChange()}),this.__base()}}),BEM.DOM.decl({block:"textinput"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.autofocus&&(this.setMod("focused","yes"),this._getControl().focus())}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._textChange()})}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._textChange)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")})),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._textChange),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl({block:"textinput",modName:"has-clear",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base(),this._clear=this.elem("clear"),this.on("change",this._updateClearOnInputChange)}}},_updateClearOnInputChange:function(){this.toggleMod(this._clear,"visible","yes","",Boolean(this.val()))},_onClearPointerclick:function(){this.val("").setMod("focused","yes").elem("control").focus()},_onClearPointerover:function(){this.setMod(this._clear,"hovered","yes").bindTo(this._clear,"pointerout",this._onClearPointerout)},_onClearPointerout:function(){this.delMod(this._clear,"hovered").unbindFrom(this._clear,"pointerout")},_preventLosingFocus:function(t){this.hasMod("focused")&&(t.preventDefault(),t.stopPropagation())}},{live:function(){return this.liveBindTo("clear","pointerclick",function(t){this._onClearPointerclick(t)}).liveBindTo("clear","pointerover",function(t){this._onClearPointerover(t)}).liveBindTo("clear","mousedown touchend",function(t){this._preventLosingFocus(t)}),this.__base()}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",e),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){var e=this.elem("label"),i=t.target;this.domElem[0]===i&&this._onChange(t),i!==e[0]&&this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){var t=this;t.__base.apply(t,arguments),t.bindTo("pointerclick",function(t){var e=$(t.target).prop("tagName");e&&"a"===e.toLowerCase()&&t.stopPropagation()})}}}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var i=$(e),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),i=this.findElem(t,"control"),n=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:n})},"":function(t){var e=this.findElem(t,"control"),i=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:i})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,i){t.find(this.buildSelector("control")).prop("disabled",i),i&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(i,n){if(n.value===t)return e.setMod(e.__self._getRadioByElem($(n)),"checked","yes"),!1}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onSetMod:{disabled:{yes:function(){this.delMod("focused"),this.__base.apply(this,arguments)}}},onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var i=this.findElem(e,"control");i.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||i.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}).liveBindTo("control","focusin focusout",function(t){!this.hasMod("disabled")&&this.toggleMod("focused","yes","focusin"===t.type)}),this.__base()}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return!this.hasMod("disabled")&&(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(i=$(this).parent("optgroup")[0],!(i&&i.disabled))&&(n=e)}),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return"undefined"==typeof t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var t;return this._isParentPopup()&&(t=this._popup._parent,(t.repaint||t.redraw).call(t)),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var c,l=n?1:-1;for(c=a;c>=0&&c<=r;)if(c+=l,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function t(e,i,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{opened:function(){var t=this;t.__base.apply(t,arguments),t.hasMod("opened")?$(window).trigger("unConsiderScrollHeight"):$(window).trigger("onConsiderScrollHeight")}}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){function e(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:e}||"   "},elemMods:{}};return i&&(n.elemMods=i),n}function i(t,n){var c=t.length;if(c){var l=0;do{var u=$(t[l]),h=u.attr("disabled")&&{disabled:"yes"};if(u.is("optgroup")){a=!0,!u.prev().is("optgroup")&&l>0&&s.push(o),r.push(s),s=[],s.push(e(u,u.attr("label"),$.extend({label:"yes"},h,n))),i(u.children(),$.extend({inner:"yes"},h,n));var d=s;s=r.pop(),s.push({block:"select",elem:"group",content:d})}else s.push(e(u,u.html(),$.extend(h,u.is(":selected")&&{selected:"yes"},n)))}while(++l<c||(a=!1))}}var n="select",o={block:n,elem:"separator",tag:"i"},s=[],r=[],a=!1;return i(t),BEMHTML.apply(s)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&o<s&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl({block:"select",modName:"to",modVal:"bottom"},{getDefaultParams:function(){return $.extend(this.__base(),{popupMods:{adaptive:"no"},popupParams:{to:"bottom"}})}}),BEM.DOM.decl({block:"select",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){this.suggestBlock=this.findBlockOn("suggest","input"),this.__base.apply(this,arguments),this.eventBinders(),this.collectItemData()}},opened:{"":function(){this.__base.apply(this,arguments),this.suggestBlock._blur()}}},eventBinders:function(){var t=this;this.suggestBlock.on("focus",function(){t.suggestBlock.val(""),t.setSelected(),t.resetFilter(),t.open(),t.setMod("focused","yes")}),this.suggestBlock.on("blur",function(){t.isOpened()&&t.close(),t.updateSuggestBlock(),t.delMod("focused")}),this.suggestBlock.bindTo("control","input",function(){t.filterItems(t.suggestBlock.val()),t._drawPopup()}),this.on("change",function(e,i){t.setSelected(),i.prev>-1&&t.suggestBlock._blur()}),window.top.location!==window.location&&this.on("blur",function(){t.suggestBlock._blur()})},_drawPopup:function(){this.__base.apply(this,arguments),this.afterCurrentEvent(function(){if(!this._isDestructing){var t=this._getPopup();t.isShown()&&t.repaint()}})},collectItemData:function(){var t=this;this._itemsData=[],this.elem("option").each(function(e,i){t._itemsData.push({value:i.value,content:i.label,item:"option"})})},setSelected:function(){var t=this.val();this._itemsData.forEach(function(e){e.selected=e.value===t})},filterItems:function(t){var e=void 0;t=t.toLowerCase(),e=t.length?this._itemsData.filter(function(e){return e.content.toLowerCase().indexOf(t)>-1||""===e.value}):this._itemsData,this.setOptions(e)},resetFilter:function(){BEM.DOM.update(this.elem("control"),BEMHTML.apply(this._itemsData.map(this.__self._buildOption))),this._popup&&this._redrawList()},updateSuggestBlock:function(){this.suggestBlock.val(this._getSelectedText())},_setButtonText:function(t){this.__base.apply(this,arguments),this.isOpened()||this.suggestBlock.val(t)}}),BEM.DOM.decl("attach",{onSetMod:{js:{inited:function(){this._noFileText=this.elem("text").text(),this._filePath="",this._setFilePath(""),this.bindTo("reset","pointerclick",this.resetFile)}},disabled:function(t,e){this.elem("control").prop("disabled",e),this.getButton().setMod("disabled",e)}},val:function(){return this._filePath},getButton:function(){return this._button||(this._button=this.findBlockOn("button","button2")||this.findBlockOn("button","button"))},resetFile:function(){if(!this.hasMod("disabled")){var t=this.elem("control");return t.val(""),t.replaceWith(t.clone()),this.dropElemCache("control"),this.getButton().dropElemCache("control"),this._setFilePath(""),this.trigger("reset")}},_setFilePath:function(t,e){var i=this._filePath;this._filePath=t;var n=t.split("\\").pop(),o=n.split(".").pop().toLowerCase();this.setMod(this.elem("holder"),"file",this._extensionsToMods[o]||this.params.unknownType),this.toggleMod(this.elem("holder"),"state","hidden",!n);var s=this.params.textWidth,r=this.elem("text");s&&r.css("width",n?s+"px":"auto"),r.text(n||this._noFileText),(e||t!==i)&&this.trigger("change")},_update:function(){this._setFilePath(this.elem("control").val(),!0)},_extensionsToMods:{zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",gif:"gif",jpg:"jpg",jpeg:"jpg",png:"png",eml:"eml",exe:"exe",m4a:"audio",ogg:"audio",mp3:"mp3",wav:"wav",wma:"wma",flv:"video",mov:"mov",wmv:"wmv",mp4:"mp4",avi:"avi",xls:"xls",doc:"doc",docx:"doc",txt:"txt",pdf:"pdf",ppt:"ppt"},getDefaultParams:function(){return{unknownType:"unknown"}}},{live:function(){this.liveBindTo("change",function(){this._update()})}}),BEM.DOM.decl("date-input",{onSetMod:{js:function(){var t=this,e=t.elem("iso-date");t.calendar=t.findBlockInside("control","m-calendar"),t.calendar.on("change",function(i,n){n?e.val(BEM.blocks["mi-helpers"].dateFormat(n,"yyyy-mm-dd")):e.val(""),t.trigger("change")})}},val:function(t){return t&&t instanceof Date?(this.calendar.setDate(t.toISOString()),this):this.calendar.getDate()}}),BEM.blocks["mi-helpers"]={getDateFromHumanString:function(t){var e,i=Math.abs(-(t.search(/\./)+1)||-(t.search("Z")+1)),n=t;return n=n.replace(/-/g,",").replace("T",",").replace(/:/g,","),n=i?n.substr(0,i-1):n,n=n.split(","),n[1]=n[1]-1,e=this.getUTC_YMD(n[0],n[1],n[2]),n[3]&&e.setHours(n[3]),n[4]&&e.setMinutes(n[4]),n[5]&&e.setSeconds(n[5]),e},getUTC_YMD:function(t,e,i){return new Date(t,e,i)},getHumanStringFromDate:function(t){var e,i,n,o,s,r,a,c;return t&&t.date?(i=t.date,n=i.getFullYear(),o=(i.getMonth()+1).toString(),s=i.getDate().toString(),r=i.getHours().toString(),a=i.getMinutes().toString(),c=i.getSeconds().toString(),1===o.length&&(o="0"+o),e=n+"-"+o,t.needDay!==!1&&(1===s.length&&(s="0"+s),e=e+"-"+s,t.needHours&&(1===r.length&&(r="0"+r),e=e+"T"+r,t.needMinutes&&(1===a.length&&(a="0"+a),e=e+":"+a,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e):null},validateNumberOnlyInput:function(t){var e,i,n,o=!1,s=t.target,r=$(s),a=s.selectionStart,c=r.val(),l=/^[-|\d]{1}\d{0,}(?:[.,]{0,1}\d{0,})$/,u=l.exec(c);if(!u&&c.length){for(e=0;e<c.length;e++)if(i=c.substr(0,e)+c.substr(e+1,c.length),l.exec(i)){r.val(i),s.setSelectionRange(a-1,a-1),o=!0;break}o||(n=/\d+(?:[.,]{0,1}\d{0,})/.exec(c),r.val(n?n[0]:""))}},isVisible:function(t){var e,i=BEM.DOM.win.get(0),n=BEM.DOM.doc.get(0);return t===n||!(!t||!t.parentNode)&&((!t.style||"none"!==t.style.display&&"hidden"!==t.style.visibility)&&((!i.getComputedStyle||(e=i.getComputedStyle(t,""),"none"!==e.display&&"hidden"!==e.visibility))&&this.isVisible(t.parentNode)))},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},o={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};return function(s,r,a){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(s)||/\d/.test(s)||(r=s,s=void 0);try{if(s=s?new Date(s):new Date,isNaN(s))throw SyntaxError("invalid date");r=String(o[r]||r||o.default),"UTC:"==r.slice(0,4)&&(r=r.slice(4),a=!0);var c=a?"getUTC":"get",l=s[c+"Date"](),u=s[c+"Day"](),h=s[c+"Month"](),d=s[c+"FullYear"](),p=s[c+"Hours"](),f=s[c+"Minutes"](),m=s[c+"Seconds"](),_=s[c+"Milliseconds"](),g=a?0:s.getTimezoneOffset(),v={d:l,dd:n(l),ddd:BEM.I18N("i-tanker__days","short"+(u?u:7)),dddd:BEM.I18N("i-tanker__days","n"+(u?u:7)),m:h+1,mm:n(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:m,ss:n(m),l:n(_,3),L:n(_>99?Math.round(_/10):_),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:a?"UTC":(String(s).match(e)||[""]).pop().replace(i,""),o:(g>0?"-":"+")+n(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return r.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}catch(t){}}}()},BEM.DOM.decl("m-datepicker",{getDate:function(){return!!this._isDateSelected&&this._selectedDate},getSelectedDay:function(){return!!this._isDateSelected&&this._selectedDate.getDate()},setDate:function(t,e,i){if("string"==typeof t)this._selectedDate=BEM.blocks["mi-helpers"].getDateFromHumanString(t);else{if("object"!==("undefined"==typeof t?"undefined":_typeof(t)))throw new Error("Wrong argument! Should be ISOString string or { from: ISOString, to: ISOString } object");this._selectedDate={from:BEM.blocks["mi-helpers"].getDateFromHumanString(t.from),to:BEM.blocks["mi-helpers"].getDateFromHumanString(t.to)}}this._isDateSelected=!0,this.trigger("change",{date:this.getDate(),fromArrow:!e}),e||this._buildDatepicker(i?this._selectedDate:null),this.clearButton&&this.clearButton.delMod("disabled")},clearDate:function(){this._isDateSelected=!1,this.trigger("change",{date:this.getDate()})},_getFootElemBEMJSON:function(t){return{block:"m-datepicker",elem:"foot",content:t}},_getCurrentDate:function(){return new Date},_getStartDay:function(t,e,i){var n;return"string"==typeof t||"number"==typeof t?(i=e,e=t,n=BEM.blocks["mi-helpers"].getUTC_YMD(i,e,1).getDay()):n=t.getDay(),0===n&&(n=7),n},_getMonthDays:function(t,e){var i=[31,28,31,30,31,30,31,31,30,31,30,31],n=i[t];return 28!==n||e%4!==0||e%100===0&&e%400!==0||(n=29),n},_isDateSelected:!1}),BEM.DOM.decl("m-calendar",{_popUpOpened:!1,onSetMod:{js:function(){this.params.value&&(this._notTriggerChange=!0,this.setDate(this.params.value))}},getDatePicker:function(){return this._datePicker||!1},setDate:function(t,e){this._datePicker&&this._popUpOpened||(this.params.value=t,this._buildDatePicker()),this._datePicker.setDate(t,!e,e)},getDate:function(){return this._datePicker||this._buildDatePicker(),this._datePicker.getDate()},clearDate:function(){this._datePicker||this._buildDatePicker(),this._datePicker.clearDate()},_onDateChange:function(t,e){
this._popUpOpened&&!e.fromArrow&&this.params.autoclose&&this._datePickerPopup.delMod("visible"),!this._notTriggerChange&&this.trigger("change",this._datePicker.getDate()),this._notTriggerChange=!1},_onTogglerClick:function(){this._datePicker||this._buildDatePicker(),this._datePickerPopup.setMod("visible","yes"),this._datePicker.setSizes()},_onDatePickerPopupHide:function(){this.input._isDatePickerOpened=!1,this._popUpOpened=!1,this.trigger("hide")},_onDatePickerPopupShow:function(){this._popUpOpened=!0,this.trigger("show")},_buildDatePicker:function(){this._buildPopup(),this._datePicker=$(BEMHTML.apply(this._getDatePickerBEMJSON())).bem("m-datepicker"),this._datePicker.on("change",this._onDateChange,this),this._datePickerPopup.setContent(this._buildTail().add(this._datePicker.domElem)).setAnchor(this.elem("toggler")).on("beforeClose",this._onDatePickerPopupHide,this).on("beforeOpen",this._onDatePickerPopupShow,this)},_buildTail:function(){return $(BEMHTML.apply({block:"popup2",elem:"tail"}))},_buildPopup:function(){this._datePickerPopup||(this._datePickerPopup=$(BEMHTML.apply({block:"popup2",mix:[{block:"m-calendar",elem:"popup",elemMods:{type:this.getMod("type")}}],mods:{target:"anchor",theme:"normal",autoclosable:"yes"},content:[{elem:"tail"},{elem:"content"}]})).bem("popup2"))}},{dateFormat:BEM.blocks["mi-helpers"].dateFormat}),function(t){function e(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function i(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function n(t){for(b in M)M[b]=t[w[b]]}function o(t){var i,o,s,r,c,l;if(i=t.keyCode,e(C,i)==-1&&C.push(i),93!=i&&224!=i||(i=91),i in M){M[i]=!0;for(s in k)k[s]==i&&(a[s]=!0)}else if(n(t),a.filter.call(this,t)&&i in y)for(l=p(),r=0;r<y[i].length;r++)if(o=y[i][r],o.scope==l||"all"==o.scope){c=o.mods.length>0;for(s in M)(!M[s]&&e(o.mods,+s)>-1||M[s]&&e(o.mods,+s)==-1)&&(c=!1);(0!=o.mods.length||M[16]||M[18]||M[17]||M[91])&&!c||o.method(t,o)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function s(t){var i,n=t.keyCode,o=e(C,n);if(o>=0&&C.splice(o,1),93!=n&&224!=n||(n=91),n in M){M[n]=!1;for(i in k)k[i]==n&&(a[i]=!1)}}function r(){for(b in M)M[b]=!1;for(b in k)a[b]=!1}function a(t,e,i){var n,o;n=m(t),void 0===i&&(i=e,e="all");for(var s=0;s<n.length;s++)o=[],t=n[s].split("+"),t.length>1&&(o=_(t),t=[t[t.length-1]]),t=t[0],t=B(t),t in y||(y[t]=[]),y[t].push({shortcut:n[s],scope:e,method:i,key:n[s],mods:o})}function c(t,e){var n,o,s,r,a,c=[];for(n=m(t),r=0;r<n.length;r++){if(o=n[r].split("+"),o.length>1&&(c=_(o),t=o[o.length-1]),t=B(t),void 0===e&&(e=p()),!y[t])return;for(s=0;s<y[t].length;s++)a=y[t][s],a.scope===e&&i(a.mods,c)&&(y[t][s]={})}}function l(t){return"string"==typeof t&&(t=B(t)),e(C,t)!=-1}function u(){return C.slice(0)}function h(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function d(t){E=t||"all"}function p(){return E||"all"}function f(t){var e,i,n;for(e in y)for(i=y[e],n=0;n<i.length;)i[n].scope===t?i.splice(n,1):n++}function m(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""==e[e.length-1]&&(e[e.length-2]+=","),e}function _(t){for(var e=t.slice(0,t.length-1),i=0;i<e.length;i++)e[i]=k[e[i]];return e}function g(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,function(){i(window.event)})}function v(){var e=t.keymaster;return t.keymaster=S,e}var b,y={},M={16:!1,18:!1,17:!1,91:!1},E="all",k={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},D={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},B=function(t){return D[t]||t.toUpperCase().charCodeAt(0)},C=[];for(b=1;b<20;b++)D["f"+b]=111+b;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in k)a[b]=!1;g(document,"keydown",function(t){o(t)}),g(document,"keyup",s),g(window,"focus",r);var S=t.keymaster;t.keymaster=a,t.keymaster.setScope=d,t.keymaster.getScope=p,t.keymaster.deleteScope=f,t.keymaster.filter=h,t.keymaster.isPressed=l,t.keymaster.getPressedKeyCodes=u,t.keymaster.noConflict=v,t.keymaster.unbind=c,"undefined"!=typeof module&&(module.exports=a)}(window),keymaster.filter=function(){return!0},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:t(jQuery)}(function(t){function e(e){var o,s=e||window.event,r=[].slice.call(arguments,1),a=0,c=0,l=0,u=0,h=0;return e=t.event.fix(s),e.type="mousewheel",s.wheelDelta&&(a=s.wheelDelta),s.detail&&(a=s.detail*-1),s.deltaY&&(l=s.deltaY*-1,a=l),s.deltaX&&(c=s.deltaX,a=c*-1),void 0!==s.wheelDeltaY&&(l=s.wheelDeltaY),void 0!==s.wheelDeltaX&&(c=s.wheelDeltaX*-1),u=Math.abs(a),(!i||u<i)&&(i=u),h=Math.max(Math.abs(l),Math.abs(c)),(!n||h<n)&&(n=h),o=a>0?"floor":"ceil",a=Math[o](a/i),c=Math[o](c/n),l=Math[o](l/n),r.unshift(e,a,c,l),(t.event.dispatch||t.event.handle).apply(this,r)}var i,n,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var r=o.length;r;)t.event.fixHooks[o[--r]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=s.length;t;)this.addEventListener(s[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=s.length;t;)this.removeEventListener(s[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.hasMod("disable","change")&&(this.changeDisabled=!0),this._todayDate=this._getCurrentDate(),this.params.specialDays&&(this._specialDays=this.params.specialDays,this.setMod("special-days","yes")),this.params.limits&&this.setLimits(this.params.limits.min,this.params.limits.max),this.params.value?this.setDate(this.params.value):this._buildDatepicker(),this.changeDisabled||this.bindTo("mousewheel",this._onMouseWheel),this._checkLimits()}},setSpecialDays:function(t){this._specialDays=t,this._buildDatepicker()},setMinDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._maxDate&&t>this._maxDate)throw new Error("meccano:m-datepicker:  min date should be less then Max date");this._minDate=t,this.yearChooserControl&&this.yearChooserControl.attr("min",t.getFullYear())},setMaxDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._minDate&&t<this._minDate)throw new Error("meccano:m-datepicker: max date should be greater then Min date");this._maxDate=t,this.yearChooserControl&&this.yearChooserControl.attr("max",t.getFullYear())},setLimits:function(t,e){t&&this.setMinDate(t),e&&this.setMaxDate(e)},_checkLimits:function(){this._minDate&&this._toggleDirectionButton("previous"),this._maxDate&&this._toggleDirectionButton("next")},_toggleDirectionButton:function(t){var e=this[t+"Button"],i="next"==t?this._maxDate:this._minDate,n=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates[t].year,this._dates[t].month,"next"==t?1:this._dates[t].monthDays),o="next"==t?n>i:n<i;o&&e.delMod("hovered"),e.toggleMod("disabled","yes","",o)},_toggleMonthChooserButtons:function(){var t,e,i=0,n=11,o=this.monthChooserButtons[0];this._minDate&&this.gereatChooserData.year==this._minDate.getFullYear()&&(i=this._minDate.getMonth()),this._maxDate&&this.gereatChooserData.year==this._maxDate.getFullYear()&&(n=this._maxDate.getMonth()),this.monthChooserRadio.each(function(s){e=$(this),t=s<i||s>n,t&&(this.control.checked=!1,o.setMod(e,"checked","")),o.toggleMod(e,"disabled","yes","",t)})},_onMouseWheel:function(t,e,i,n){var o;return t.preventDefault(),!this._isChangeCalendarRunning&&(this._isChangeCalendarRunning=!0,(i<0||n>0)&&(o=this._changeMonth("next")),(i>0||n<0)&&(o=this._changeMonth("previous")),void(o||(this._isChangeCalendarRunning=!1)))},setSizes:function(){var t,e=this.findElem("bodies");if(!this._sizes){if(t=this.findElem("grid-table"),!t.width()||!t.height())return;this._sizes={gridWidth:t.width(),gridHeight:t.height(),titleHeight:this.findElem("title","position","current").height()}}e.css({width:this._sizes.gridWidth,height:this._sizes.gridHeight}),this.findElem("head").height(this._sizes.titleHeight),this._blockSizeSet||(this.domElem.width(this.domElem.outerWidth()),this.domElem.height(this.domElem.outerHeight()),this._blockSizeSet=!0)},_onTitleClick:function(){var t=this;this.toggleMod("show","great-chooser"),this.hasMod("show","great-chooser")?(this._subscribeChooserControlls(),this.gereatChooserData={year:this._dates.current.year,month:this._dates.current.month},this.yearChooser.val(this._dates.current.year),this.monthChooserButtons.forEach(function(e){e.val(t._dates.current.month.toString())}),this._toggleMonthChooserButtons()):this._unsubscribeChooserControlls()},_subscribeChooserControlls:function(){var t=this;this.monthChooserButtons.forEach(function(e){e.on("change",t._onChooserMonthChange,t)}),this.bindToDomElem(this.yearChooserControl,"input",this._onChooserYearInput),this.bindTo(this.chooser,"submit",this._onChooserSubmit)},_unsubscribeChooserControlls:function(){this.monthChooserButtons.forEach(function(t){t.un("change")}),this.unbindFromDomElem(this.yearChooserControl,"input"),this.unbindFrom(this.chooser,"submit")},_onChooserSubmit:function(t){t.preventDefault(),this.delMod("show"),this._buildDatepicker(BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._checkLimits()},_onChooserMonthChange:function(t){this.gereatChooserData.month=t.target.val()},_onChooserYearInput:function(t){var e=this.yearChooser.val();e&&(this._maxDate&&e>this._maxDate.getFullYear()||this._minDate&&e<this._minDate.getFullYear()||(this.yearChooser.val(e),this.gereatChooserData.year=e,this._toggleMonthChooserButtons()))},_bindToDates:function(){this.bindTo(this.findElem("dates"),"click",this._onDateChoose)},_onChangeMonthButtonClick:function(t){var e=t.target.getMod("target");this._isChangeCalendarRunning||this._changeMonth(e)},_changeMonth:function(t){var e=this,i=BEM.I18N("i-tanker__months","n"+(this._dates[t].month+1))+" "+this._dates[t].year,n=this.findElem("body","position","back"),o=this.findElem("body","position","current"),s=this.findElem("title","position","back"),r=this.findElem("title","position","current"),a=n.add(s),c=o.add(r),l=n.add(o).add(s).add(r);return!("previous"==t&&this.previousButton.hasMod("disabled")||"next"==t&&this.nextButton.hasMod("disabled"))&&(this.setMod(l,"transition","no").setMod(a,"direction",t),this._isChangeCalendarRunning=!0,BEM.DOM.update(n,BEMHTML.apply(this._buildDatepickerGridBEMJSON(this._dates[t]))),BEM.DOM.update(s,BEMHTML.apply(this._getTitleClickBEMJSON(i))),this._createDateContext({year:this._dates[t].year,month:this._dates[t].month}),setTimeout(function(){e.delMod(l,"transition").delMod(a,"direction").setMod(c,"direction",t)},50),n.on("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd",function(){e.setMod(l,"transition","no").setMod(a,"position","current").setMod(c,"position","back").delMod(c,"direction"),BEM.DOM.update(c,""),n.off(),e._bindToDates(),e._bindTitleClick(),e._isChangeCalendarRunning=!1,e.setSizes()}),this._checkLimits(),!0)},_getTitleClickBEMJSON:function(t){return{block:"m-datepicker",elem:"title-click",tag:"span",content:[t,{block:"awesome-icon",mods:{icon:"angle-down"}}]}},_bindTitleClick:function(){this.bindTo(this.findElem("title-click"),"click",this._onTitleClick)},_createDateContext:function(t){var e,i,n,o,s,r,a=t instanceof Date;e=a?t.getMonth():t.month,o=a?t.getFullYear():t.year,i=e-1<0?11:e-1,n=e+1>11?0:e+1,s=11===i?o-1:o,r=0===n?o+1:o,this._dates={current:this._fillDateContext(e,o),previous:this._fillDateContext(i,s),next:this._fillDateContext(n,r)}},_fillDateContext:function(t,e){return{month:t,year:e,startDay:this._getStartDay(t,e),monthDays:this._getMonthDays(t,e)}},_buildDatepicker:function(t){t?this._createDateContext(t):this.params.date?this._createDateContext(BEM.blocks["mi-helpers"].getDateFromHumanString(this.params.date+"-01")):this._isDateSelected?this._createDateContext(this._selectedDate):this._createDateContext(this._todayDate),BEM.DOM.update(this.domElem,BEMHTML.apply(this._getDatePickerBEMJSON())),this.changeDisabled||(this._findMainControlls(),this._subscribeMainControlls(),this._bindToDates()),this.setSizes()},_findMainControlls:function(){this.previousButton=this.findBlockInside({block:"button",modName:"target",modVal:"previous"}),this.nextButton=this.findBlockInside({block:"button",modName:"target",modVal:"next"}),this.monthChooserButtons=this.findBlocksInside("choose-month","radio-button"),this.monthChooserRadio=this.monthChooserButtons[0].findElem("radio"),this.yearChooser=this.findBlockInside("choose-year","input"),this.yearChooserControl=this.yearChooser.findElem("control"),this.chooser=this.findElem("great-chooser"),this.hasMod("has","clear")&&(this.clearButton=this.findBlockInside({block:"button",modName:"action",modVal:"clear"}))},_subscribeMainControlls:function(){this.previousButton.on("click",this._onChangeMonthButtonClick,this),this.nextButton.on("click",this._onChangeMonthButtonClick,this),this.clearButton&&this.clearButton.on("click",this.clearDate,this),this._bindTitleClick()},_onDateChoose:function(t){var e=$(t.target),i=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day")),n=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day","disabled","yes"));i&&!n&&(this._selectedDate=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates.current.year,this._dates.current.month,$(t.target).attr("data-content")),this._isDateSelected||(this._isDateSelected=!0),this.delMod(this.findElem("day","selected","yes"),"selected").setMod($(t.target),"selected","yes").trigger("change",{date:this.getDate()}),this.clearButton&&this.clearButton.delMod("disabled"))},_getDatePickerBEMJSON:function(){var t,e=[{block:"m-datepicker",elem:"head",content:this._getDatePickerHeadBEMJSON()},{block:"m-datepicker",elem:"bodies",content:[{elem:"body",elemMods:{position:"back"}},{elem:"body",elemMods:{position:"current"},content:this._buildDatepickerGridBEMJSON(this._dates.current)}]}];return this.changeDisabled||e.push({block:"m-datepicker",elem:"great-chooser",content:this._buildGreatChooserBEMJSON()}),this.hasMod("has","clear")&&(t=this._getFootElemBEMJSON({block:"button",mods:{theme:"normal",type:"simple",size:"s",action:"clear"},content:BEM.I18N("m-datepicker","clear")}),this._isDateSelected||(t.content.mods.disabled="yes"),e.push(t)),e},_buildGreatChooserBEMJSON:function(){return[{elem:"choose-year",content:{block:"input",mods:{theme:"normal",size:"s",clear:"no"},content:{elem:"control",attrs:{type:"number",min:this._minDate?this._minDate.getFullYear():"",max:this._maxDate?this._maxDate.getFullYear():""}}}},{elem:"choose-month",content:function(){for(var t=1,e=[],i=0;i<4;i++)e.push({block:"radio-button",mods:{theme:"normal",size:"s",quorter:"q"+(i+1)},js:{id:"1234"},name:this._uniqId+"-radio",inputAttrs:{name:"q"+(i+1)},content:function(){for(var e=[],i=1;i<4;i++)e.push({elem:"radio",controlAttrs:{value:t-1,required:"required"},content:BEM.I18N("i-tanker__months","short"+t)}),t++;return e}()});return e}.bind(this)()},{elem:"chooser-submit",content:{block:"button",mods:{theme:"normal",size:"s",type:"month"},type:"submit",content:"OK"}}]},_getDatePickerHeadBEMJSON:function(){var t,e=BEM.I18N("i-tanker__months","n"+(this._dates.current.month+1))+" "+this._dates.current.year;return t=this.changeDisabled?{elem:"titles",content:{elem:"title",elemMods:{position:"current"},content:e}}:[{elem:"left",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"previous"},content:"←"}},{elem:"titles",content:[{elem:"title",elemMods:{position:"current"},content:this._getTitleClickBEMJSON(e)},{elem:"title",elemMods:{position:"back"}}]},{elem:"right",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"next"},content:"→"}}]},_buildDatepickerGridBEMJSON:function(t){var e=this,i=[],n=this._buildGridMap(t);return i.push({elem:"thead",tag:"thead",content:{elem:"thead-line",tag:"tr",content:function(){var t,e=[];for(t=0;t<7;t++)e.push({elem:"day-name",tag:"th",content:{elem:"day-name-i",content:BEM.I18N("m-datepicker__short-days",t+1)}});return e}()}}),i.push({elem:"dates",tag:"tbody",content:function(){for(var i=[],o=0;o<n.length;o++)i.push({elem:"week",tag:"tr",content:function(){var i,s,r,a,c=[],l=e._maxDate||e._minDate,u=t.month==e._todayDate.getMonth()&&t.year==e._todayDate.getFullYear(),h=e._selectedDate&&t.month==e._selectedDate.getMonth()&&t.year==e._selectedDate.getFullYear(),d=BEM.blocks["mi-helpers"].getUTC_YMD(t.year,t.month,1);a=1===(t.month+1).toString().length?"0"+(t.month+1):t.month+1;for(var p=0;p<7;p++)n[o][p]?(i={elem:"day",tag:"td",elemMods:{},attrs:{"data-content":n[o][p]}},e._specialDays&&(s=1===n[o][p].toString().length?"0"+n[o][p].toString():n[o][p],r=t.year+"-"+a+"-"+s,e._specialDays[r]&&(i.attrs.style="background: "+e._specialDays[r].background+"; ",e._specialDays[r].color&&(i.attrs.style=i.attrs.style+"color: "+e._specialDays[r].color),i.attrs.title=e._specialDays[r].title)),5!==p&&6!==p||(i.elemMods.weekend="yes"),h&&n[o][p]===e.getSelectedDay()&&(i.elemMods.selected="yes"),u&&n[o][p]===e._todayDate.getDate()&&(i.elemMods.today="yes"),l&&(d.setDate(n[o][p]),(e._minDate&&d<e._minDate||e._maxDate&&d>e._maxDate)&&(i.elemMods.disabled="yes")),c.push(i)):(i={elem:"day-empty",tag:"td"},c.push(i));return c}()});return i}()}),{block:"m-datepicker",elem:"grid",content:[{elem:"grid-table",tag:"table",content:i}]}},_buildGridMap:function(t){var e,i=0,n=new Array(7),o=[];for(e=1;e<=t.monthDays;e++)1==e&&(i=t.startDay-1),n[i]=e,6==i?(o.push(n),n=new Array(7),i=0):i++,e+1>t.monthDays&&o.push(n);return o.length<6&&o.push(new Array(7)),o},_isChangeCalendarRunning:!1}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{clearDate:function(){this.__base.apply(this,arguments),this._buildDatepicker(new Date(this._dates.current.year,this._dates.current.month,1)),this.clearButton&&this.clearButton.setMod("disabled","yes")},_onChooserSubmit:function(t){t.preventDefault();var e=!isNaN(new Date(this.gereatChooserData.year,this.gereatChooserData.month).getTime()),i=void 0;this.delMod("show"),e&&(i=BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._buildDatepicker(i),this._checkLimits()}}),BEM.DOM.decl({name:"m-calendar",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.keyboard&&window.keymaster("enter, left, right, up, down",this._onKeyDown.bind(this))}},destruct:function(t){this.params.keyboard&&window.keymaster.unbind("enter, left, right, up, down",this),this.__base(t)},_onKeyDown:function(t){var e,i,n,o=this.params;this.__self.activeCalendar===this&&(this._datePicker._selectedDate?e=Number(this._datePicker._selectedDate):i=o.date?new Date(o.date):new Date,i||"Left"!==t.keyIdentifier?i||"Right"!==t.keyIdentifier?i||"Up"!==t.keyIdentifier?i||"Down"!==t.keyIdentifier||(t.preventDefault(),i=new Date(e+this.__self.MILLISECONDS_IN_WEEK)):(t.preventDefault(),i=new Date(e-this.__self.MILLISECONDS_IN_WEEK)):i=new Date(e+this.__self.MILLISECONDS_IN_DAY):i=new Date(e-this.__self.MILLISECONDS_IN_DAY),n=!o.limits||o.limits&&(!o.limits.max||BEM.blocks["mi-helpers"].getDateFromHumanString(o.limits.max)>=i)&&(!o.limits.min||BEM.blocks["mi-helpers"].getDateFromHumanString(o.limits.min)<=i),!n||"Left"!==t.keyIdentifier&&"Right"!==t.keyIdentifier&&"Up"!==t.keyIdentifier&&"Down"!==t.keyIdentifier?"Enter"===t.keyIdentifier&&this._datePicker._selectedDate&&this.setDate(BEM.blocks["mi-helpers"].dateFormat(this._datePicker._selectedDate,"yyyy-mm-dd")):this.setDate(BEM.blocks["mi-helpers"].dateFormat(i,"yyyy-mm-dd"),!0))},_getDatePickerBEMJSON:function(){var t={block:"m-datepicker",mods:{type:"month"},js:["value","date","specialDays","limits"].reduce(function(t,e){return this.params[e]&&(t[e]=this.params[e]),t}.bind(this),{})};return this.hasMod("has","clear")&&(t.mods.has="clear"),t},setSpecialDays:function(t){return this._datePicker.setSpecialDays(t)},setMinDate:function(t){return this._datePicker.setMinDate(t)},setMaxDate:function(t){return this._datePicker.setMaxDate(t)},setLimits:function(t,e){return this._datePicker.setLimits(t,e)},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.__self.activeCalendar=null},_onDatePickerPopupShow:function(){this.__base.apply(this,arguments),setTimeout(function(){this.__self.activeCalendar=this}.bind(this),200)}},{MILLISECONDS_IN_DAY:864e5,MILLISECONDS_IN_WEEK:6048e5}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){return this.__base.apply(this,arguments)!==!1&&void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.__base.apply(this,arguments),this.input.bindTo("click",t._onTogglerClick.bind(this)),this.input.on("focus",this._onTogglerClick,this),this.input.bindTo(this.input.domElem,"mousedown",function(){t.input.un("focus")})},disabled:function(t,e){this.input.setMod(t,e)}},_onDateChange:function(t,e){var i=BEM.blocks["m-calendar"].dateFormat,n=e.date,o=e.fromArrow;o||(n?n.from?this.input.val(i(n.from)+" — "+i(n.to)):this.input.val(i(n)):this.input.val("")),this.__base.apply(this,arguments)},_onTogglerClick:function(){var t=this;this.input._isDatePickerOpened=!0,this.__base.apply(this,arguments),this.bindToDoc("keydown.close",function(e){9===e.which&&(this._datePickerPopup.delMod("visible"),t.unbindFromDoc("keydown.close"))})},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.input.delMod("focused"),this.input.on("focus",this._onTogglerClick,this),this.unbindFromDoc("keydown.close")}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.input&&(this.__base.apply(this,arguments),this.input.bindTo("pointerclick",t._onTogglerClick.bind(t)),this.input.elem("control").on("focus",function(){t.input.elem("control").blur(),t._onTogglerClick.call(t)}))}}}),BEM.DOM.decl("date-range-input",{val:function(t,e){var i=this.findBlockInside("from","date-input"),n=this.findBlockInside("to","date-input");return t||e?(t&&i.val(t),e&&n.val(e),this):[i.val(),n.val()]}}),BEM.DOM.decl("date-range-input",{onSetMod:{js:function(){var t=this,e=t.findBlockInside(t.elem("from"),"m-calendar"),i=t.findBlockInside(t.elem("to"),"m-calendar"),n={min:e.params.limits.min,max:i.params.limits.max},o=function(e,i,o){var s=o||n[i],r=e.getDate(),a=e.params;a.value=r?BEM.blocks["mi-helpers"].getHumanStringFromDate({date:r}):"",a.limits[i]=s,e._buildDatePicker(),t.trigger("change")};t.controls={from:e,to:i},o(i,"min",e.params.value),o(e,"max",i.params.value),e.on("change",function(t,e){o(i,"min",BEM.blocks["mi-helpers"].dateFormat(e,"yyyy-mm-dd"))}),i.on("change",function(t,i){o(e,"max",BEM.blocks["mi-helpers"].dateFormat(i,"yyyy-mm-dd"))})}}}),BEM.DOM.decl("payment-question",{onSetMod:{js:function(){var t=this,e=t.elem("control"),i=t.elemParams(e),n=t.findBlockInside(e,"input")||t.findBlockInside(e,"radio-button")||"";t.min=i.min,t.max=i.max,t.amount=i.min,t.price=i.price,t.updatePrice(),n.on("change",function(){t.amount=n.val(),t.updatePrice()})}},min:1,max:1,price:0,amount:1,getPriceStr:function(){var t=this,e=t.amount,i=t.price,n=e*i;(e>t.max||e<t.min)&&(n=0);var o=accounting.formatNumber(n,0," ");return o},updatePrice:function(){var t=this,e=t.findBlockInside("price"),i=e.elem("val");BEM.DOM.update(i,t.getPriceStr())}}),BEM.DOM.decl("survey-question",{onSetMod:{js:function(){var t=this,e=BEM.blocks["cf-helpers"],i=t.findBlockOutside("survey");t.controls=t.getControls(),t.formId=i.params.formId,"preview"!==i.getMod("type")&&(t.surveyStorage=e.getStorage("sessionStorage"));var n="yes"!==i.getMod("form-returned")&&"yes"!==i.getMod("editing-answer");n&&t.setPresetQuestionAnswer(),t.on("validation-change",this._onValidationChange,this),t.controls.forEach(function(e){var i=null;e.on("change",function(){clearTimeout(i),i=setTimeout(t._onChangeControl(e),300)})})}},setPresetQuestionAnswer:function(){var t=this.getFormStorageData();this.params.defaultFromQuery?this.presetAnswer(this.params.defaultFromQuery,"query"):t&&t[this.params.name]&&this.presetAnswer(t[this.params.name],"storage")},presetAnswer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";this.setPresetAnswer(t),BEM.blocks["fi-metrika"].setParams({"Предзаполнение":_defineProperty({},e,this.getMod("widget"))})},setPresetAnswer:function(){},getControls:function(){return[]},checkValueWithCond:function(t,e){var i=this.getControls(),n=!1;return i.forEach(function(i){var o=i.val();switch(t){case"eq":o===e&&(n=!0);break;case"neq":o!==e&&(n=!0)}}),n},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){var e=$.trim(t.val());return Boolean(e)})}}},clearValue:function(){},val:function(){},_onChangeControl:function(t){var e=this.getMod("widget"),i=this.params.name,n={captcha:!0,agreement:!0,"autocomplete-selection":!0},o=void 0;if(this.trigger("change"),this.surveyStorage&&!n[e]){var s=this.getFormStorageData()||{};switch(e){case"checkbox":o=t.isChecked()?"True":"False";break;case"checkbox-list":case"date-widget":o=this.val();break;default:o=t.val()}o?s[i]=o:s[i]&&delete s[i],this.setFormStorageData(s)}},_onValidationChange:function(t,e){e.isValid?this.delMod("invalid"):this.setMod("invalid","yes")},deleteFromStorage:function(t){var e=this.getFormStorageData()||{};e[t]&&delete e[t],this.setFormStorageData(e)},getFormStorageData:function(){return this.surveyStorage&&this.surveyStorage.getData(this.getFormStorageKey())},setFormStorageData:function(t){this.surveyStorage&&t&&this.surveyStorage.setItem(this.getFormStorageKey(),t)},getFormStorageKey:function(){return BEM.blocks["cf-helpers"].getDraftStorageKey(this.formId)}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"number"},{getControls:function(){var t=this.findBlockInside("input")||this.findBlockInside("textinput"),e=t&&t.findElem("control")||[],i=[];return e.length&&(i=i.concat(e)),i},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.incorrectNumber=function(){return!t.controls[0][0].validity||!t.controls[0][0].validity.badInput},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"tickets"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||this.findBlocksInside("radio-button")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"agreement"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("checkbox")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.isChecked())})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox-list"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},val:function(){var t=[];return this.controls.forEach(function(e){e.isChecked()&&t.push(e.val())}),t.length?t:void 0},setPresetAnswer:function(t){var e=this.getControls();e.length&&(t=[].concat(t),e.forEach(function(e){(t.includes(e.val())||t.includes(e.getMod("slug")))&&e.setMod("checked","yes")}))},checkValueWithCond:function(t,e){if(!["eq","neq"].indexOf(t)===-1)return!0;var i=this.val()||[],n=i.length>0;if(!e)return"eq"===t?!n:n;var o=i.indexOf(e)!==-1;return"eq"===t?o:!o},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.some(function(t){return Boolean(t.isChecked())})},noOptions:function(){return!t.hasMod("required","yes")||!t.controls||Boolean(t.controls.length)}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},setPresetAnswer:function(t){var e=this.controls||[],i=e[0]||"";i&&i.setMod("checked","True"===t&&"yes")},checkValueWithCond:function(t,e){var i=this.controls||[],n=i[0]||"",o=!1;if(n){var s=n.isChecked(),r=s?"True":"False";switch(t){case"eq":r===e&&(o=!0);break;case"neq":r!==e&&(o=!0)}}return o},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.isChecked())})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"radio-list"},{getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls;Array.isArray(t)&&(t=t[0]),e.length&&e.forEach(function(e){var i=e.params.slugMap||{},n=i[t]||t;e.val(n)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return Boolean(t.elem("radio").length)})},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("select")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.val())&&"0"!==t.val()})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"file"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("attach")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){var e=t.params.alreadyUploaded||!1;return Boolean(t.val())||Boolean(e)})},fileTooLarge:function(){return t.controls.every(function(t){var e=t.params.maxFileSize||0,i=t.elem("control")[0]||{},n=i.files[0]||{},o=n.size||0;return e=parseInt(e,10),e=1024*e*1024,e>=o})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"multifile"},{onSetMod:{js:function(){this.controls=this.getControls();var t=this.controls[0];t.on("upload",this.onUpload()).on("remove",this.onRemove()).on("abort",this.onAbort()).on("add",this.onAdd()),this.addExistingFiles(),this.addHiddenFileInput("")}},getControls:function(){return this.findBlocksInside("file-upload")||[]},setPresetAnswer:function(t){if(t){if("dataUrl"!==t.format)throw t.format?new Error("Unknown format: "+t.format):new Error("Argument 'format' is required");if("string"!=typeof t.dataUrl)throw new Error("Argument 'dataUrl' must be a string");this.controls[0].addFileByDataUrl(t.dataUrl,t.name)}},addExistingFiles:function(){var t=this,e=this.controls[0],i=e.findBlocksInside("file");i.forEach(function(e){var i=e.responseData&&e.responseData.id;t.addHiddenFileInput(i)})},onUpload:function(){
var t=this,e=t.findBlockOutside("survey"),i=t.controls[0];return function(n,o){var s=o&&o.id||"";s&&t.addHiddenFileInput(s),i.isUploadInProgress()||e.delMod("progress")}},onAbort:function(){var t=this,e=t.findBlockOutside("survey"),i=t.controls[0];return function(){i.isUploadInProgress()||e.delMod("progress")}},onRemove:function(){var t=this;return function(e,i){var n=i&&i.id||"";n&&t.removeHiddenFileInput(n)}},onAdd:function(){var t=this,e=t.findBlockOutside("survey"),i=t.controls[0];return function(){i.isUploadInProgress()&&e.setMod("progress","yes")}},addHiddenFileInput:function(t){var e=this.controls[0],i=this.params&&this.params.name||"",n={block:"file",mods:{hidden:"yes",id:t},name:i,content:t};BEM.DOM.prepend(e.domElem,BEMHTML.apply(n))},removeHiddenFileInput:function(t){var e=this.findBlockInside({block:"file",modName:"id",modVal:t});e.destruct()}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"captcha"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"input"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"textarea"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"select"},{getControls:function(){return this.findBlocksInside("select")||[]},setPresetAnswer:function(t){var e=this.controls;Array.isArray(t)&&(t=t[0]),e.length&&e.forEach(function(e){var i=e.params.slugMap||{},n=i[t]||t;e.val(n)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return Boolean(t.elem("option").length)})},e},checkValueWithCond:function(t,e){var i=this.getControls(),n=!1;return i.forEach(function(i){var o=i.val()||"";switch(t){case"eq":o===e&&(n=!0);break;case"neq":o!==e&&(n=!0)}}),n}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"autocomplete-selection"},{onSetMod:{js:function(){var t=this;this.autocomplete=this.findBlockOn("control","input"),this.autocomplete.on("select",t._onAutocompleteSelect,t),this.autocomplete.on("change",t._onAutocompleteChange,t),this.autocomplete.on("blur",t._onAutocompleteBlur,t),this.params.isMultiple&&(this._multipleChoice={}),this.__base.apply(this,arguments),this.params.savedValue&&this.params.savedValue.length&&this.presetValue(this.params.savedValue)}},getValidators:function(){var t=this,e=this.__base.apply(this,arguments),i=this.autocomplete.getDataprovider();return e.noOptions=function(){if(!t.hasMod("required","yes")||!t.autocomplete.length)return!0;var e=$.Deferred();return i.get("",function(t){e.resolve(Boolean(t.items&&t.items.length))}),e},e.required=function(){return!t.hasMod("required","yes")||Boolean(t.val())},e},checkValueWithCond:function(t,e){var i=this.val();return!!i&&Object.keys(i).some(function(i){return{eq:i===e,neq:i!==e}[t]})},clearValue:function(){this.autocomplete.val(""),this.params.isMultiple?(BEM.DOM.replace(this.elem("data"),BEMHTML.apply({block:"survey-question",elem:"data",elemMods:{multiple:"yes"}})),this._multipleChoice={}):this._getHiddenInput().val("")},val:function t(){var e=void 0,t=void 0,i=void 0,n=void 0;return this.params.isMultiple?(e=this.findBlocksInside("data","autocomplete-item"),e.length&&(t={},e.forEach(function(e){var i=e.getData();t[i.value]=i.label}))):(i=this._getHiddenInput().val(),n=this.autocomplete.val(),i&&n&&(t={},t[i]=n)),t},_notifyValueChange:function(t){this.trigger("change",{value:t})},_getHiddenInput:function(){return this._hiddenInput||(this._hiddenInput=$(BEM.DOM.append(this.elem("data"),BEMHTML.apply({tag:"input",attrs:{type:"hidden",name:this.params.name,value:""}})))),this._hiddenInput},_onAutocompleteSelect:function(t,e){var i=e.item||"",n=i.params&&i.params.id||"",o=this.autocomplete.val();this.params.isMultiple?(this._addItem(o,n),this.autocomplete._blur()):n&&this._getHiddenInput().val(n),this._updateLocalStorage(n,o)},_onAutocompleteChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=void 0;this.params.isMultiple||e.silent||(i=this._getHiddenInput().val(),this._getHiddenInput().val(""),this._updateLocalStorage(i))},_onAutocompleteBlur:function(){if(this.params.isMultiple)this.autocomplete.clearInput(),this.trigger("change");else{var t=this._getHiddenInput().val();t||this.autocomplete.clearInput(),this._notifyValueChange(t)}},_addItem:function(t,e){if(!this._multipleChoice[e]){var i=BEM.DOM.append(this.elem("data"),BEMHTML.apply({block:"autocomplete-item",data:{label:t,name:this.params.name,value:e}}));this._multipleChoice[e]=i.bem("autocomplete-item"),this._multipleChoice[e].on("removeItem",this._removeItem,this)}},_removeItem:function(t,e){var i=t.block,n=e.data;delete this._multipleChoice[n.value],i.destruct(),this._updateLocalStorage(n.value)},_loadSuggestByIds:function(t){var e,i=this.autocomplete.getDataprovider().params.url,n=t.map(function(t){return BEM.create("i-api-request").run({url:i,data:{id:t}})});return(e=$).when.apply(e,_toConsumableArray(n)).then(function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[1])&&e[1].forEach(function(e){var i=e[1],n=i.id,o=i.text;t[n]=o}),t},{});return n})},setPresetAnswer:function(t){var e=this,i=void 0;i=Array.isArray(t)?t:"object"===("undefined"==typeof t?"undefined":_typeof(t))?Object.keys(t):[t],this._loadSuggestByIds(i).then(function(t){var n=i.reduce(function(e,i){return t[i]&&e.push({id:i,text:t[i]}),e},[]);n.length&&e.presetValue(n)})},presetValue:function(t){var e=this;this.params.isMultiple?t.forEach(function(t){e._addItem(t.text,t.id)}):(e._getHiddenInput().val(t[0].id),e.autocomplete.val(t[0].text,{silent:!0}))},_updateLocalStorage:function(t,e){if(t){var i=this.params.name,n=this.getFormStorageData()||{};n[i]=n[i]||{};var o=n[i];e?o[t]=e:o[t]&&delete o[t],this.setFormStorageData(n)}}}),BEM.DOM.decl("autocomplete-item",{onSetMod:{js:function(){this.bindTo("clear","pointerclick",this._onClear)}},getData:function(t){return t?this.params[t]:this.params},getLabel:function(){return this.getData("label")},getName:function(){return this.getData("name")},val:function(t){return void 0!==t?(t=null===t?"":t.toString(),this.elem("data").val(t),this):this.elem("data").val()},_onClear:function(){this.unbindFromDomElem(this.elem("clear"),"pointerclick"),this.trigger("removeItem",{data:this.getData()})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date-widget"},{val:function(t,e){var i=this.getControls()[0];if(t||e)return i.val(t,e),this;var n=[].concat(i.val());return n.length?n:void 0},getControls:function(){return this.controls=this.findBlockInside("date-range-input")||this.findBlockInside("date-input"),this.controls=[].concat(this.controls),this.controls},checkValueWithCond:function(t,e){var i=this.val();if(e=new Date(e),isNaN(e.getTime())){var n=i.some(function(t){return t});return{eq:!n,neq:n}[t]||!1}return e.setHours(e.getHours()+e.getTimezoneOffset()/60),i.some(function(i){var n=e.getTime(),o=i&&i.getTime();return{gt:o>n,eq:o===n,lt:o<n,neq:o!==n}[t]})},getValidators:function(){var t=this;return{required:function(){if(!t.hasMod("required","yes"))return!0;var e=t.val();return e&&e.every(function(t){return Boolean(t)})}}},setPresetAnswer:function(t){var e=this.getControls()[0],i=this.val();t=[].concat(t),i.length&&Array.isArray(t)&&(t=t.map(function(t){var e=new Date(t),i=e.setHours(e.getHours()-e.getTimezoneOffset()/60);return t?new Date(i):t}),e.val.apply(e,t))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"scale"},{getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls,i="string"==typeof t;e.length&&e.forEach(function(e){var n=e.getMod("id");i?e.val(t):n in t&&e.val(t[n])})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"questions-group"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.addQuestionsGroupBtn=this.findBlockOn("add-questions-group","button2"),this._COPY_ID_DELIMETER="__",this._COPY_SUBNUM_DELIMETER="_",this.addQuestionsGroupBtn&&this.addQuestionsGroupBtn.on("click",this._addQuestionsGroup,this),this._initCopyNum(),this._addFilledQuestionsGroup(),this.domElem.on(this._buildEventName("click"),this.buildSelector("list-remove"),this._onListRemove.bind(this))}},_initCopyNum:function(){var t=this,e=this._getQuestionsLists().map(function(e,i){return t.elemParams($(i)).copyNum});this.copyNum=Math.max.apply(null,e)},_addFilledQuestionsGroup:function(){var t=this._getQuestionsLists();if(t&&0!==t.length)for(var e=this.elemParams($(t[0])).fields,i=0;this._isGroupFilled(e,this.copyNum+1)&&i<1e3;)this._addQuestionsGroup(),i++},_isGroupFilled:function(t,e){var i=this.params||{},n=i.extraSurveyData;n=void 0===n?{}:n;for(var o=n.query,s=void 0===o?{}:o,r=0;r<t.length;r++){var a=this._getCopyId(t[r].name,e);if(s.hasOwnProperty(a))return!0}return!1},_addQuestionsGroup:function(){this.copyNum++;var t=this._getQuestionsLists(),e=this._getGroupFieldsCopy(this.copyNum),i=BEM.DOM.after(t[t.length-1],BEMHTML.apply({block:"survey-question",elem:"list",elemMods:{closable:"yes"},fields:e,extraSurveyData:this.params.extraSurveyData,copyNum:this.copyNum,js:{copyNum:this.copyNum,fields:e}})).bem("survey-question__list"),n=i.findBlocksInside("survey-question");return this.trigger("addQuestions",n),i},_getQuestionsLists:function(){return this.findElem("list")},_getGroupFieldsCopy:function(t){var e=this._getQuestionsLists(),i=this.elemParams($(e[0])).fields,n={};i.forEach(function(t){n[t.name]=t});var o=i.map(function(e){var i=void 0;e.value=null,e.errors=[],e.name&&(e.name=this._getCopyId(e.name,t),i=e.name),e.tags=e.tags&&e.tags.map(function(e){return e.attrs?(i=i||e.attrs.name||e.attrs.id,e.attrs.name&&(e.attrs.name=this._getCopyId(e.attrs.name,t)),e.attrs.id&&(e.attrs.id=this._getCopyId(e.attrs.id,t)),e.attrs.value=null,e.content=null,e.attrs.checked=null,e):e},this),e.data_source&&e.data_source.filters&&(e.data_source.filters=e.data_source.filters.map(function(e){return n[e.field]&&(e.field=this._getCopyId(e.field,t)),e},this));var o=e.show_conditions||e.other_data&&e.other_data.show_conditions;return o&&(o=o.map(function(e){var i=e.map(function(e){return n[e.field]&&(e.field=this._getCopyId(e.field,t)),e},this);return i},this)),e},this);return o},_getCopyId:function(t,e){var i=t.split(this._COPY_ID_DELIMETER),n=i[i.length-1]||"",o=n.split(this._COPY_SUBNUM_DELIMETER);o.shift();var s=o[o.length-1];return i[0]+this._COPY_ID_DELIMETER+e+(s?this._COPY_SUBNUM_DELIMETER+s:"")},_onListRemove:function(t){var e=$(t.target).closest(this.buildSelector("list")),i=e.bem("survey-question__list").findBlocksInside("survey-question");BEM.DOM.destruct(e),this.trigger("removeQuestions",i)}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"payment"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.controls=this.getControls()||[]}},getControls:function(){return this.findBlocksInside("payment")||[]},getValidators:function(){var t=this,e=this.__base.apply(this,arguments),i=this.controls[0];return i.hasMod("fixed",!0)?e:(e.required=function(){if(!t.hasMod("required","yes"))return!0;var e=i.val()||"",n=e.split(" "),o=_slicedToArray(n,1),s=o[0];return Boolean(s)&&"0"!==s},e.isCorrectNumber=function(){return i.isValidAmount()},e.checkMaxAmount=function(){return!i.isValidAmount()||i.checkMaxAmount()},e)},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl("survey-embed-api",{onSetMod:{js:function(){this._surveyBlock=this.findBlockInside("survey"),this.bindToWin("message",this._handlePostMessage)}},_handlePostMessage:function(t){var e=t.originalEvent,i=this._parseData(e.data);if(i){var n={"set-question-value":this._onMessageSetQuestionValue};n.hasOwnProperty(i.message)&&"function"==typeof n[i.message]&&n[i.message].call(this,i)}},_parseData:function(t){var e="undefined"==typeof t?"undefined":_typeof(t);if("object"===e&&null!==t)return t;if("string"===e)try{return JSON.parse(t)}catch(t){}return null},_getQuestionBySlug:function(t){return this._surveyBlock.findBlockInside({block:"survey-question",modName:"name",modVal:t})},_onMessageSetQuestionValue:function(t){var e=t.slug,i=t.value,n=this._getQuestionBySlug(e);return n?void n.presetAnswer(i,"embed"):void console.error("No question with slug "+e)}}),function(t,e){var i=0;t.ajaxTransport("iframe",function(n){if(n.async){var o=n.initialIframeSrc||"javascript:false;",s=void 0,r=void 0,a=void 0;return{send:function(c,l){s=t('<form style="display:none;"></form>'),s.attr("accept-charset",n.formAcceptCharset),a=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+a+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+a+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+a+"_method=PATCH",n.type="POST"),i+=1,r=t('<iframe src="'+o+'" name="iframe-transport-'+i+'"></iframe>').bind("load",function(){var i=void 0,a=t.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var i=void 0;try{if(i=r.contents(),!i.length||!i[0].firstChild)throw new Error}catch(t){i=e}l(200,"success",{iframe:i}),t('<iframe src="'+o+'"></iframe>').appendTo(s),window.setTimeout(function(){s.remove()},0)}),s.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(s)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(i=n.fileInput.clone(),n.fileInput.after(function(t){return i[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",a[e]||n.paramName)}),s.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),s.submit(),i&&i.length&&n.fileInput.each(function(e,n){var o=t(i[e]);t(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)})}),s.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",o),s&&s.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var i=e&&e[0];return i&&t.isXMLDoc(i)?i:t.parseXML(i.XMLDocument&&i.XMLDocument.xml||t(i.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}(jQuery),$.support.xhrFormDataFileUpload=Boolean(window.FormData),BEM.DOM.decl("file",{responseData:void 0,size:0,uploadingProcess:null,onSetMod:{js:function(){var t=this,e=t.elem("delete");t.bindTo(e,"pointerclick",function(){t.uploadingProcess?(t.dontThrowError=!0,t.trigger("abort"),t.uploadingProcess.abort()):t.trigger("remove",t.responseData),t.destruct()})}},setData:function(t){var e=this;return e.size=t.size||0,window.File&&t instanceof File||window.Blob&&t instanceof Blob?(this.fileData=t,this.upload()):this.responseData=t,this},setFileInput:function(t){this.fileInput=t,this.fileInput.val()&&!this.isXHRUpload()&&this.uploadViaIframe()},upload:function(){var t=this,e=new FormData,i=t.fileData;t.setMod("progress","yes"),e.append("file",i,i.name),t.uploadingProcess=BEM.create("i-api-request"),t.uploadingProcess.run({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),data:e,processData:!1,contentType:!1,dataType:"json"}).done(t.onUploadSuccess()).fail(t.onUploadError()).always(t.onComplete())},uploadViaIframe:function(){var t=this,e=t.fileInput;t.setMod("progress","yes"),t.uploadingProcess=$.ajax({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),formData:[{name:"sk",value:BEM.blocks["i-global"].param("secretkey")},{name:"visitId",value:BEM.blocks["i-global"].param("visitId")}],fileInput:e,paramName:"file",dataType:"iframe json",success:t.onUploadSuccess(),error:t.onUploadError()})},isXHRUpload:function(){return $.support.xhrFormDataFileUpload},onUploadSuccess:function(){var t=this;return function(e){t.responseData=e,t.trigger("upload",t.responseData),t.delMod("progress")}},onUploadError:function(){var t=this;return function(e){var i=e.responseText||"",n=void 0,o=BEM.I18N("file","default-error-text");if(!t.dontThrowError){try{n=JSON.parse(i)}catch(t){}n?(o=n.errors||[],o=o.join("<br/>")):i&&(o=i),t.trigger("upload",{id:"error"}),t.trigger("remove",{id:"error"}),t.trigger("alert",{msg:o}),t.destruct()}}},onComplete:function(){var t=this;return function(){t.uploadingProcess=null}},val:function(){return this.params&&this.params.attrs&&this.params.attrs.name||""}}),BEM.DOM.decl({name:"button",modName:"active",modVal:"no"},{onSetMod:{hovered:function(){return!1},pressed:function(){return!1}}},{}),BEM.DOM.decl("file-upload",{attached:0,uploaded:0,maxFilesCount:1,maxFilesSize:10,filesCountLimitStr:"",filesSizeLimitStr:"",attachedSize:0,onSetMod:{js:function(){var t=this,e=this.params,i=e.files||[];this.survey=this.findBlockOutside("survey"),this.attachButton=this.findBlockInside("attach"),this.fileInput=this.attachButton.findElem("control"),this.maxFilesCount=e.maxFilesCount,this.maxFilesSize=e.maxFilesSize,this.filesCountLimitStr=BEM.I18N("file-upload","files-limit-error",{count:this.maxFilesCount}),this.filesSizeLimitStr=BEM.I18N("file-upload","size-limit-error",{size:this.maxFilesSize}),i.length&&i.forEach(function(e){t.uploaded++,t.createFileView(e)});var n=this.attachButton.findBlockInside("button");n.on("press",function(){t.survey.closeAlert()}),this.attachButton.bindTo("change",function(e){var i=$(e.target),n=t.getFileInputFiles(i);t.attemptAddFiles(n)})}},attemptAddFiles:function(t){var e=this;this.checkFilesCountLimit(t.length)?this.survey.showAlert(this.filesCountLimitStr,this.attachButton):this.checkFilesSizeLimit(t)?this.survey.showAlert(this.filesSizeLimitStr,this.attachButton):t.forEach(function(t){e.createFileView(t)}),this.attachButton.resetFile()},checkFilesCountLimit:function(t){var e=this;return e.attached+t>e.maxFilesCount},checkFilesSizeLimit:function(t){var e=this,i=parseInt(e.maxFilesSize,10),n=0;return i=1024*i*1024,t.forEach(function(t){t.size&&(n+=t.size)}),e.attachedSize+n>i},getFileInputFiles:function(t){var e=$.makeArray(t.prop("files")),i=void 0;return e.length||(i=t.prop("value"),i&&(e=[{name:i.replace(/^.*\\/,"")}])),e},val:function t(){var e=this,i=e.findBlocksInside("file-list","file"),t=[];return i.forEach(function(e){t.push(e.val())}),t.join(",")},getFileList:function(){var t=this,e=t.findElem("file-list");return e.length||(BEM.DOM.prepend(t.domElem,BEMHTML.apply({block:"file-upload",elem:"file-list"})),e=t.findElem("file-list")),e},createFileView:function(t){var e=this,i=String(Number(new Date)),n=t.size||0,o=e.getFileList(),s=e.fileAttrs||{};s.name=t.name;var r={block:"file",mods:{timestamp:i},fileAttrs:s},a=BEMHTML.apply(r);e.fileInput=e.attachButton.findElem("control"),BEM.DOM.append(o,a),e.attached++,e.attachedSize+=n,e.trigger("add"),e.findBlockInside({block:"file",modName:"timestamp",modVal:i}).on("upload",e.onFileUpload()).on("remove",e.onFileRemove()).on("abort",e.onFileUploadAborted()).on("alert",e.onFileUploadAlert()).setData(t).setFileInput(e.fileInput)},removeAttached:function(t){var e=this,i=t.target;e.attached--,e.attachedSize-=i.size,e.attached||e.getFileList().remove()},onFileUpload:function(){var t=this;return function(e,i){t.uploaded++,t.trigger("upload",i)}},onFileUploadAborted:function(){var t=this;return function(e){t.removeAttached(e),t.trigger("abort")}},onFileUploadAlert:function(){var t=this,e=t.findBlockOutside("survey");return function(i,n){n=n||{},e.showAlert(n.msg,t.attachButton)}},onFileRemove:function(){var t=this;return function(e,i){t.removeAttached(e),t.uploaded--,t.trigger("remove",i)}},isUploadInProgress:function(){var t=!1;return this.attached-this.uploaded&&(t=!0),t},addFileByDataUrl:function(t,e){var i=this.dataUrlToBlob(t),n={"image/png":"png","image/jpeg":"jpg"};if(!n[i.type])throw new Error("Unknown mime type. Only 'image/png' and 'image/jpeg' are available");var o=n[i.type];if(e)i.name=String(e);else{var s=(new Date).toISOString().replace("T","--").replace("Z","").replace(/[:.]/g,"-");i.name=s+"."+o}this.attemptAddFiles([i])},dataUrlToBlob:function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return new Blob([n],{type:i})}}),BEM.DOM.decl("survey-validation",{onSetMod:{js:function(){this.survey=this.findBlockOn("survey"),this.survey.on("survey-validate",this.validateCurrentPage,this),this.survey.on("change-page",this.onSurveyChangePage,this),this.scrollToError()}},validateCurrentPage:function(){var t=this,e=this.survey,i=e.getCurrentPageQuestions(),n=[];i.forEach(function(e){if(t.isQuestionValidationNeeded(e)){var i=e.getValidators()||{};t.delMod(t.findElem(e.domElem,"message","visibility","visible"),"visibility"),e.trigger("validation-change",{isValid:!0}),Object.keys(i).forEach(function(o){var s=i[o]();$.when(s).done(function(i){i||(t.setMod(t.findElem(e.domElem,"message","type",o),"visibility","visible"),e.trigger("validation-change",{isValid:!1}))}),n.push(s)})}}),$.when.apply($,n).done(function(){var e=[].slice.call(arguments),i=!e.every(function(t){return Boolean(t)});i?(t.setMod("invalid","yes"),t.scrollToError(),t.survey.onValidateError()):(t.delMod("invalid"),t.survey.onValidateSuccess())})},onSurveyChangePage:function(t,e){var i=this.survey.getPageQuestions(e.toPage),n=i.some(function(t){return this.findElem(t.domElem,"message","visibility","visible").length>0}.bind(this));this.setMod("invalid",n&&"yes"),n||this.scrollToFirstQuestion()},scrollToError:function(){var t=this.findElem("message","visibility","visible");t.length&&this._scrollTo(t.eq(0).parents(".survey__line").offset().top-50)},_scrollTo:function(t){var e=$("html, body");this.sendIframeOffset(t),e.animate({scrollTop:t})},sendIframeOffset:function(t){var e=this.findBlockOutside("b-iframe");e&&e.postMessage({"iframe-offset":t})},scrollToFirstQuestion:function(){var t=$("html, body"),e=t.scrollTop(),i=this.domElem.offset().top;e>i&&this._scrollTo(i)},isQuestionValidationNeeded:function(t){var e=t.params.groupSlug;return e?!this.survey.namedFields[e].hasMod("hidden","yes")&&!t.hasMod("hidden","yes"):!t.hasMod("hidden","yes")}}),BEM.DOM.decl("survey-conditions",{onSetMod:{js:function(){var t=this;t.survey=t.findBlockOn("survey"),t.allowPostConditions=t.params.allowPostConditions||"",t.addRelatedFields(t.allowPostConditions),t.addConditions(t.survey.questions),t.checkAllConditions()}},checkAllConditions:function(){this.checkAllQuestionsForConditions(),this.checkPostConditions(),this.survey.updateButtonStates()},survey:"",allowPostConditions:"",relatedFields:[],updateConditions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this,n=e.operation;t.forEach(function(t){var e=t.params,o=e.showConditions;o&&(t.setMod("hidden","yes"),"add"===n&&i.addRelatedFields(o),"remove"===n&&i.removeRelatedFields(o))})},addConditions:function(t){this.updateConditions(t,{operation:"add"})},removeConditions:function(t){this.updateConditions(t,{operation:"remove"})},addRelatedFields:function(t){var e=this,i=[];t&&t.forEach(function(t){t.forEach(function(t){var n=t.field;e.relatedFields.indexOf(n)===-1&&(e.relatedFields.push(n),i.push(n))})}),i.forEach(function(t){var i=e.survey.namedFields[t];i&&i.on("change",e.checkAllConditions,e)})},removeRelatedFields:function(t){var e=this;t&&t.forEach(function(t){t.forEach(function(t){var i=t.field,n=(e.survey.namedFields[i]||{}).group_slug,o=e.relatedFields.indexOf(i);n&&o!==-1&&e.relatedFields.splice(o,1)})})},checkAllQuestionsForConditions:function(){var t=this;t.survey.questions.forEach(function(e){var i=e.params,n=i.showConditions;n&&!e.params.isHidden&&(t.checkConditions(n)?e.delMod("hidden"):e.setMod("hidden","yes"))})},checkPostConditions:function(){var t=this,e=t.allowPostConditions;e&&(t.checkConditions(e)?t.survey.submitButton.delMod("hidden"):t.survey.submitButton.setMod("hidden","yes"))},checkConditions:function(t){var e=this,i=t.some(function(t){return e.checkGroup(t)});return i},checkGroup:function(t){var e=!1,i=this;return t.forEach(function(t,n){var o=t.operator,s=t.field,r=t.condition,a=t.field_value;if(0===n)e=e||i.checkField(r,s,a);else switch(o){case"and":e=e&&i.checkField(r,s,a);break;case"or":e=e||i.checkField(r,s,a)}}),e},checkField:function(t,e,i){var n=this,o=!1,s=n.survey.namedFields[e];return s.hasMod("hidden")&&!s.hasMod("hidden-by-default")?o:o=s.checkValueWithCond(t,i)},addQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.addConditions(t),this.checkAllConditions()},removeQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.removeConditions(t)}}),BEM.decl("uri",{onSetMod:{js:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return"undefined"!=typeof t?(this.uriParts[e]=t,this):this.uriParts[e]}})}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(t){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?:?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],n=e.exec(t||""),o={};return i.forEach(function(t,e){o[t]=n[e]||""}),o},parseQuery:function(t){var e,i,n,o,s,r={};if("string"!=typeof t||""===t)return r;for(i=t.replace("?","").split("&"),e=0;e<i.length;e++)n=i[e].split("="),n=[n.shift(),void 0!==n[0]?n.join("="):null],o=this.decode(n[0]),s=n[1]||""===n[1]?this.decode(n[1]):null,r[o]?(s||""===s)&&r[o].push(s):r[o]=null===s?[]:[s];return r},query:function(t){var e="";"undefined"!=typeof t&&(this.queryParams=this.parseQuery(t));var i=this.queryParams,n=Object.keys(i),o=this;return n.forEach(function(t,n){n>0&&(e+="&"),"object"!==_typeof(i[t])||i[t].length?i[t].forEach(function(i,n){n>0&&(e+="&"),e+=o.encode(t)+"="+o.encode(i)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var i=[];return"undefined"!=typeof e&&((this.queryParams[t]||[]).forEach(function(t){t!==e&&i.push(t)}),this.queryParams[t]=i),"undefined"!=typeof e&&0!==i.length||delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,i){return this.deleteParam(t,i).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?t+=0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?"/"+this.path():this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),t+=this.path()?this.path():this.host()?"/":window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.DOM.decl("survey-field-filters",{onSetMod:{js:function(){var t=this;t.survey=t.findBlockOn("survey"),t.addFilters()}},relatedFields:[],updateFilters:function(t,e){var i=this,n=(e||{}).operation,o=t||i.survey.questions;o.forEach(function(t){var e=t.params,o=e.fieldFilters||[];o.length&&("add"===n&&i.addRelatedFields(o),"remove"===n&&i.removeRelatedFields(o))})},addFilters:function(t){this.updateFilters(t,{operation:"add"})},removeFilters:function(t){this.updateFilters(t,{operation:"remove"})},addRelatedFields:function(t){var e=this,i=[],n=[];t&&t.forEach(function(t){var o=t.field;e.relatedFields.indexOf(o)===-1&&(e.relatedFields.push(o),n.push(o)),i.push(o)}),i.forEach(function(t){var i=e.survey.namedFields[t];if(i){var o=i.params.name||"",s=i.val();s&&e.handleRelatedFieldChange(o,s),n.indexOf(t)!==-1&&i.on("change",function(t,i){var n=i.value||"",o=this.params.name||"";e.handleRelatedFieldChange(o,n,{clearPrev:!0})})}})},removeRelatedFields:function(t){var e=this;t&&t.forEach(function(t){var i=t.field,n=(e.survey.namedFields[i]||{}).group_slug,o=e.relatedFields.indexOf(i);n&&o!==-1&&e.relatedFields.splice(o,1)})},handleRelatedFieldChange:function(t,e,i){var n=this,o=BEM.blocks.uri;i=i||{},n.survey.questions.forEach(function(s){var r=s.params,a=r.fieldFilters||[],c=s.hasMod("widget","autocomplete-selection");a=a.filter(function(e){return e.field===t}),a.length&&(c&&i.clearPrev&&s.clearValue(),a.forEach(function(i){var r=i.param_name||"",a=s.findBlockInside({block:"input",modName:"suggest",modVal:"yes"}),l=a.getDataprovider(),u=l&&l.params&&l.params.url||"",h=void 0,d=e;u&&(u=o.parse(u),h=u.getParam("uri"),h=o.parse(h[0]),c&&("yt_table_source"===r&&((n.survey.namedFields[t]||{}).params||{}).isMultiple?d=null:"[object Object]"===Object.prototype.toString.call(e)&&(d=Object.keys(e).join())),d?h.replaceParam(r,d):h.deleteParam(r),h=h.toString(),u.replaceParam("uri",h),l.params.url=u.toString())}))})},addQuestions:function(t){this.addFilters(t)},removeQuestions:function(t){this.removeFilters(t)}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{
getDefaultParams:function(){var t=this.__base();return t.offsetWithoutTail=5,t},repaint:function(){return this._saveDefault(),this.__base(),this.domElem.css({maxWidth:this.size.width,height:this.size.height}),this},_saveDefault:function(){this._defSize||(this._defSize=this.getPopupSize())},_resetDefault:function(){return this._defSize=null,this.domElem.css({maxWidth:"",height:""}),this},_getAvailableSpace:function(t){return this._owner?{width:this._getAvailableWidth(t),height:this._getAvailableHeight(t)}:$.extend({},this._defSize)},_getAvailableWidth:function(t){var e=BEM.DOM.getWindowSize(),i=e.width,n=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"left":i=o.left,"number"==typeof n&&(i-=n),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(n.left&&(i+=n.left),n.right&&(i-=n.right));break;case"right":i=e.width-o.right,"number"==typeof n&&(i-=n),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(n.left&&(i-=n.left),n.right&&(i+=n.right))}return"left"!==t.to&&"right"!==t.to||(i-=this._tailPos?2*this.params.tail.width:this.params.offsetWithoutTail),Math.min(s.width,i)},_getAvailableHeight:function(t){var e=BEM.DOM.getWindowSize(),i=e.height,n=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"bottom":i=e.height-o.bottom,"number"==typeof n&&(i-=n),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(n.bottom&&(i+=n.bottom),n.top&&(i-=n.top));break;case"top":i=o.top,"number"==typeof n&&(i-=n),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(n.bottom&&(i-=n.bottom),n.top&&(i+=n.top))}return"bottom"!==t.to&&"top"!==t.to||(i-=this._tailPos?2*this.params.tail.height:this.params.offsetWithoutTail),Math.min(s.height,i)},_calcTop:function(t){var e,i=this.__base(t),n=$(window).scrollTop(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return i<0&&(i=0),e=Math.max(o.height+n,r.top+a.height),i+s.height>e&&(i=e-s.height),i},_calcLeft:function(t){var e,i=this.__base(t),n=$(window).scrollLeft(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return i<0&&(i=0),e=Math.max(o.width+n,r.left+a.width),i+s.width>e&&(i=e-s.width),i},getPlacingSize:function(){return this._availSizes},_calcPlacingSize:function(t){return this._availSizes=this._getAvailableSpace(t),this._availSizes},_calcVisibilityFactor:function(){var t=this._defSize,e=this.getPlacingSize(),i=e.height*e.width,n=t.height*t.width;return i/n*100}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{_getAvailableHeight:function(t){var e=this.__base(t),i=$.extend({},this._defSize);return"bottom"===t.to&&e<i.height&&e<200?200:e},_getSizeOf:function(t){return{height:t.outerHeight(),width:t[0].getBoundingClientRect().width}},repaint:function(){return this.__base(),this.domElem.css({maxWidth:"100%"}),this}}),BEM.DOM.decl({block:"popup",modName:"role",modVal:"survey-alert"},{_onClick:function(){this.hide()}},{live:function(){this.liveBindTo("pointerclick",function(){this._onClick()})}}),BEM.DOM.decl("scale-question",{onSetMod:{js:function(){var t=this,e=t.findBlockInside("radiobox");e.on("change",function(){var i=e.val();t.elem("answer").val(i),i&&t.elem("answer").prop("checked",!0)})}}}),BEM.DOM.decl("payment",{onSetMod:{js:function(){this.control=this.findBlockOn("payment-value","input"),this.paymentAmount=this.findBlockOn("amount-input","input"),this.paymentType=this.findBlockOn("payment-type","radio-button"),this._bindEvents()}},_bindEvents:function(){this.paymentAmount&&this.paymentAmount.on("change",this._onChange,this),this.paymentType.on("change",this._onChange,this)},_getAmount:function(){return Number(this.paymentAmount.val())},_setAmount:function(t){this.paymentAmount&&this.paymentAmount.val(t)},_isValidAmount:function(t){var e=this.params.defaultSettings.amount;return t=Number(t),isNaN(t)?e:t},_getType:function(){return this.paymentType.val()},_setType:function(t){this.paymentType.val(t)},_isValidType:function(t){var e=this.params.types;return e.indexOf(t.toUpperCase())!==-1},_onChange:function(){this._setPayment({amount:this._getAmount(),type:this._getType()})},_setPayment:function(t){var e=t.amount,i=t.type;this.control.val(e+" "+i)},val:function(t){if(t){var e=this.params.defaultSettings,i=e.type,n=e.amount,o=t.split(" "),s=_slicedToArray(o,2),r=s[0],a=s[1],c=void 0===a?i:a;return r&&this._isValidAmount(r)||(r=n),c=this._isValidType(c)?c.toUpperCase():i,this._setAmount(r),this._setType(c),this._setPayment({amount:r,type:c})}return this.control.val()},isValidAmount:function(){if(!this.paymentAmount)return!0;var t=this.paymentAmount.findElem("control")[0];if(t&&t.validity)return!t.validity.badInput;var e=this._getAmount();return!isNaN(e)},checkMaxAmount:function(){return!this.paymentAmount||this._getAmount()<=this.params.maxAmount}}),BEM.DOM.decl({block:"payment",modName:"fixed",modVal:!0},{_getAmount:function(){return this.params.amount},_setPayment:function(t){var e=t.type;this.__base({amount:this._getAmount(),type:e})}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this.updateIcon(),this.setMod(this.elem("icon"),"loaded","yes")}}},_getIconPath:function(t){var e=this.params.avatarHost,i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i;return[e,"/get-yapic/",t,n].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),n=i.every(function(t){var i=t();return!Array.isArray(i)||(e.showError(i[0],BEM.I18N("auth",i[1])),i[0].elem("control").attr("aria-invalid",!0),!1)});return n&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),n},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),!!this._checkInput(!0)&&(this._onSubmit(t),void this.trigger("submit",t))},_onSubmit:function(t){this.disableButton(),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var i=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,i.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[-а-яА-ЯёЁA-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,i,n){var o=n.checkEmpty,s=this;return[function(){return!o||0!==e.length||[t._username,"fill-input"]},function(){return!o||0!==i.length||[t._password,"fill-input"]},function(){return!/[а-яА-ЯёЁ]/.test(i)||[t._password,"wrong-keyboard-layout"]},function(){return!!s._isUsernameValid(e,!o)||[t._username,"wrong-characters"]},function(){return!!s._isPasswordValid(i)||[t._password,"wrong-characters"]},function(){return!i||i!==e||[t._password,"wrong-password"]}]}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(n,i):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-e.top,l=e.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),l>0&&(a-=l),"middle"===t?(a-=s,i+=a/2):"bottom"===t&&(a-=s,i+=a),i<0&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,c=r.width,l=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),l>0&&(c-=l),"center"===t?(c-=s,i+=c/2):"right"===t&&(c-=s,i+=c),i},_calcOffsetByTail:function(t){var e=this.params.tail,i=e.height,n={};switch(t.to){case"top":n={top:-i};break;case"bottom":n={top:i};break;case"right":n={left:i};break;case"left":n={left:-i}}return n},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return!!o&&("top"===i||"bottom"===i?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==i&&"right"!==i||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e)},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),i=this;if(e)i._createSocial(e);else{var n=t.param("social-host");if(!n)return;i._getSocialProviders(n,function(t){i._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),i=this.__self._getTopWindow().location;t&&i.href!==t?i.href=t:i.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var i,n,o,s=[];return t=t.filter(function(t){return t.enabled}),n=this._buildSocialPrimary(t),s=s.concat(n),o=this._buildSocialSecondary(t),i=this._buildSocialMore(n,o,e,t),i&&s.push(i),s},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:this.xmlEscape(t.display_name)}}},this)},xmlEscape:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return String(t).replace(/&(?!\w+;)|[<>"']/g,function(t){return e[t]||t})},_buildSocialMore:function(t,e,i,n){if(t.length>=n.length)return!1;var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"· · ·"},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:i}}],content:e}}]}},_getTopWindow:function(){return window.top}}),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._seed=0}}},start:function(t,e,i){var n,o,s=this;return this._onSuccess=t,this._onFailure=e,this._hasLocalStorage()?(this._cleanup(),i=$.extend({},s._getDefaultParams(),i),n=i.startUrl+"?",delete i.startUrl,delete i.popupName,o=i.display,this._seed="_"+Number(new Date)+Math.floor(1e9*Math.random()).toString(16).slice(0,6),o&&"popup"!==o&&(i.retpath=i.retnopopup||i.retpath||window.location.href,delete i.retnopopup),i.retpath+=(i.retpath.indexOf("?")!==-1?"&":"?")+"social-broker_seed="+encodeURIComponent(this._seed),n+=Object.keys(i).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e])),t},[]).join("&"),o&&"popup"!==o?void this._navigate(n):(this._lsLoginStatusKey="login_status_from"+this._seed,this._window=window.open(n,this._seed,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(s._lsLoginStatusKey)}catch(t){}if(s.isClosed()&&(clearInterval(s._timer),!t))return void s.onFailure({status:"error"});if(t){var e=s._deserialize(t);s._handleStatus(e)===!1&&s.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"}))):void this.onFailure({status:"error"})},_hasLocalStorage:function(){return Boolean(window.localStorage)},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(i){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status&&(this.onFailure(t),!0)},isClosed:function(){return!this._window||this._window.closed},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,i,n){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",i,", height=",n].join("")},_getPopupParams:function(){var t,e,i=this._windowWidth,n=this._windowHeight;return window.opera?(t=(screen.availWidth-i)/2,e=(screen.availHeight-n)/2):(t=(window.innerWidth-i)/2,e=(window.innerHeight-n)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,i,n)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}}),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,i=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=i,i.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=i[e].bind(i)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var i="open"===e;this.elem("switcher").attr("aria-expanded",i),this._getButton()&&this._getButton().toggleMod("arrow","up","down",i)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);t&&!this._popup.isShown()||this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),i=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e=this.__self,i=e._buildTypePopup(this._uniqId,this.params.mods,this.params.js),n=$(BEMHTML.apply(i)),o=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,n),this._popup=n.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),o){var s=o.domElem;t.getUsernameBlock().val(s.find("input[name=login]").change().val()),t.getPasswordBlock().val(s.find("input[name=passwd]").change().val()),delete this.params.hidden,o.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){this._form&&(BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw())}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,i){var n=(i||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},i),mods:$.extend({type:"popup"},e),content:[n?{elem:"explain",content:n}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){if(!this._menu){this._menu=!0;var t=BEM.blocks.keycodes.SPACE,e=function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey};this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keydown",function(i){e(i)||i.which===t&&this._dropdown&&i.preventDefault()}).liveBindTo("keyup",function(i){e(i)||i.which===t&&this.domElem.click()})}return this.__base(),!1}}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,i,n){if("disabled"===n)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(i){i&&i.counters&&void 0!==i.counters.unread?t.call(this,i.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,i=this.params.unreadMax;e&&i&&e>i&&(e=i+"+");var n=e?e+" ":"";BEM.DOM.update(this.domElem,n+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"internal",modVal:"yes"},{_getIconPath:function(){var t=BEM.blocks["i-global"].param("login");return"//center.yandex-team.ru/api/v1/user/"+t+"/avatar.jpg"}});